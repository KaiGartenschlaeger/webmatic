
loadMainMenu=function(a,b,c,d){if(resultOptionsMap[a+"_divisor"]!==true){if(a==="variables"||a==="programs"){$("#main_menu").append("<div "+(resultOptionsMap[a]?"":"style='display:none;'")+" id='"+a+"MainMenu' class='scrollToList list"+a+"' data-role='collapsible' data-collapsed-icon='carat-r' data-expanded-icon='carat-r' data-collapsed='"+(d===a)+"'><h3>"+mapText(a)+"</h3></div>")}else{loadSingleMenu(a,b,c,d)}}else{if(a==="variables"||a==="programs"){loadSingleDivisorMenu(a,b,c,d)}else{loadDivisor(b,c,d,a)}}};loadSingleMenu=function(g,b,a,e){$("#main_menu").append("<div "+(resultOptionsMap[g]?"":"style='display:none;'")+" id='"+g+"MainMenu' class='scrollToTop' data-role='collapsible' data-collapsed='"+(e===g)+"'><h3>"+mapText(g)+"</h3><ul id='list"+g+"' data-role='listview' data-inset='true'></ul></div>");if(localStorage.getItem("webmatic"+g+"Map")===null||localStorage.getItem("webmatic"+g+"Map")==="undefined"){if(newVersion){saveDataToFile=true}loadConfigData(false,"../webmatic_user/"+g+".json",g,"webmatic"+g+"Map",false,false)}else{loadLocalStorageMap(g)}if(localStorage.getItem("webmatic"+g+"clientMap")===null||localStorage.getItem("webmatic"+g+"clientMap")==="undefined"){if(client!==""){loadConfigData(false,"../webmatic_user/"+g+client+".json",g+"Client","webmatic"+g+"clientMap",false,true)}}else{setClientMap(g,JSON.parse(localStorage.getItem("webmatic"+g+"clientMap")))}createOneMap(g);loadConfigData(true,"cgi/"+g+".cgi",g,"webmatic"+g+"Map",false,true,function(){createOneMap(g)});var d={};$.each(getResultMap(g),function(k,l){if(k==="date"||k==="size"||k==="divisors"){return}var i="<li class='menuListItem "+b+" scrollToList' id='"+k+"' "+(l.visible?"":"style='display: none;'")+">";i+="<a href='#'><img id='menuImg"+k+"' class='menu "+a+" ui-img-"+theme;if($.inArray(k,picturesList)!==-1||picturesListError){i+=" lazy"+g+"' data-original='../webmatic_user/img/ids/"+g+"/"+k+".png"}i+="' src='img/menu/"+g+".png'><span id='menuText"+k+"' class='breakText'>"+l.name+"</span></a></li>";if(resultOptionsMap.default_sort_manually){d[parseInt(l.position)]=i}else{d[l.name.toLowerCase()]=i}});var j;if(resultOptionsMap.default_sort_manually){j=Object.keys(d).sort(function(k,i){return k-i})}else{j=Object.keys(d).sort()}var h=j.length;for(var f=0;f<h;f++){var c=j[f];$("#list"+g).append(d[c])}$("#list"+g).listview().listview("refresh");$("img.lazy"+g).lazyload({event:"lazyLoadInstantly"})};loadSingleDivisorMenu=function(j,c,b,f){$("#main_menu").append("<div "+(resultOptionsMap[j]?"":"style='display:none;'")+" id='"+j+"MainMenu' class='scrollToTop' data-role='collapsible' data-collapsed='"+(f===j)+"'><h3>"+mapText(j)+"</h3><ul id='list"+j+"' data-role='listview' data-inset='true'></ul></div>");if(localStorage.getItem("webmatic"+j+"Map")===null||localStorage.getItem("webmatic"+j+"Map")==="undefined"){if(newVersion){saveDataToFile=true}loadConfigData(false,"../webmatic_user/"+j+".json",j,"webmatic"+j+"Map",false,false)}else{loadLocalStorageMap(j)}if(localStorage.getItem("webmatic"+j+"clientMap")===null||localStorage.getItem("webmatic"+j+"clientMap")==="undefined"){if(client!==""){loadConfigData(false,"../webmatic_user/"+j+client+".json",j+"Client","webmatic"+j+"clientMap",false,true)}}else{setClientMap(j,JSON.parse(localStorage.getItem("webmatic"+j+"clientMap")))}createOneMap(j);loadConfigData(true,"cgi/"+j+".cgi",j,"webmatic"+j+"Map",false,true,function(){createOneMap(j)});var e={};var a=getResultMap(j);$.each(a.divisors,function(m,n){var i=j+m;var k="<li class='menuListSpecialItem "+c+" scrollToList' data-divisor='true' data-type='"+j+"' data-id='"+m+"' "+(resultOptionsMap[i]?"":"style='display: none;'")+">";k+="<a href='#'><img id='menuImg"+i+"' class='menu "+b+" ui-img-"+theme;if($.inArray(i,picturesList)!==-1||picturesListError){k+=" lazy"+j+"' data-original='../webmatic_user/img/ids/"+j+"/"+i+".png"}k+="' src='img/menu/"+j+".png'><span id='menuText"+i+"' class='breakText'>"+n.name+"</span></a></li>";if(resultOptionsMap.default_sort_manually){e[parseInt(n.position)]=k}else{e[n.name.toLowerCase()]=k}});var l;if(resultOptionsMap.default_sort_manually){l=Object.keys(e).sort(function(k,i){return k-i})}else{l=Object.keys(e).sort()}var h=l.length;for(var g=0;g<h;g++){var d=l[g];$("#list"+j).append(e[d])}$.each(a,function(m,n){if(m==="date"||m==="size"||m==="divisors"||n[j+"_divisor"]!=="unsorted"||!n.visible){return}var i=j+"unsorted";var k="<li class='menuListSpecialItem "+c+" scrollToList' data-divisor='true' data-type='"+j+"' data-id='unsorted' >";k+="<a href='#'><img id='menuImg"+i+"' class='menu "+b+" ui-img-"+theme;k+="' src='img/menu/"+j+".png'><span id='menuText"+i+"' class='breakText'>"+mapText("UNSORTED")+"</span></a></li>";$("#list"+j).append(k);return false});$("#list"+j).listview().listview("refresh");$("img.lazy"+j).lazyload({event:"lazyLoadInstantly"})};loadDivisor=function(c,b,e,h){if(localStorage.getItem("webmatic"+h+"Map")===null||localStorage.getItem("webmatic"+h+"Map")==="undefined"){if(newVersion){saveDataToFile=true}loadConfigData(false,"../webmatic_user/"+h+".json",h,"webmatic"+h+"Map",false,false)}else{loadLocalStorageMap(h)}if(localStorage.getItem("webmatic"+h+"clientMap")===null||localStorage.getItem("webmatic"+h+"clientMap")==="undefined"){if(client!==""){loadConfigData(false,"../webmatic_user/"+h+client+".json",h+"Client","webmatic"+h+"clientMap",false,true)}}else{setClientMap(h,JSON.parse(localStorage.getItem("webmatic"+h+"clientMap")))}createOneMap(h);loadConfigData(true,"cgi/"+h+".cgi",h,"webmatic"+h+"Map",false,true,function(){createOneMap(h)});var a=getResultMap(h);var l={};addUnsorted(a);$.each(a.divisors,function(t,m){if($.isNumeric(t)){t=parseInt(t)}var r=h+t;var q="<div "+(resultOptionsMap[r]||t==="unsorted"?"":"style='display:none;'")+" id='"+r+"MainMenu' class='scrollToTop' data-role='collapsible' data-collapsed='"+(e===r)+"'>";q+="<h3>"+m.name+"</h3>";q+="<ul class='list"+h+"Div' data-role='listview' id='listElement"+r+"' data-inset='true'>";var o={};$.each(a,function(k,v){if(k==="date"||k==="size"||k==="divisors"||v[h+"_divisor"]!==t){return}var i="<li class='menuListItem "+c+" scrollToList' id='"+k+"' "+(v.visible?"":"style='display: none;'")+">";i+="<a href='#'><img id='menuImg"+k+"' class='menu "+b+" ui-img-"+theme;if($.inArray(k,picturesList)!==-1||picturesListError){i+=" lazy"+h+"Div' data-original='../webmatic_user/img/ids/"+h+"/"+k+".png"}i+="' src='img/menu/"+h+".png'><span id='menuText"+k+"' class='breakText'>"+v.name+"</span></a></li>";if(resultOptionsMap.default_sort_manually){o[parseInt(v.position)]=i}else{o[v.name.toLowerCase()]=i}});var u;if(resultOptionsMap.default_sort_manually){u=Object.keys(o).sort(function(k,i){return k-i})}else{u=Object.keys(o).sort()}var s=u.length;for(var p=0;p<s;p++){var n=u[p];q+=o[n]}q+="</ul></div>";l[parseInt(m.position)]=q});removeUnsorted(a);var j=Object.keys(l).sort(function(k,i){return k-i});var g=j.length;for(var f=0;f<g;f++){var d=j[f];$("#main_menu").append(l[d])}if($("#listElement"+h+"unsorted").children().length===0){$("#"+h+"unsortedMainMenu").remove()}$(".list"+h+"Div").listview().listview("refresh");$("img.lazy"+h+"Div").lazyload({event:"lazyLoadInstantly"})};executeButtons=function(a,c,e,d,b){if(twoPage){$.mobile.changePage("#page2",{transition:resultOptionsMap.transition,changeHash:true});page2=true}lastClickType=a;lastClickID=c;$(".ui-input-search .ui-input-text").val("");readModus=e;if(d.data("divisor")){divisorClick=true}else{divisorClick=false}refreshPage(d,b)};$(function(){$.ajaxSetup({cache:false});$("#removeMessages").text(mapText("REMOVE_MESSAGES"));$(".dlgAbout").text(mapText("ABOUT"));$("#serviceText").text(mapText("SERVICE_NOTE"));$("#serviceTextNone").text(mapText("NO_DISORDERS"));$(".save-button-text").text(mapText("SAVE"));$(".reload-button-text").text(mapText("RELOAD_CCU_CHANGES"));gfxClass=resultOptionsMap.default_menugfxsize;var c="";var b="";if(!gfxClass||gfxClass===""||gfxClass==="large"){gfxClass="large";c="ui-li-thumb";b="ui-li-has-thumb"}else{gfxClass="small";c="ui-li-icon";b="ui-li-has-icon"}twoPage=resultOptionsMap.two_sites;var d=resultOptionsMap.collapsed;if(isTempClient){d="others"}var a="favorites";loadMainMenu(a,b,c,d);a="rooms";loadMainMenu(a,b,c,d);a="functions";loadMainMenu(a,b,c,d);a="variables";loadMainMenu(a,b,c,d);a="programs";loadMainMenu(a,b,c,d);$("img").trigger("lazyLoadInstantly");$("#main_menu").append("<div "+(resultOptionsMap.others||isTempClient?"":"style='display:none;'")+" id='othersMainMenu' class='menuListRow' data-role='collapsible' data-collapsed='"+(d==="others")+"'><h3>"+mapText("SETTINGS")+"</h3><ul id='listOther' data-role='listview' data-inset='true'></ul></div>");$("#listOther").append("<li id='menuItemvariables' class='menuItemvariables "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/variables.png'><span class='breakText'>"+mapText("VARIABLES")+"</span></a></li>");$("#listOther").append("<li id='menuItemprograms' class='menuItemprograms "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/programs.png'><span class='breakText'>"+mapText("PROGRAMS")+"</span></a></li>");$("#listOther").append("<li id='menuItemOptions' class='menuItemOptions "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/options.png'><span class='breakText'>"+mapText("OPTIONS")+"</span></a></li>");if(client!==""){$("#listOther").append("<li id='menuItemOptionsClient' class='menuItemOptionsClient "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/options.png'><span class='breakText'>"+mapText("OPTIONS_CLIENT")+"</span></a></li>")}$("#listOther").append("<li id='menuItemGraphicIDs_favorites' class='menuItemGraphicIDs "+b+"' data-refresh-id='4'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("FAVORITES")+")</span></a></li>");$("#listOther").append("<li id='menuItemGraphicIDs_rooms' class='menuItemGraphicIDs "+b+"' data-refresh-id='8'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("ROOMS")+")</span></a></li>");$("#listOther").append("<li id='menuItemGraphicIDs_functions' class='menuItemGraphicIDs "+b+"' data-refresh-id='9'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("FUNCTIONS")+")</span></a></li>");$("#listOther").append("<li id='menuItemGraphicIDs_programs' class='menuItemGraphicIDs "+b+"' data-refresh-id='10'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("PROGRAMS")+")</span></a></li>");$("#listOther").append("<li id='menuItemGraphicIDs_variables' class='menuItemGraphicIDs "+b+"' data-refresh-id='12'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("VARIABLES")+")</span></a></li>");if(debugModus){$("#listOther").append("<li id='menuItemDebug' class='menuItemDebug "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/debug.png'><span class='breakText'>"+mapText("TEST_DEVICE")+"</span></a></li>");$("#listOther").append("<li id='menuItemDebugCUxD' class='menuItemDebugCUxD "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/debug.png'><span class='breakText'>"+mapText("TEST_CUXD")+"</span></a></li>")}$("#listOther").listview().listview("refresh");$("#main_menu").collapsibleset("refresh");refreshServiceMessages();restartTimer();changeTheme(theme);changeFont(font);changeTwoPage(twoPage);changeNumberOfColumns(resultOptionsMap.colums,false);$(document.body).on("click",".scrollToList",function(){$("html, body").animate({scrollTop:$("#"+prim).offset().top-60},200)});$(document.body).on("collapsibleexpand",".scrollToTop",function(){$("html, body").animate({scrollTop:$("#main_menu").offset().top-60},200)});$(document.body).on("collapsibleexpand",".listvariables",function(){$(this).children(".ui-collapsible-content").hide();executeButtons(2,$(this).attr("id"),true,$(this))});$(document.body).on("collapsibleexpand",".listprograms",function(){$(this).children(".ui-collapsible-content").hide();executeButtons(3,$(this).attr("id"),true,$(this))});$(document.body).on("click",".menuListItem",function(){executeButtons(1,$(this).attr("id"),true,$(this))});$(document.body).on("click",".menuListSpecialItem",function(){var f=$(this);var e=f.data("type");executeButtons("variables"===e?2:3,f.data("id"),true,f)});$(document.body).on("click",".menuItemvariables",function(){executeButtons(2,$(this).attr("id"),false,$(this))});$(document.body).on("click",".menuItemprograms",function(){executeButtons(3,$(this).attr("id"),false,$(this))});$(document.body).on("click",".menuItemGraphicIDs",function(){executeButtons($(this).data("refresh-id"),$(this).attr("id"),true,$(this),1)});$(document.body).on("click",".menuItemDebug",function(){executeButtons(5,0,true,$(this))});$(document.body).on("click",".menuItemDebugCUxD",function(){executeButtons(6,0,true,$(this))});$(document.body).on("click",".menuItemOptions",function(){executeButtons(7,$(this).attr("id"),true,$(this),1)});$(document.body).on("click",".menuItemOptionsClient",function(){executeButtons(11,$(this).attr("id"),true,$(this),1)});$(document.body).on("click",".buttonRefresh",function(){refreshPage(0);refreshServiceMessages()});$(document.body).on("click","#removeMessages",function(){removeMessages();refreshServiceMessages()});$(document.body).on("click",'[name="reloadCCUChanges"]',function(){window.location.reload(true)});$("#main_menu").children("div[data-collapsed='true']").collapsible("expand");if(isTempClient){d="others";executeButtons(11,"menuItemOptionsClient",true,$(this),1)}$(".backText").on("click",function(){page2=false})});