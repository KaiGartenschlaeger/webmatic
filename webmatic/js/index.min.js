
function loadMainMenu(g,b,a,e){$("#main_menu").append("<div "+(resultOptionsMap[g]?"":"style='display:none;'")+" id='"+g+"MainMenu' class='scrollToTop' data-role='collapsible' data-collapsed='"+(e===g)+"'><h3>"+mapText(g)+"</h3><ul id='list"+g+"' data-role='listview' data-inset='true'></ul></div>");if(localStorage.getItem("webmatic"+g+"Map")===null){if(newVersion){saveDataToFile=true}loadConfigData(false,"../webmatic_user/"+g+".json",g,"webmatic"+g+"Map",false,false)}else{loadLocalStorageMap(g)}if(localStorage.getItem("webmatic"+g+"clientMap")===null){if(client!==""){loadConfigData(false,"../webmatic_user/"+g+client+".json",g+"Client","webmatic"+g+"clientMap",false,true)}}else{setResultMap(g,JSON.parse(localStorage.getItem("webmatic"+g+"clientMap")))}createOneMap(g);loadConfigData(true,"cgi/"+g+".cgi",g,"webmatic"+g+"Map",false,true,function(){createOneMap(g)});var d={};$.each(getResultMap(g),function(k,l){if(k==="date"||k==="size"){return}var i="<li class='menuListItem "+b+" scrollToList' id='"+k+"' "+(l.visible?"":"style='display: none;'")+">";i+="<a href='#'><img id='menuImg"+k+"' class='menu "+a+" ui-img-"+theme;if($.inArray(k,picturesList)!==-1||picturesListError){i+=" lazy"+g+"' data-original='../webmatic_user/img/ids/"+g+"/"+k+".png"}i+="' src='img/menu/"+g+".png'><span id='menuText"+k+"' class='breakText'>"+l.name+"</span></a></li>";if(resultOptionsMap.default_sort_manually){d[parseInt(l.position)]=i}else{d[l.name]=i}});var j;if(resultOptionsMap.default_sort_manually){j=Object.keys(d).sort(function(k,i){return k-i})}else{j=Object.keys(d).sort()}var h=j.length;for(var f=0;f<h;f++){var c=j[f];$("#list"+g).append(d[c])}$("#list"+g).listview().listview("refresh");$("img.lazy"+g).lazyload({event:"lazyLoadInstantly"})}$(function(){$.ajaxSetup({cache:false});gfxClass=resultOptionsMap.default_menugfxsize;var c="";var b="";if(!gfxClass||gfxClass===""||gfxClass==="large"){gfxClass="large";c="ui-li-thumb";b="ui-li-has-thumb"}else{gfxClass="small";c="ui-li-icon";b="ui-li-has-icon"}var d=resultOptionsMap.collapsed;if(isTempClient){d="others"}var a="favorites";loadMainMenu(a,b,c,d);a="rooms";loadMainMenu(a,b,c,d);a="functions";loadMainMenu(a,b,c,d);$("img").trigger("lazyLoadInstantly");$("#main_menu").append("<div "+(resultOptionsMap.variables?"":"style='display:none;'")+" id='variablesMainMenu' class='scrollToList listVariables' data-role='collapsible' data-collapsed-icon='carat-r' data-expanded-icon='carat-r' data-collapsed='"+(d==="variables")+"'><h3>"+mapText("SYS_VAR")+"</h3></div>");$("#main_menu").append("<div "+(resultOptionsMap.programs?"":"style='display:none;'")+" id='programsMainMenu' class='scrollToList listPrograms' data-role='collapsible' data-collapsed-icon='carat-r' data-expanded-icon='carat-r' data-collapsed='"+(d==="programs")+"'><h3>"+mapText("PROGRAMS")+"</h3></div>");$("#main_menu").append("<div "+(resultOptionsMap.others||isTempClient?"":"style='display:none;'")+" id='othersMainMenu' class='menuListRow' data-role='collapsible' data-collapsed='"+(d==="others")+"'><h3>"+mapText("SETTINGS")+"</h3><ul id='listOther' data-role='listview' data-inset='true'></ul></div>");$("#listOther").append("<li id='menuItemVariables' class='menuItemVariables "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/variables.png'><span class='breakText'>"+mapText("SYS_VAR")+"</span></a></li>");$("#listOther").append("<li id='menuItemPrograms' class='menuItemPrograms "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/programs.png'><span class='breakText'>"+mapText("PROGRAMS")+"</span></a></li>");$("#listOther").append("<li id='menuItemOptions' class='menuItemOptions "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/options.png'><span class='breakText'>"+mapText("OPTIONS")+"</span></a></li>");if(client!==""){$("#listOther").append("<li id='menuItemOptionsClient' class='menuItemOptionsClient "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/options.png'><span class='breakText'>"+mapText("OPTIONS_CLIENT")+"</span></a></li>")}$("#listOther").append("<li id='menuItemGraphicIDs_FAVORITES' class='menuItemGraphicIDs "+b+"' data-refresh-id='4'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("FAVORITES")+")</span></a></li>");$("#listOther").append("<li id='menuItemGraphicIDs_ROOMS' class='menuItemGraphicIDs "+b+"' data-refresh-id='8'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("ROOMS")+")</span></a></li>");$("#listOther").append("<li id='menuItemGraphicIDs_FUNCTIONS' class='menuItemGraphicIDs "+b+"' data-refresh-id='9'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("FUNCTIONS")+")</span></a></li>");$("#listOther").append("<li id='menuItemGraphicIDs_PROGRAMS' class='menuItemGraphicIDs "+b+"' data-refresh-id='10'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/graphics.png'><span class='breakText'>"+mapText("EDIT")+" ("+mapText("PROGRAMS")+")</span></a></li>");if(debugModus){$("#listOther").append("<li id='menuItemDebug' class='menuItemDebug "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/debug.png'><span class='breakText'>"+mapText("TEST_DEVICE")+"</span></a></li>");$("#listOther").append("<li id='menuItemDebugCUxD' class='menuItemDebugCUxD "+b+"'><a href='#'><img class='menu "+c+" ui-img-"+theme+"' src='img/menu/debug.png'><span class='breakText'>"+mapText("TEST_CUXD")+"</span></a></li>")}$("#listOther").listview().listview("refresh");$("#main_menu").collapsibleset("refresh");refreshServiceMessages();restartTimer();changeTheme(theme);changeFont(font);$(document.body).on("click",".scrollToList",function(){$("html, body").animate({scrollTop:$("#prim").offset().top-60},200)});$(document.body).on("collapsibleexpand",".scrollToTop",function(){$("html, body").animate({scrollTop:$("#main_menu").offset().top-60},200)});$(document.body).on("collapsibleexpand",".listVariables",function(){$(this).children(".ui-collapsible-content").hide();lastClickType=2;lastClickID=$(this).attr("id");$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))});$(document.body).on("collapsibleexpand",".listPrograms",function(){$(this).children(".ui-collapsible-content").hide();lastClickType=3;lastClickID=$(this).attr("id");$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))});$(document.body).on("click",".menuListItem",function(){lastClickType=1;lastClickID=$(this).attr("id");$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))});$(document.body).on("click",".menuItemVariables",function(){lastClickType=2;lastClickID=$(this).attr("id");$(".ui-input-search .ui-input-text").val("");readModus=false;refreshPage($(this))});$(document.body).on("click",".menuItemPrograms",function(){lastClickType=3;lastClickID=$(this).attr("id");$(".ui-input-search .ui-input-text").val("");readModus=false;refreshPage($(this))});$(document.body).on("click",".menuItemGraphicIDs",function(){lastClickType=$(this).data("refresh-id");lastClickID=$(this).attr("id");$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))});$(document.body).on("click",".menuItemDebug",function(){lastClickType=5;lastClickID=0;$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))});$(document.body).on("click",".menuItemDebugCUxD",function(){lastClickType=6;lastClickID=0;$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))});$(document.body).on("click",".menuItemOptions",function(){lastClickType=7;lastClickID=$(this).attr("id");$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))});$(document.body).on("click",".menuItemOptionsClient",function(){lastClickType=11;lastClickID=$(this).attr("id");$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))});$(document.body).on("click","#buttonRefresh",function(){refreshPage(0);refreshServiceMessages()});$(document.body).on("click","#removeMessages",function(){removeMessages();refreshServiceMessages()});$(document.body).on("click","[name='optionsMenuGfxThemeChooser']",function(){$("[name='optionsMenuGfxThemeChooser']").removeClass("ui-btn-active");$(this).addClass("ui-btn-active");changeTheme($(this).data("value"))});$(document.body).on("click","[name='optionsMenuGfxFontChooser']",function(){$("[name='optionsMenuGfxFontChooser']").removeClass("ui-btn-active");$(this).addClass("ui-btn-active");changeFont($(this).data("value"))});$(document.body).on("click","#reloadWebMatic",function(){window.location.reload()});$("#main_menu").children("div[data-collapsed='true']").collapsible("expand");if(isTempClient){d="others";lastClickType=11;lastClickID="menuItemOptionsClient";$(".ui-input-search .ui-input-text").val("");readModus=true;refreshPage($(this))}});