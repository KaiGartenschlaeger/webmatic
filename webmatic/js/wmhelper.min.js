function checkrefreshPage(){var e=new Date,a=e.getTime();-1!==lastTime?a-lastTime>6e4&&((1===lastClickType||2===lastClickType||3===lastClickType||5===lastClickType||6===lastClickType)&&refreshPage(0),refreshServiceMessages(),lastTime=a):lastTime=a}function restartTimer(){var e=new Date;lastTime=e.getTime()}function createVerFile(){$.ajax({url:Base64.decode("aHR0cHM6Ly9nb28uZ2wvYVRhazNn"),method:"GET",dataType:"JSONP",error:function(e,a){"error"===a&&$.post("cgi/saveconfig.cgi",{name:"ver",text:webmaticVersion,folder:userFolder})}})}function addVariableField(e,a,t,i,s,n,r){var o=unescape(t.value),l=t.valueType,d=t.valueUnit,u="";return u+=s?addReadonlyVariable(a,o,i,l,d,t.valueList,t.valueName0,t.valueName1,t.faktor?t.faktor:1):"2"===l?addSetBoolButtonList(e,a,o,t.valueName0,t.valueName1,d,i,!0,n,!1,r):"4"===l?addSetNumber(e,a,o,d,t.valueMin,t.valueMax,t.step?t.step:1,t.faktor?t.faktor:1,i,!0,n):"16"===l?addSetValueList(e,a,o,t.valueList,d,i,!0,n,t.listType?t.listType:"auto",!1,r):"20"===l&&"HTML"===d.toUpperCase()?addHTML(e,a,o,i,!n):"20"===l&&"HISTORIAN"===d.toUpperCase()?addHistorianDiagram(e,a,o,i,!n):"20"===l&&"TUNEIN"===d.toUpperCase()?addTuneInRadio(e,a,o,i,!n):"20"===l&&"COLOR"===d.toUpperCase()?addColorPicker(e,a,o,i,n):"20"===l&&"DATE"===d.toUpperCase()?addDatePicker(e,a,o,i,n,"datebox"):"20"===l&&"TIME"===d.toUpperCase()?addDatePicker(e,a,o,i,n,"timebox"):"20"===l?addSetText(e,a,o,d,i,n):mapText("UNKNOWN_VAR_TYPE")+"!"}function addSetButton(e,a,t,i,s,n,r,o,l,d){var u="";return n||(u+="<p class='ui-li-desc'>"),u+="<a href='#' id='setButton_"+a+"' "+(d?"data-special='"+d+"' ":"")+"data-id='"+a+"' data-parent-id='"+e+"' data-refresh='"+o+"' data-value='"+i+"' class='ui-link ui-btn ui-btn-inline ui-shadow ui-corner-all "+(r?"ui-btn-active ":"")+(l?"":"ui-state-disabled ")+"'>"+t+"</a>",n||(u+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+s+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span></p>"),u}function addSetControlGroup(e,a,t,i,s,n,r,o,l){var d="";return d+="<div data-role='controlgroup' data-type='horizontal'>",o&&(d+=o),d+=addSetButton(e,a,t,0,s,!0,0===n,!1,r),d+=addSetButton(e,a,"20%",.2,s,!0,.2===n,!1,r),d+=addSetButton(e,a,"40%",.4,s,!0,.4===n,!1,r),d+=addSetButton(e,a,"60%",.6,s,!0,.6===n,!1,r),d+=addSetButton(e,a,"80%",.8,s,!0,.8===n,!1,r),d+=addSetButton(e,a,i,1,s,!0,1===n,!1,r),l&&(d+=l),d+="</div>"}function addStartProgramButton(e,a,t,i,s){var n="<p class='ui-li-desc'><a href='#' "+(s?"data-role='button' data-inline='true' data-icon='gear'":"class='ui-link ui-btn ui-icon-gear ui-btn-icon-left ui-btn-inline ui-shadow ui-corner-all ui-state-disabled'")+" id='startProgramButton_"+a+"' data-parent-id='"+e+"' data-id='"+a+"'>"+t+"</a></div>";return n+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+i+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span></p>"}function addSetNumber(e,a,t,i,s,n,r,o,l,d,u,c){var p="<div class='ui-field-contain' id='mainNumber"+a+"'>";return p+="<input type='range' value='"+t*o+"' min='"+s*o+"' max='"+n*o+"' step='"+r*o+"' data-factor='"+o+"' id='"+(c?"options":"")+"setValue_"+a+"' data-id='"+a+"' data-highlight='true' data-theme='"+theme+"'/>",p+=" ("+s*o+" - "+n*o+" <span id='unit_ "+a+"'>"+i+"</span>) ",p+="<a href='#' id='"+(c?"options":"")+"setButton_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' data-refresh='"+d+"' "+(u?"data-role='button' data-inline='true' data-icon='check'":"class='ui-link ui-btn ui-icon-check ui-btn-icon-left ui-btn-inline ui-shadow ui-corner-all ui-state-disabled'")+">"+mapText("SET")+"</a>",p+=c?"&nbsp;<span id='optionsValueSpan"+a+"' style='font-weight: bolder; font-size: x-large;'>"+t*o+"</span>":"<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+l+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span>",p+="</div>"}function addSetBoolButtonList(e,a,t,i,s,n,r,o,l,d,u){var c="<div class=ui-field-contain' "+(u?"style='float: right;'":"")+">";c+="<div data-role='controlgroup' data-type='horizontal'>";var p="";"false"!==t&&""!==t||d||(p="ui-btn-active");var v=(l?"class='"+p+"' data-role='button' data-inline='true'":"class='ui-link ui-btn ui-btn-inline ui-shadow ui-corner-all ui-state-disabled "+p+"'")+" id='"+(d?"options":"")+"setButton_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' data-refresh='"+o+"'";return c+="<a href='#' "+v+" data-value='false' data-theme='"+theme+"'>"+i+"</a>",p="",("true"===t||d)&&(p="ui-btn-active"),v=(l?"class='"+p+"' data-role='button' data-inline='true'":"class='ui-link ui-btn ui-btn-inline ui-shadow ui-corner-all ui-state-disabled "+p+"'")+"id='"+(d?"options":"")+"setButton_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' data-refresh='"+o+"'",c+="<a href='#' "+v+" data-value='true' data-theme='"+theme+"'>"+s+"</a>",d||(c+="&nbsp;<span id='unit_ "+a+"'>"+n+"</span> ",c+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+r+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span>"),c+="</div>",c+="</div>"}function addSetValueList(e,a,t,i,s,n,r,o,l,d,u){var c=parseInt(t),p=i.split(";");return"small"===l||p.length<6&&"big"!==l?addSmallList(c,p,a,e,s,n,r,o,d,u):addBigList(c,p,a,e,s,n,r,o,d,u)}function addSmallList(e,a,t,i,s,n,r,o,l,d){var u="<div class='ui-field-contain' id='mainNumber"+t+"' "+(d?"style='float: right;'":"")+">";u+="<div data-role='controlgroup' data-type='horizontal'>";for(var c=0;c<a.length;c++){var p=e===c?"ui-btn-active":"";u+="<a href='#' id='"+(l?"options":"")+"setButton_"+t+"' data-parent-id='"+i+"' data-id='"+t+"' data-refresh='"+r+"' data-value='"+c+"' "+(o?"data-role='button' class='"+p+"' data-inline='true'":"class='ui-link ui-btn ui-btn-inline ui-shadow ui-corner-all ui-state-disabled "+p+"'")+">"+a[c]+"</a>"}return u+="&nbsp;<span id='unit_ "+t+"'>"+s+"</span> ",u+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+n+"</i> <span id='info_"+t+"' class='valueOK valueOK-"+theme+"'></span>",u+="</div>",u+="</div>"}function addBigList(e,a,t,i,s,n,r,o,l,d){var u="<div data-role='controlgroup' data-type='horizontal' id='mainNumber"+t+"' "+(d?"style='float: right;'":"")+">";u+="<select id='selector_"+t+"' data-theme='"+theme+"'>";for(var c=0;c<a.length;c++)u+=e===c?"<option value='"+c+"' selected='selected'>"+a[c]+"</option>":"<option value='"+c+"'>"+a[c]+"</option>";return u+="</select>",u+="&nbsp;<span id='unit_ "+t+"'>"+s+"</span> <a href='#' id='"+(l?"options":"")+"setValueBigList_"+t+"' data-parent-id='"+i+"' data-id='"+t+"' data-refresh='"+r+"' "+(o?"data-role='button' data-inline='true' data-icon='check'":"class='ui-link ui-btn ui-icon-check ui-btn-icon-left ui-btn-inline ui-shadow ui-corner-all ui-state-disabled'")+">&nbsp;</a>",u+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+n+"</i> <span id='info_"+t+"' class='valueOK valueOK-"+theme+"'></span>",u+="</div>"}function addSetText(e,a,t,i,s,n){var r="<div class=ui-field-contain'>";return t=t.replace(/\"/g,"&quot;"),r+=t.length>40?"<textarea id='setValue_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' style='width:20em; display:inline-block;'>"+t+"</textarea>":"<input type='text' id='setValue_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' value=\""+t+"\" style='width:20em; display:inline-block;'/>",r+=" <span id='unit_ "+a+"'>"+i+"</span> <a href='#' id='setTextButton_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' "+(n?"data-role='button' data-inline='true' data-icon='check'":"class='ui-link ui-btn ui-icon-check ui-btn-icon-left ui-btn-inline ui-shadow ui-corner-all ui-state-disabled'")+">"+mapText("SET")+"</a>",r+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+s+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span>",r+="</div>"}function addReadonlyVariable(e,a,t,i,s,n,r,o,l){var d="";if("2"===i)d="true"===a?o:r;else if("4"===i)d=parseFloat(a)*parseFloat(l);else if("16"===i){var u=n.split(";");d=u[parseInt(a)]}else d=a;return"20"===i&&"HTML"===s.toUpperCase()?addHTML("",e,a,t,!0):"20"===i&&"HISTORIAN"===s.toUpperCase()?addHistorianDiagram("",e,a,t,!0):"20"===i&&"TUNEIN"===s.toUpperCase()?addTuneInRadio("",e,a,t,!0):"20"===i&&"COLOR"===s.toUpperCase()?"<p style='background-color: "+d+";'><img class='ui-img-"+theme+"' src='img/channels/unknown.png' style='max-height:20px'><span class='valueInfo valueInfo-"+theme+"'>"+d+" </span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+t+"</i></p>":"<p><img class='ui-img-"+theme+"' src='img/channels/unknown.png' style='max-height:20px'><span class='valueInfo valueInfo-"+theme+"'>"+d+" "+("20"===i&&-1!==$.inArray(s.toUpperCase(),specialTextVariables)?"":s)+" </span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+t+"</i></p>"}function addHTML(e,a,t,i,s){var n="<div class='ui-field-contain"+(s?"":" ui-grid-a")+"'>";return n+="<div class='evalScript"+(s?"":" ui-block-a")+"' data-id='"+a+"'>"+t+"</div>",s||(n+="<div class='ui-block-b'><textarea id='setValue_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' style='width:20em; display:inline-block;'>"+t+"</textarea>",n+="<a href='#' id='setTextButton_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' data-role='button' data-inline='true' data-icon='check'>"+mapText("SET")+"</a>",n+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+i+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span>",n+="</div>"),n+="</div>"}function addHistorianDiagram(e,a,t,i,s){excludeFromRefresh.push(a.toString()),t||(s=!1,t=";;1D");var n="";""===resultOptionsMap.ccu_historian&&(s=!1,n=mapText("HISTORIAN_WARNING"));var r=t.split(";");3!==r.length&&(s=!1,r=["","","1D"]);var o="<div class='ui-field-contain"+(s?"":" ui-grid-a")+"'>";if(s)o+="<div id='chart_"+a+"' style='min-width: 100px;' ></div>",$.ajax({url:resultOptionsMap.ccu_historian+"/query/json.gy?i="+r[0]+"&d="+r[2],method:"GET",dataType:"JSONP",contentType:"application/json",jsonpCallback:"historian_callback",success:function(e){$("#chart_"+a).length?reloadHistorianChart(a,e):$("#"+dataList).one("create",function(){reloadHistorianChart(a,e)})},error:function(e,a){log("Request Historian chart failed: "+a,2)}});else{""!==n&&(o+="<div class='ui-block-g'>"+n+"</div>"),o+="<div class='ui-block-f'>CCU-Historian-ID</div>",o+="<div class='ui-block-g'>",o+="<input type='text' placeholder='18,19,20...' id='hisHistorianID_"+a+"' value=\""+r[0]+'" />',o+="</div>",o+="<div class='ui-block-f'>Homematic-ID</div>",o+="<div class='ui-block-g'>",o+="<input type='text' placeholder='8918,8919,8920...' id='hisHMID_"+a+"' value=\""+r[1]+'" />',o+="</div>",o+="<div class='ui-block-f'>"+mapText("HISTORIAN_DURATION")+"</div>",o+="<div class='ui-block-g'>",o+="<div data-role='controlgroup' data-type='horizontal'>";var l=r[2].slice(0,-1),d=r[2].substr(r[2].length-1);o+="<input type='number' min='1' max='100' id='hisDuration_"+a+"' value=\""+l+"\" data-wrapper-class='controlgroup-textinput ui-btn'/>",o+="<select id='hisSelector_"+a+"' data-theme='"+theme+"'>",o+="<option value='s' "+("s"===d?"selected='selected'":"")+">"+mapText("TIME_SEC_PLURAL")+"</option>",o+="<option value='m' "+("m"===d?"selected='selected'":"")+">"+mapText("TIME_MIN_PLURAL")+"</option>",o+="<option value='h' "+("h"===d?"selected='selected'":"")+">"+mapText("TIME_H_PLURAL")+"</option>",o+="<option value='D' "+("D"===d?"selected='selected'":"")+">"+mapText("TIME_DAY_PLURAL")+"</option>",o+="<option value='W' "+("W"===d?"selected='selected'":"")+">"+mapText("TIME_W_PLURAL")+"</option>",o+="<option value='M' "+("M"===d?"selected='selected'":"")+">"+mapText("TIME_MON_PLURAL")+"</option>",o+="<option value='Y' "+("Y"===d?"selected='selected'":"")+">"+mapText("TIME_Y_PLURAL")+"</option>",o+="</select>",o+="</div>",o+="</div>",o+="<div class='ui-block-f'>",o+="<a href='#' id='saveHistorianData_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' data-role='button' data-inline='true' data-icon='check'>"+mapText("SET")+"</a>",o+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+i+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span>",o+="</div>"}return o+="</div>"}function reloadHistorianChart(e,a){$.jqplot("chart_"+e,[a],{axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,tickRenderer:$.jqplot.CanvasAxisTickRenderer,tickOptions:{formatString:"%#d %b %#H:%M",angle:-60}}},series:[{lineWidth:1,markerOptions:{style:"square"}}],highlighter:{show:!0,sizeAdjust:5.5},cursor:{zoom:!0,show:!0},grid:{backgroundColor:"#F4F4F4"},animated:!0})}function addTuneInRadio(e,a,t,i,s){excludeFromRefresh.push(a.toString()),t&&t.startsWith("http")||(s=!1);var n="<div class='editButton'>";return n+="<a href='#' class='ui-btn ui-btn-inline ui-icon-"+(s?"edit":"eye")+" ui-btn-icon-notext ui-corner-all' name='"+(s?"edit":"show")+"TuneIn' data-id='"+a+"' data-val='"+t+"' data-parent-id='"+e+"' data-vor-date='"+i+"' />",n+="</div>",n+="<div class='ui-field-contain ui-grid-a' id='tuneInField_"+a+"'>",n+=s?getTuneIn(e,a,t,i):editTuneIn(e,a,t,i),n+="</div>"}function getTuneIn(e,a,t,i){if(!t||!t.startsWith("http"))return editTuneIn(e,a,t,i);var s="";s=t.indexOf("topicId")>-1?"t"+t.substr(t.lastIndexOf("=")+1,t.length):t.substr(t.lastIndexOf("-")+1,t.length),-1===s.indexOf("/")&&(s+="/");var n="100px";s.startsWith("p")?n="350px":s.startsWith("t")&&(n="110px");var r="<div class='ui-block-a'>";return r+="<iframe src='http://tunein.com/embed/player/"+s+"' style='width:100%;height:"+n+";' scrolling='no' frameborder='no'></iframe>",r+="</div>"}function editTuneIn(e,a,t,i){var s="<div class='ui-block-a'>TuneIn-URL</div>";return s+="<div class='ui-block-b'>",s+="<input type='text' placeholder='http://tunein.com/radio/Farstuff-The-Internet-of-Things-Podcast-p575427/' id='tuneInURL_"+a+"' value=\""+t+'" />',s+="</div>",s+="<div class='ui-block-a'>",s+="<a href='#' id='saveTuneInRadioData_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' data-value='"+t+"' data-role='button' data-inline='true' data-icon='check'>"+mapText("SET")+"</a>",s+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+i+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span>",s+="</div>"}function addColorPicker(e,a,t,i,s){var n="<div class='ui-field-contain'>";return n+="<input type='text' class='colorPicker' id='setValue_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' value=\""+t+"\" style='width:20em; display:inline-block;'/>",n+="<a href='#' id='setTextButton_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' "+(s?"data-role='button' data-inline='true' data-icon='check'":"class='ui-link ui-btn ui-icon-check ui-btn-icon-left ui-btn-inline ui-shadow ui-corner-all ui-state-disabled'")+">"+mapText("SET")+"</a>",n+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+i+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span>",n+="</div>",loadColorPicker=!0,n}function addDatePicker(e,a,t,i,s,n){var r="<div class='ui-field-contain'>";return r+="<input type='text' data-role='datebox' data-theme='"+theme+"' id='setValue_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' value=\""+t+"\" data-datebox-mode='"+n+"'/>",r+="<a href='#' id='setTextButton_"+a+"' data-parent-id='"+e+"' data-id='"+a+"' "+(s?"data-role='button' data-inline='true' data-icon='check'":"class='ui-link ui-btn ui-icon-check ui-btn-icon-left ui-btn-inline ui-shadow ui-corner-all ui-state-disabled'")+">"+mapText("SET")+"</a>",r+="<i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+i+"</i> <span id='info_"+a+"' class='valueOK valueOK-"+theme+"'></span>",r+="</div>"}function openOnlyPicDialog(e,a,t){$("#functionName").text(e),$("#functionContent").html(a),isDialog=!0,$(document.body).one("pagebeforeshow","#page1",function(){isDialog=!1,refreshPage(0)}),$.mobile.changePage("#dialog"),$("#dialog").enhanceWithin(),"function"==typeof t&&t()}function getDivisorSelectbox(e,a,t,i,s){var n=getMap(e),r="";r+="<select name='saveDivisor' data-type='"+e+"' data-key='"+e+"_divisor' data-id='"+t+"' data-theme='"+theme+"'>";var o=s&&s[e+"_divisor"];if(i){var l="unsorted"===a?mapText("UNSORTED"):n.divisors[a].name;r+="<option value=''"+(o?"":"selected='selected'")+">Global: "+l+"</option>"}else r+="<option value='unsorted'></option>";return $.each(n.divisors,function(t,n){$.isNumeric(t)&&(t=parseInt(t));var l=!1;l=i?o&&s[e+"_divisor"]===t:a===t,r+="<option value='"+t+"' "+(l?"selected='selected'":"")+">"+n.name+"</option>"}),r+="</select>"}function addDivisor(e,a){var t=getMap(a),i={};resultOptionsMap.default_sort_manually&&optionsMap[a+"_divisor"]&&(t=recalculatePositions(t,a,!0)),$.each(t.divisors,function(t,s){var n="<li id='list"+t+"' data-id='"+t+"'>";n+="<div class='ui-grid-b'>",n+="<div class='ui-block-a'>",n+="<input type='text' name='editName' data-id='"+t+"' data-type='"+a+"Divisor' value='"+s.name+"' />",n+="</div>",n+="<div class='ui-block-b'>",n+="<a href='#' name='deleteDivider' data-id='"+t+"' data-type='"+a+"Divisor' data-role='button' data-inline='true'>"+mapText("DELETE")+"</a>",n+="</div>",n+="<div class='ui-block-c'>",resultOptionsMap.default_sort_manually&&(n+="<div style='float: right;'>",n+="<input type='hidden' name='position' id='position"+t+"' data-id='"+t+"' data-type='"+a+"Divisor' value='"+s.position+"' data-last='"+(e===s.position)+"'/>",n+="<a href='#' class='ui-btn ui-btn-inline ui-icon-carat-u ui-btn-icon-notext ui-corner-all",s.position<=1&&(n+=" ui-state-disabled' style='display: none;"),n+="' name='setUp' id='setUp"+t+"' data-id='"+t+"' />",n+="<a href='#' class='ui-btn ui-btn-inline ui-icon-carat-d ui-btn-icon-notext ui-corner-all",s.position>=e&&(n+=" ui-state-disabled' style='display: none;"),n+="' name='setDown' id='setDown"+t+"' data-id='"+t+"' />",n+="</div>"),n+="</div>",n+="</div>",n+="</li>",resultOptionsMap.default_sort_manually?i[parseInt(s.position)]=n:i[s.name.toLowerCase()]=n});var s;s=resultOptionsMap.default_sort_manually?Object.keys(i).sort(function(e,a){return e-a}):Object.keys(i).sort();for(var n="",r=s.length,o=0;r>o;o++){var l=s[o];n+=i[l]}return n}function createClientMenuOptions(e){var a="";if(optionsMap[e+"_divisor"]){var t=getMap(e);a+="<div class='ui-block-divisor-top'>",a+=mapText("DIVIDE")+" "+mapText(e),a+="</div>",$.each(t.divisors,function(t,i){a+="<div class='ui-block-f text-right'>",a+="<span>"+i.name+" "+mapText("SHOW")+"</span>",a+="</div>",a+="<div class='ui-block-g'>",a+="<div data-role='controlgroup' data-type='horizontal'>";var s="",n="",r="";e+t in optionsClientMap?optionsClientMap[e+t]?n="class='ui-btn-active'":r="class='ui-btn-active'":s="class='ui-btn-active'",a+="<a href='#' name='saveClientOption' data-key='"+e+t+"' data-value='none' data-role='button' data-inline='true' "+s+">"+mapText("NOT_SELECTED")+"</a>",a+="<a href='#' name='saveClientOption' data-key='"+e+t+"' data-value='true' data-role='button' data-inline='true' "+n+">"+mapText("YES")+"</a>",a+="<a href='#' name='saveClientOption' data-key='"+e+t+"' data-value='false' data-role='button' data-inline='true' "+r+">"+mapText("NO")+"</a>",a+="</div>",a+="</div>"}),a+="<div class='ui-block-divisor-bottom'>",a+="</div>"}else{a+="<div class='ui-block-f text-right'>",a+="<span>"+mapText(e)+" "+mapText("SHOW")+"</span>",a+="</div>",a+="<div class='ui-block-g'>",a+="<div data-role='controlgroup' data-type='horizontal'>";var i="",s="",n="";e in optionsClientMap?optionsClientMap[e]?s="class='ui-btn-active'":n="class='ui-btn-active'":i="class='ui-btn-active'",a+="<a href='#' name='saveClientOption' data-key='"+e+"' data-value='none' data-role='button' data-inline='true' "+i+">"+mapText("NOT_SELECTED")+"</a>",a+="<a href='#' name='saveClientOption' data-key='"+e+"' data-value='true' data-role='button' data-inline='true' "+s+">"+mapText("YES")+"</a>",a+="<a href='#' name='saveClientOption' data-key='"+e+"' data-value='false' data-role='button' data-inline='true' "+n+">"+mapText("NO")+"</a>",a+="</div>",a+="</div>"}return a}function createGlobalMenuOptions(e){var a="";if(optionsMap[e+"_divisor"]){var t=getMap(e);a+="<div class='ui-block-divisor-top'>",a+=mapText("DIVIDE")+" "+mapText(e),a+="</div>",$.each(t.divisors,function(t,i){a+="<div class='ui-block-f text-right'>",a+="<span>"+i.name+" "+mapText("SHOW")+"</span>",a+="</div>",a+="<div class='ui-block-g'>",a+="<div data-role='controlgroup' data-type='horizontal'>";var s="",n="";optionsMap[e+t]?s="class='ui-btn-active'":n="class='ui-btn-active'",a+="<a href='#' name='saveGlobalOption' data-key='"+e+t+"' data-value='true' data-role='button' data-inline='true' "+s+">"+mapText("YES")+"</a>",a+="<a href='#' name='saveGlobalOption' data-key='"+e+t+"' data-value='false' data-role='button' data-inline='true' "+n+">"+mapText("NO")+"</a>",a+="</div>",a+="</div>"}),a+="<div class='ui-block-divisor-bottom'>",a+="</div>"}else{a+="<div class='ui-block-f text-right'>",a+="<span>"+mapText(e)+" "+mapText("SHOW")+"</span>",a+="</div>",a+="<div class='ui-block-g'>",a+="<div data-role='controlgroup' data-type='horizontal'>";var i="",s="";optionsMap[e]?i="class='ui-btn-active'":s="class='ui-btn-active'",a+="<a href='#' name='saveGlobalOption' data-key='"+e+"' data-value='true' data-role='button' data-inline='true' "+i+">"+mapText("YES")+"</a>",a+="<a href='#' name='saveGlobalOption' data-key='"+e+"' data-value='false' data-role='button' data-inline='true' "+s+">"+mapText("NO")+"</a>",a+="</div>",a+="</div>"}return a}function getSelectColapsedOptions(e,a){var t="";if(optionsMap[e+"_divisor"]){var i=getMap(e);$.each(i.divisors,function(i,s){t+="<option value='"+e+i+"' "+(a===e+i?"selected='selected'":"")+">"+s.name+"</option>"})}else t+="<option value='"+e+"' "+(a===e?"selected='selected'":"")+">"+mapText(e)+"</option>";return t}function changeTheme(e){$("body, .ui-popup-screen").removeClass(function(e,a){return(a.match(/(^|\s)ui-overlay-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("ui-overlay-"+e),$(".ui-page").removeClass(function(e,a){return(a.match(/(^|\s)ui-page-theme-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("ui-page-theme-"+e).attr("data-theme",e),$(".ui-header").removeClass(function(e,a){return(a.match(/(^|\s)ui-bar-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("ui-bar-"+e).attr("data-theme",e),$(".ui-content").removeClass(function(e,a){return(a.match(/(^|\s)ui-body-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("ui-body-"+e).attr("data-theme",e),$(".ui-collapsible-set, .ui-listview").removeClass(function(e,a){return(a.match(/(^|\s)ui-group-theme-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("ui-group-theme-"+e).attr("data-theme",e),$(".ui-btn").removeClass(function(e,a){return(a.match(/(^|\s)ui-btn-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("ui-btn-"+e).attr("data-theme",e),$(".valueNoError").removeClass(function(e,a){return(a.match(/(^|\s)valueNoError-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("valueNoError-"+e),$(".valueInfo").removeClass(function(e,a){return(a.match(/(^|\s)valueInfo-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("valueInfo-"+e),$(".valueWarning").removeClass(function(e,a){return(a.match(/(^|\s)valueWarning-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("valueWarning-"+e),$(".valueError").removeClass(function(e,a){return(a.match(/(^|\s)valueError-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("valueError-"+e),$(".valueOK").removeClass(function(e,a){return(a.match(/(^|\s)valueOK-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("valueOK-"+e),$(".buttonService, #popupDiv").filter(function(){return this.className.match(/\bvalueService-/)}).removeClass(function(e,a){return(a.match(/(^|\s)valueService-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("valueService-"+e),$("img").removeClass(function(e,a){return(a.match(/(^|\s)ui-img-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("ui-img-"+e),$(".control-set").removeClass(function(e,a){return(a.match(/(^|\s)control-set-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("control-set-"+e),$(".onlyPic-player").removeClass(function(e,a){return(a.match(/(^|\s)onlyPic-player-(\S{3}|\S{1})/g)||[]).join(" ")}).addClass("onlyPic-player-"+e),isGetSite||($("#page2").attr("data-theme",e),$("#page2").find("[data-theme]").attr("data-theme",e),$("#dialog").attr("data-theme",e),$("#dialog").find("[data-theme]").attr("data-theme",e)),theme=e}function changeMenuGfx(e){"small"===e&&($(".menu").removeClass("ui-li-thumb").addClass("ui-li-icon"),$(".ui-li-has-thumb").removeClass("ui-li-has-thumb").addClass("ui-li-has-icon"),$("#listFavorites").listview("refresh"),$("#listRooms").listview("refresh"),$("#listFunctions").listview("refresh"),$("#listOther").listview("refresh")),"large"===e&&($(".menu").removeClass("ui-li-icon").addClass("ui-li-thumb"),$(".ui-li-has-icon").removeClass("ui-li-has-icon").addClass("ui-li-has-thumb"),$("#listFavorites").listview("refresh"),$("#listRooms").listview("refresh"),$("#listFunctions").listview("refresh"),$("#listOther").listview("refresh")),gfxClass=e}function changeTwoPage(e){e?($("#prim").hide(),$("#second").removeClass("content-secondary").addClass("content-secondary-two-pages"),dataListHeader="dataListHeader2",dataList="dataList2",prim="prim2"):($("#prim").show(),$("#second").removeClass("content-secondary-two-pages").addClass("content-secondary"),dataListHeader="dataListHeader",dataList="dataList",prim="prim"),twoPage=e}function changeNumberOfColumns(e){e!==actColumn&&($("#dataList, #dataList2").removeClass(function(e,a){return(a.match(/(^|\s)column-(\d)/g)||[]).join(" ")}).addClass("column-"+e),actColumn=e)}function changeFont(e){var a="",t="";switch(e){case"a":t="sans-serif";break;case"b":t="KochFraktur",a="themes/fonts/KochFraktur/KochFraktur.ttf";break;case"c":t="PlanetBenson",a="themes/fonts/Planet_benson/planetbe.ttf";break;case"d":t="ActionMan",a="themes/fonts/Action_Man/Action_Man.ttf";break;case"e":t="Amadeus",a="themes/fonts/Amadeus/Amadeus.ttf";break;case"f":t="Vamp",a="themes/fonts/Vamp/RIKY2vamp.ttf";break;case"g":t="HennyPenny",a="themes/fonts/HennyPenny/HennyPenny-Regular.otf";break;case"h":t="Kavoon",a="themes/fonts/Anglican/AnglicanText.ttf";break;case"i":t="Nosifer",a="themes/fonts/Nosifer/NosiferCaps-Regular.ttf";break;case"j":t="Pacifico",a="themes/fonts/Pacifico/Pacifico.ttf";break;case"k":t="Sixties",a="themes/fonts/Sixties/Sixties.ttf";break;case"l":t="Crackman",a="themes/fonts/Crackman/CRACKMAN.ttf"}if(setFont=function(e){$("body, input, select, textarea, button, .ui-btn").css("font-family",e)},-1===$.inArray(e,loadedFont)){var i=new Font;i.onload=function(){setFont(t)},i.fontFamily=t,i.src=a}else setFont(t);loadedFont.push(e),font=e}function reloadDatePicCache(e,a){var t=getMap(e),i=new Date;t[a].picdate=i.getTime(),createOneMap(e),activateSettingSaveButton()}function calcHight(){var e=0,a=0,t=new Array,i=0,s=$(".dataListItem"),n=s.length,r=!1;s.each(function(s){var o=$(this);if(i=o.position().top,a!==i){for(var l=0;l<t.length;l++)t[l].height(e);if(i=o.position().top,t.length=0,a=i,e=o.height(),0===e)return r=!0,!1;t.push(o)}else t.push(o),e=e<o.height()?o.height():e;if(s===n-1)for(var l=0;l<t.length;l++)t[l].height(e)}),r&&setTimeout(function(){calcHight()},500)}function addUnsorted(e){var a={};a.name=mapText("UNSORTED"),a.position=999;var t=e.divisors;t.unsorted=a,e.divisors=t}function removeUnsorted(e){var a=e.divisors;delete a.unsorted,e.divisors=a}function recalculatePositions(e,a,t){var i={},s=0,n=0,r=t?e.divisors:e;if($.each(r,function(e,a){if("date"!==e&&"size"!==e&&"divisors"!==e){s++;var t=parseInt(a.position);t>n&&(n=t),i[t]=e}}),n!==s){var o;o=Object.keys(i).sort(function(e,a){return e-a});for(var l=o.length,d=0,u=0;l>u;u++){var c=o[u];d++,t?e.divisors[i[c]].position=d:(e.size=s,e[i[c]].position=d)}a=setMap(a,e),localStorage.setItem(isPreRelease+"webmatic"+a+"Map",JSON.stringify(getMap(a))),$.post("cgi/saveconfig.cgi",{name:a,text:JSON.stringify(getMap(a)),folder:userFolder})}return e}function setDraggable(e,a){$(".draggable").draggable({snap:"container"+a+e,containment:"container"+a+e,scroll:!1,opacity:.5,stack:".draggable",stop:function(e,a){}})}function getPicKey(e,a,t,i){var s=e;if("variables"===a){var n=unescape(t.value),r=t.valueType;if(i)"2"===r?s+="_true":"4"===r?s+="_"+t.valueMin:"16"===r&&(s+="_0");else if("4"===r){n=parseFloat(n);var o=$.grep(picturesList,function(a){var t=new RegExp("^"+e,"i");return a.trim().match(t)}),l=parseFloat(t.valueMin);"undefined"!=typeof o&&o.length>0&&$.each(o,function(e,a){var t=parseFloat(a.split("_")[1]);n>=t&&t>l&&(l=t)}),n=l,s+="_"+n}else"2"===r?s+="_"+("true"===n):"20"!==r&&(s+="_"+n)}return s}function getPicFloatList(e){var a=$.grep(picturesList,function(a){var t=new RegExp("^"+e,"i");return a.trim().match(t)}),t=[];return $.each(a,function(a,i){t.push(i.substr(e.length+1,i.length))}),t.sort(function(e,a){return parseFloat(e)-parseFloat(a)})}function createImgFloatList(e,a){var t=getPicFloatList(String(e)),i="<div data-role='controlgroup' id='imgFloatList"+e+"'>";return $.each(t,function(t,s){i+="<a href='#' id='imgFloat"+e+"_"+s+"' name='setImgFloat' data-id='"+e+"' data-val='"+s+"' class='ui-btn ui-mini ui-corner-all'>"+s*a+"</a>"}),i+="</div>"}function log(e,a,t){debugModus&&(0===a?console.info(e):1===a?console.warn(e):2===a?console.error(e):3===a?$("#errorsDebugger").length?$("#errorsDebugger").append("<li>"+t+": "+e+"</li>"):(alert(t+": "+e),errorsDebugger.push("<li>"+t+": "+e+"</li>")):console.log(e))}function getDateFromString(e){var a=e.substring(0,2),t=e.substring(3,5)-1,i=e.substring(6,10),s=e.substring(11,13),n=e.substring(14,16),r=e.substring(17,19);return new Date(i,t,a,s,n,r)}function getResultMap(e){switch(e){case"variables":return resultVariablesMap;case"programs":return resultProgramsMap;case"favorites":return resultFavoritesMap;case"rooms":return resultRoomsMap;case"functions":return resultFunctionsMap;case"devices":return resultDevicesMap}}function setResultMap(e,a){switch(e){case"variables":resultVariablesMap=a;break;case"programs":resultProgramsMap=a;break;case"favorites":resultFavoritesMap=a;break;case"rooms":resultRoomsMap=a;break;case"functions":resultFunctionsMap=a;break;case"devices":resultDevicesMap=a}}function getClientMap(e){switch(e){case"variables":return variablesClientMap;case"programs":return programsClientMap;case"favorites":return favoritesClientMap;case"rooms":return roomsClientMap;case"functions":return functionsClientMap;case"devices":return devicesClientMap;case"config":return optionsClientMap}}function setClientMap(e,a){switch(e){case"variables":variablesClientMap=a;break;case"programs":programsClientMap=a;break;case"favorites":favoritesClientMap=a;break;case"rooms":roomsClientMap=a;break;case"functions":functionsClientMap=a;break;case"devices":devicesClientMap=a}}function getMap(e){switch(e){case"variables":return variablesMap;case"programs":return programsMap;case"favorites":return favoritesMap;case"rooms":return roomsMap;case"functions":return functionsMap;case"devices":return devicesMap;case"config":return optionsMap}}function setMap(e,a){switch(e){case"variables":variablesMap=a;break;case"variablesDivisor":variablesMap.divisors=a,e="variables";break;case"programs":programsMap=a;break;case"programsDivisor":programsMap.divisors=a,e="programs";break;case"favorites":favoritesMap=a;break;case"favoritesDivisor":favoritesMap.divisors=a,e="favorites";break;case"rooms":roomsMap=a;break;case"roomsDivisor":roomsMap.divisors=a,e="rooms";break;case"functions":functionsMap=a;break;case"functionsDivisor":functionsMap.divisors=a,e="functions";break;case"devices":devicesMap=a;break;case"config":optionsMap=a}return e}function loadLocalStorageMap(e,a){switch(e){case"variables":variablesMap=JSON.parse(localStorage.getItem(isPreRelease+"webmatic"+e+"Map"));
break;case"programs":programsMap=JSON.parse(localStorage.getItem(isPreRelease+"webmatic"+e+"Map"));break;case"favorites":favoritesMap=JSON.parse(localStorage.getItem(isPreRelease+"webmatic"+e+"Map"));break;case"rooms":roomsMap=JSON.parse(localStorage.getItem(isPreRelease+"webmatic"+e+"Map"));break;case"functions":functionsMap=JSON.parse(localStorage.getItem(isPreRelease+"webmatic"+e+"Map"));break;case"devices":devicesMap=JSON.parse(localStorage.getItem(isPreRelease+"webmatic"+e+"Map"+a))}}function createOneMap(e,a,t){switch(e){case"config":$.each(optionsMap,function(e,a){e in optionsClientMap?resultOptionsMap[e]=optionsClientMap[e]:resultOptionsMap[e]=a}),a&&resultOptionsMap[a]===t&&checkAndChange(a,t);break;case"variables":$.each(variablesMap,function(e,a){if(e in variablesClientMap){var t={};$.each(a,function(a,i){a in variablesClientMap[e]?t[a]=variablesClientMap[e][a]:t[a]=i}),resultVariablesMap[e]=t}else resultVariablesMap[e]=a});break;case"programs":$.each(programsMap,function(e,a){if(e in programsClientMap){var t={};$.each(a,function(a,i){a in programsClientMap[e]?t[a]=programsClientMap[e][a]:t[a]=i}),resultProgramsMap[e]=t}else resultProgramsMap[e]=a});break;case"favorites":$.each(favoritesMap,function(e,a){if(e in favoritesClientMap){var t={};$.each(a,function(a,i){a in favoritesClientMap[e]?t[a]=favoritesClientMap[e][a]:t[a]=i}),resultFavoritesMap[e]=t}else resultFavoritesMap[e]=a});break;case"rooms":$.each(roomsMap,function(e,a){if(e in roomsClientMap){var t={};$.each(a,function(a,i){a in roomsClientMap[e]?t[a]=roomsClientMap[e][a]:t[a]=i}),resultRoomsMap[e]=t}else resultRoomsMap[e]=a});break;case"functions":$.each(functionsMap,function(e,a){if(e in functionsClientMap){var t={};$.each(a,function(a,i){a in functionsClientMap[e]?t[a]=functionsClientMap[e][a]:t[a]=i}),resultFunctionsMap[e]=t}else resultFunctionsMap[e]=a});break;case"devices":$.each(devicesMap,function(e,a){if(e in devicesClientMap){var t={};$.each(a,function(a,i){a in devicesClientMap[e]?t[a]=devicesClientMap[e][a]:t[a]=i}),resultDevicesMap[e]=t}else resultDevicesMap[e]=a})}}function isReadOnlyVariable(e){var a=e.indexOf("(");if(-1!==a){var t=e.indexOf(")",a);if(-1!==t){var i=e.substring(a+1,t),s=i.split(",");if(s.length>=1){var n=s[0].toLowerCase();if("r"===n)return!1;if("w"===n)return!0}}}return"none"}function checkOperate(e){return readModus?"none"===e?!(resultOptionsMap.systemvar_readonly&&readModus):e:!0}function isReadOnly(e){if(!readModus)return!1;var a="",t=[],i=e.indexOf("(");if(-1!==i){var s=e.indexOf(")",i);if(-1!==s){var n=e.substring(i+1,s);t=n.split(","),t.length>=1&&(a=t[0].toLowerCase())}}return"h"===a||"dk"===a||"d"===a||"g"===a?!1:resultOptionsMap.systemvar_readonly&&readModus?"w"!==a:"r"===a}function getTimeDiffString(e,a){var t,i=(getDateFromString(a)-getDateFromString(e))/1e3;return 0>i?"":60>i?(t=Math.floor(i+.5),"("+mapText("TIME_PREFIX")+" "+t+" "+(1===t?mapText("TIME_SEC_SINGULAR"):mapText("TIME_SEC_PLURAL"))+" "+mapText("TIME_SUFFIX")+")"):3600>i?(t=Math.floor(i/60+.5),"("+mapText("TIME_PREFIX")+" "+t+" "+(1===t?mapText("TIME_MIN_SINGULAR"):mapText("TIME_MIN_PLURAL"))+" "+mapText("TIME_SUFFIX")+")"):86400>i?(t=Math.floor(i/3600+.5),"("+mapText("TIME_PREFIX")+" "+t+" "+(1===t?mapText("TIME_H_SINGULAR"):mapText("TIME_H_PLURAL"))+" "+mapText("TIME_SUFFIX")+")"):2635200>i?(t=Math.floor(i/86400+.5),"("+mapText("TIME_PREFIX")+" "+t+" "+(1===t?mapText("TIME_DAY_SINGULAR"):mapText("TIME_DAY_PLURAL"))+" "+mapText("TIME_SUFFIX")+")"):31622400>i?(t=Math.floor(i/2635200+.5),"("+mapText("TIME_PREFIX")+" "+t+" "+(1===t?mapText("TIME_MON_SINGULAR"):mapText("TIME_MON_PLURAL"))+" "+mapText("TIME_SUFFIX")+")"):(t=Math.floor(i/31622400+.5),40>t?"("+mapText("TIME_PREFIX")+" "+t+" "+(1===t?mapText("TIME_Y_SINGULAR"):mapText("TIME_Y_PLURAL"))+" "+mapText("TIME_SUFFIX")+")":"")}function checkAndChange(e,a){"default_theme"===e&&a!==theme?changeTheme(a):"default_font"===e&&a!==font?changeFont(a):"default_menugfxsize"===e&&a!==gfxClass?changeMenuGfx(a):"two_sites"===e&&a!==twoPage?changeTwoPage(a):"columns"===e?changeNumberOfColumns(a):("favorites"===e||"rooms"===e||"functions"===e||"variables"===e||"programs"===e||"others"===e)&&(a&&$("#"+e+"MainMenu").is(":hidden")?$("#"+e+"MainMenu").fadeIn():a||$("#"+e+"MainMenu").is(":hidden")||$("#"+e+"MainMenu").fadeOut())}var webmaticVersion="0",isPreRelease=1,lastStableVersion="0",newWebmaticVersion=webmaticVersion,storageVersion=30,wmLang="de",userFolder="webmatic_user";1===isPreRelease&&(userFolder="wmalpha_user");var debugModus=!0,testSite=!1,lastClickType=-1,oldID=-1,lastClickID=-1,divisorClick=!1,readModus=!1,prevItem=0,saveDataToFile=!1,newVersion=!1,mustBeSaved=!1,mustReload=!1,isGetSite=!1,client="",isTempClient=!1,clientsList={},reloadClient=!1,loadColorPicker=!1,picturesList=[],picturesListError=!1,changeGlobal=!1,changeClient=!1,excludeFromRefresh=[],tempExcludeFromRefresh=0,specialTextVariables=["HTML","COLOR","DATE","TIME","HISTORIAN","TUNEIN"],specialTextVariablesOnlypic=["COLOR","DATE","TIME"],programsMap,functionsMap,roomsMap,favoritesMap,variablesMap,optionsMap,devicesMap,recognizeMap,programsClientMap={},functionsClientMap={},roomsClientMap={},favoritesClientMap={},optionsClientMap={},variablesClientMap={},devicesClientMap={},resultProgramsMap={},resultFunctionsMap={},resultRoomsMap={},resultFavoritesMap={},resultVariablesMap={},resultOptionsMap={},resultDevicesMap={},theme,font,gfxClass,loadedFont=["a"],actColumn=1,lastTime=-1,isDialog=!1,twoPage,dataListHeader="dataListHeader",dataList="dataList",prim="prim2",page2=!1,today=new Date,dateNow=(today.getDate()<10?"0"+today.getDate():today.getDate())+"."+(today.getMonth()+1<10?"0"+today.getMonth()+1:today.getMonth()+1)+"."+today.getFullYear();"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e,a){return a=a||0,this.indexOf(e,a)===a}),"function"!=typeof String.prototype.trim&&!function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}(),Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},$.extend({keys:function(e){var a=[];return $.each(e,function(e){a.push(e)}),a}}),window.addEventListener("load",function(){window.applicationCache.addEventListener("updateready",function(){window.applicationCache.status===window.applicationCache.UPDATEREADY&&(window.applicationCache.swapCache(),window.location.reload(!0))},!1)},!1);var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var a,t,i,s,n,r,o,l="",d=0;for(e=Base64._utf8_encode(e);d<e.length;)a=e.charCodeAt(d++),t=e.charCodeAt(d++),i=e.charCodeAt(d++),s=a>>2,n=(3&a)<<4|t>>4,r=(15&t)<<2|i>>6,o=63&i,isNaN(t)?r=o=64:isNaN(i)&&(o=64),l=l+this._keyStr.charAt(s)+this._keyStr.charAt(n)+this._keyStr.charAt(r)+this._keyStr.charAt(o);return l},decode:function(e){var a,t,i,s,n,r,o,l="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)s=this._keyStr.indexOf(e.charAt(d++)),n=this._keyStr.indexOf(e.charAt(d++)),r=this._keyStr.indexOf(e.charAt(d++)),o=this._keyStr.indexOf(e.charAt(d++)),a=s<<2|n>>4,t=(15&n)<<4|r>>2,i=(3&r)<<6|o,l+=String.fromCharCode(a),64!==r&&(l+=String.fromCharCode(t)),64!==o&&(l+=String.fromCharCode(i));return l=Base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var a="",t=0;t<e.length;t++){var i=e.charCodeAt(t);128>i?a+=String.fromCharCode(i):i>127&&2048>i?(a+=String.fromCharCode(i>>6|192),a+=String.fromCharCode(63&i|128)):(a+=String.fromCharCode(i>>12|224),a+=String.fromCharCode(i>>6&63|128),a+=String.fromCharCode(63&i|128))}return a},_utf8_decode:function(e){for(var a="",t=0,i=c1=c2=0;t<e.length;)i=e.charCodeAt(t),128>i?(a+=String.fromCharCode(i),t++):i>191&&224>i?(c2=e.charCodeAt(t+1),a+=String.fromCharCode((31&i)<<6|63&c2),t+=2):(c2=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),a+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),t+=3);return a}};