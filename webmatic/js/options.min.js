function activateSettingChangedButton(e){$(".reload-button-text").text(mapText("RELOAD_CCU_CHANGES")+": "+mapText(e)),$('[name="reloadCCUChanges"]').addClass("middle-button-is-visible").removeClass("ui-state-disabled")}function activateSettingSaveButton(e,a){mustBeSaved=!0,!mustReload&&e&&(mustReload=!0,$(".save-button-text").text(mapText("SAVE_AND_RELOAD")),$(".save-button-text").removeClass("ui-icon-check").addClass("ui-icon-refresh")),a?changeClient=!0:changeGlobal=!0,$('[name="saveAllChanges"]').addClass("middle-button-is-visible").removeClass("ui-state-disabled")}function saveOptionsToServer(e,a,t){localStorage.setItem(isPreRelease+"webmaticoptionsMap",JSON.stringify(optionsMap)),$.post("cgi/saveconfig.cgi",{name:"config",text:JSON.stringify(optionsMap),folder:userFolder}).done(function(){t&&location.reload(!0)}),createOneMap("config",e,a)}function saveClientOptionsToServer(e,a){localStorage.setItem(isPreRelease+"webmaticoptionsclientMap",JSON.stringify(optionsClientMap)),""!==client&&$.post("cgi/saveconfig.cgi",{name:"config"+client,text:JSON.stringify(optionsClientMap),folder:userFolder}),e&&checkAndChange(e,a)}function saveAllDatasToServer(){changeGlobal&&(localStorage.setItem(isPreRelease+"webmaticfavoritesMap",JSON.stringify(favoritesMap)),localStorage.setItem(isPreRelease+"webmaticroomsMap",JSON.stringify(roomsMap)),localStorage.setItem(isPreRelease+"webmaticfunctionsMap",JSON.stringify(functionsMap)),localStorage.setItem(isPreRelease+"webmaticprogramsMap",JSON.stringify(programsMap)),localStorage.setItem(isPreRelease+"webmaticvariablesMap",JSON.stringify(variablesMap)),$.post("cgi/saveconfig.cgi",{name:"favorites",text:JSON.stringify(favoritesMap),folder:userFolder}),$.post("cgi/saveconfig.cgi",{name:"rooms",text:JSON.stringify(roomsMap),folder:userFolder}),$.post("cgi/saveconfig.cgi",{name:"functions",text:JSON.stringify(functionsMap),folder:userFolder}),$.post("cgi/saveconfig.cgi",{name:"programs",text:JSON.stringify(programsMap),folder:userFolder}),$.post("cgi/saveconfig.cgi",{name:"variables",text:JSON.stringify(variablesMap),folder:userFolder})),changeClient&&(localStorage.setItem(isPreRelease+"webmaticfavoritesclientMap",JSON.stringify(favoritesClientMap)),localStorage.setItem(isPreRelease+"webmaticroomsclientMap",JSON.stringify(roomsClientMap)),localStorage.setItem(isPreRelease+"webmaticfunctionsclientMap",JSON.stringify(functionsClientMap)),localStorage.setItem(isPreRelease+"webmaticprogramsclientMap",JSON.stringify(programsClientMap)),localStorage.setItem(isPreRelease+"webmaticvariablesclientMap",JSON.stringify(variablesClientMap)),$.post("cgi/saveconfig.cgi",{name:"favorites"+client,text:JSON.stringify(favoritesClientMap),folder:userFolder}),$.post("cgi/saveconfig.cgi",{name:"rooms"+client,text:JSON.stringify(roomsClientMap),folder:userFolder}),$.post("cgi/saveconfig.cgi",{name:"functions"+client,text:JSON.stringify(functionsClientMap),folder:userFolder}),$.post("cgi/saveconfig.cgi",{name:"programs"+client,text:JSON.stringify(programsClientMap),folder:userFolder}),$.post("cgi/saveconfig.cgi",{name:"variables"+client,text:JSON.stringify(variablesClientMap),folder:userFolder})),Object.keys(clientsList).forEach(function(e){e!==client&&$.post("cgi/saveconfig.cgi",{name:"reload"+e,text:"true",folder:userFolder})}),mustReload&&location.reload(!0),mustBeSaved=!1,changeClient=!1,changeGlobal=!1,$('[name="saveAllChanges"]').removeClass("middle-button-is-visible").addClass("ui-state-disabled")}function createExecutationField(e,a){var t=a.valueType,i=a.valueUnit;return"2"===t?addSetBoolButtonList(0,e,"false",a.valueName0,a.valueName1,i,"",!1,!0,!0):"4"===t?addSetNumber(0,e,parseFloat(a.valueMin),i,parseFloat(a.valueMin),parseFloat(a.valueMax),a.step?a.step:1,a.faktor?a.faktor:1,"",!1,!0,!0):"16"===t?addSetValueList(0,e,"0",a.valueList,i,"",!1,!0,a.listType,!0):void 0}function loadOptions(){$("#"+dataList).empty(),$("#"+dataListHeader).empty(),$("#"+dataListHeader).append("<li data-role='list-divider' role='heading'>"+mapText("OPTIONS")+"</li>"),$("#"+dataList).append(processOptionsGlobalTheme()),$("#"+dataList).append(processOptionsGlobalAnzeige()),$("#"+dataList).append(processOptionsGlobalVariables()),$("#"+dataList).append(processOptionsGlobalClients()),$("#"+dataList).append(processOptionsGlobalHistorian()),$("#"+dataList).append(processOptionsGlobalOthers()),$("#"+dataListHeader).listview("refresh"),$("#"+dataList).listview("refresh"),$("#"+dataList).fadeIn().enhanceWithin().trigger("fertig")}function loadOptionsClient(){$("#"+dataList).empty(),$("#"+dataListHeader).empty(),$("#"+dataListHeader).append("<li data-role='list-divider' role='heading'>"+mapText("OPTIONS_CLIENT")+" ("+clientsList[client]+")</li>"),isTempClient&&$("#"+dataList).append("<li sytle='text-align:center;'><a href='#' data-role='button' data-inline='true' onclick='location.reload(true);' data-icon='refresh'>"+mapText("END_CLIENT_MODUS")+"</a></li>"),$("#"+dataList).append(processOptionsClientTheme()),$("#"+dataList).append(processOptionsClientAnzeige()),$("#"+dataList).append(processOptionsClientVariables()),$("#"+dataListHeader).listview("refresh"),$("#"+dataList).listview("refresh"),$("#"+dataList).fadeIn().enhanceWithin().trigger("fertig")}function loadGraphicIDs(e,a){$("#"+dataList).empty(),$("#"+dataListHeader).empty(),$("#"+dataListHeader).append("<li><img src='img/misc/wait16.gif' width=12px height=12px class='ui-li-icon ui-img-"+theme+"'>"+mapText("LOADING")+"...</li>").listview("refresh"),$(".buttonRefresh .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>"),null===localStorage.getItem(isPreRelease+"webmatic"+e+"Map")||"undefined"===localStorage.getItem(isPreRelease+"webmatic"+e+"Map")?(newVersion&&(saveDataToFile=!0),loadConfigData(!1,"../"+userFolder+"/"+e+".json",e,"webmatic"+e+"Map",!1,!1)):loadLocalStorageMap(e),null===localStorage.getItem(isPreRelease+"webmatic"+e+"clientMap")||"undefined"===localStorage.getItem(isPreRelease+"webmatic"+e+"clientMap")?""!==client&&loadConfigData(!1,"../"+userFolder+"/"+e+client+".json",e+"Client","webmatic"+e+"clientMap",!1,!0):setClientMap(e,JSON.parse(localStorage.getItem(isPreRelease+"webmatic"+e+"clientMap"))),createOneMap(e),loadConfigData(!0,"cgi/"+e+".cgi",e,"webmatic"+e+"Map",!1,!0,function(){createOneMap(e)});var t="<li data-role='list-divider' role='heading'>";t+=a?"<div style='float:left;'>"+mapText(e)+" ("+mapText("NOT_SELECTED")+")</div>":"<div style='float:left;'>"+mapText(e)+" ("+clientsList[client]+")</div>",""!==client&&(t+="<div style='float:right;'>",t+="<a href='#' class='ui-btn ui-btn-inline ui-corner-all' name='changeGraphicIDEditModus' data-type='"+e+"' data-global='"+a+"'>"+(a?clientsList[client]:mapText("NOT_SELECTED"))+"</a>",t+="</div>"),t+="</li>",$("#"+dataList).append(t),a?processGraphicIDGlobal(e):processGraphicIDClient(e),$("#"+dataList).listview("refresh"),$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"}),$("img").trigger("lazyLoadInstantly"),$("#"+dataListHeader).empty(),$("#"+dataListHeader).append("<li data-role='list-divider' role='heading'>"+mapText("EDIT")+"</li>"),$("#"+dataListHeader).listview("refresh"),$(".buttonRefresh .ui-btn-text").html("&nbsp;"),$("#"+dataList).listview("refresh"),$("#"+dataList).fadeIn().enhanceWithin().trigger("fertig")}function processOptionsGlobalTheme(){var e="<li><h1>"+mapText("CHOOSE_THEME")+"</h1>";e+="<div class='ui-field-contain'>",e+="<div class='ui-grid-b'>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DESIGN")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='global_default_theme' data-theme='"+theme+"'>";var a=optionsMap.default_theme;e+="<option value='wma' "+("wma"===a?"selected='selected'":"")+">"+mapText("DEFAULT")+"</option>",e+="<option value='wmb' "+("wmb"===a?"selected='selected'":"")+">"+mapText("BLACK")+"</option>",e+="<option value='wmc' "+("wmc"===a?"selected='selected'":"")+">"+mapText("PINK")+"</option>",e+="<option value='wmd' "+("wmd"===a?"selected='selected'":"")+">"+mapText("GREEN")+"</option>",e+="<option value='wme' "+("wme"===a?"selected='selected'":"")+">"+mapText("YELLOW")+"</option>",e+="<option value='wmf' "+("wmf"===a?"selected='selected'":"")+">"+mapText("GREY")+"</option>",e+="<option value='wmg' "+("wmg"===a?"selected='selected'":"")+">"+mapText("BLUE")+"</option>",e+="<option value='wmh' "+("wmh"===a?"selected='selected'":"")+">"+mapText("RED")+"</option>",e+="<option value='wmi' "+("wmi"===a?"selected='selected'":"")+">"+mapText("BROWN")+"</option>",e+="<option value='wmj' "+("wmj"===a?"selected='selected'":"")+">"+mapText("WHITE")+"</option>",e+="<option value='wmk' "+("wmk"===a?"selected='selected'":"")+">"+mapText("BRAZIL")+"</option>",e+="<option value='wml' "+("wml"===a?"selected='selected'":"")+">"+mapText("GERMANY")+"</option>",e+="</select>",e+="<a href='#' name='saveGlobalOption' data-key='default_theme' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("FONT")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='global_default_font' data-theme='"+theme+"'>";var t=optionsMap.default_font;e+="<option value='a' "+("a"===t?"selected='selected'":"")+">Normal</option>",e+="<option value='b' "+("b"===t?"selected='selected'":"")+">Koch Fraktur</option>",e+="<option value='c' "+("c"===t?"selected='selected'":"")+">Planet Benson</option>",e+="<option value='d' "+("d"===t?"selected='selected'":"")+">Action Man</option>",e+="<option value='e' "+("e"===t?"selected='selected'":"")+">Amadeus</option>",e+="<option value='f' "+("f"===t?"selected='selected'":"")+">Vamp</option>",e+="<option value='g' "+("g"===t?"selected='selected'":"")+">HennyPenny</option>",e+="<option value='h' "+("h"===t?"selected='selected'":"")+">Anglican</option>",e+="<option value='i' "+("i"===t?"selected='selected'":"")+">Nosifer</option>",e+="<option value='j' "+("j"===t?"selected='selected'":"")+">Pacifico</option>",e+="<option value='k' "+("k"===t?"selected='selected'":"")+">Sixties</option>",e+="<option value='l' "+("l"===t?"selected='selected'":"")+">Crackman</option>",e+="</select>",e+="<a href='#' name='saveGlobalOption' data-key='default_font' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("LANGUAGE")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='change_lang' data-theme='"+theme+"'>",e+="<option value='de' "+("de"===wmLang?"selected='selected'":"")+">"+mapText("DE")+"</option>",e+="<option value='en' "+("en"===wmLang?"selected='selected'":"")+">"+mapText("EN")+"</option>",e+="<option value='es' "+("es"===wmLang?"selected='selected'":"")+">"+mapText("ES")+"</option>",e+="<option value='fr' "+("fr"===wmLang?"selected='selected'":"")+">"+mapText("FR")+"</option>",e+="<option value='pt' "+("pt"===wmLang?"selected='selected'":"")+">"+mapText("PT")+"</option>",e+="<option value='ru' "+("ru"===wmLang?"selected='selected'":"")+">"+mapText("RU")+"</option>",e+="<option value='tr' "+("tr"===wmLang?"selected='selected'":"")+">"+mapText("TR")+"</option>",e+="<option value='zh' "+("zh"===wmLang?"selected='selected'":"")+">"+mapText("ZH")+"</option>",e+="</select>",e+="<a href='#' name='change_lang' data-role='button' data-inline='true' data-icon='refresh'>"+mapText("RELOAD")+"</a>",e+="</div>",e+="<a href='http://homematic-forum.de/forum/viewtopic.php?f=39&t=28751' target='_blank' class='ui-btn ui-btn-inline ui-icon-info ui-btn-icon-notext ui-corner-all' />",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("GRAPHICS_SIZE")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var i=optionsMap.default_menugfxsize,o="",s="";"small"===i?o="class='ui-btn-active'":s="class='ui-btn-active'",e+="<a href='#' name='saveGlobalOption' data-key='default_menugfxsize' data-value='small' data-role='button' data-inline='true' "+o+">"+mapText("SMALL")+"</a>",e+="<a href='#' name='saveGlobalOption' data-key='default_menugfxsize' data-value='large' data-role='button' data-inline='true' "+s+">"+mapText("BIG")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("TWO_SITES_VERSION")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var o="",s="",n=optionsMap.two_sites;n?o="class='ui-btn-active'":s="class='ui-btn-active'",e+="<a href='#' name='saveGlobalOption' data-key='two_sites' data-value='true' data-role='button' data-inline='true' "+o+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveGlobalOption' data-key='two_sites' data-value='false' data-role='button' data-inline='true' "+s+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="<div name='globalTwoSitesTransitionDiv' class='ui-block-f text-right' "+(n?"":"style='display: none;'")+">",e+="<span>"+mapText("TWO_SITES_TRANSITION")+"</span>",e+="</div>",e+="<div name='globalTwoSitesTransitionDiv' class='ui-block-g' "+(n?"":"style='display: none;'")+">",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='global_transition' data-theme='"+theme+"'>";var l=optionsMap.transition;e+="<option value='flip' "+("flip"===l?"selected='selected'":"")+">flip</option>",e+="<option value='slide' "+("slide"===l?"selected='selected'":"")+">slide</option>",e+="<option value='slideup' "+("slideup"===l?"selected='selected'":"")+">slideup</option>",e+="<option value='slidedown' "+("slidedown"===l?"selected='selected'":"")+">slidedown</option>",e+="<option value='pop' "+("pop"===l?"selected='selected'":"")+">pop</option>",e+="<option value='fade' "+("fade"===l?"selected='selected'":"")+">fade</option>",e+="</select>",e+="<a href='#' name='saveGlobalOption' data-key='transition' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("NUMBER_OF_COLUMNS")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='global_columns' data-theme='"+theme+"'>";var d=optionsMap.columns;return e+="<option value='1' "+(1===d?"selected='selected'":"")+">1</option>",e+="<option value='2' "+(2===d?"selected='selected'":"")+">2</option>",e+="<option value='3' "+(3===d?"selected='selected'":"")+">3</option>",e+="<option value='4' "+(4===d?"selected='selected'":"")+">4</option>",e+="<option value='5' "+(5===d?"selected='selected'":"")+">auto</option>",e+="</select>",e+="<a href='#' name='saveGlobalOption' data-key='columns' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="</div></div></li>"}function processOptionsGlobalAnzeige(){var e="<li><h1>"+mapText("MENU")+"</h1>";e+="<div class='ui-field-contain'>",e+="<div class='ui-grid-b'>",e+=createGlobalMenuOptions("favorites"),e+=createGlobalMenuOptions("rooms"),e+=createGlobalMenuOptions("functions"),e+=createGlobalMenuOptions("variables"),e+=createGlobalMenuOptions("programs"),e+="<div class='ui-block-f text-right'>",e+="<span style='color: red;'>"+mapText("SETTINGS")+" "+mapText("SHOW")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var a="class='"+(optionsMap.others?"ui-btn-active":"")+(0===optionsMap.no_more_settings?" ui-state-disabled":"")+"'",t="class='"+(optionsMap.others?"":"ui-btn-active")+(0===optionsMap.no_more_settings?" ui-state-disabled":"")+"'";e+="<a href='#' name='saveGlobalOption' data-key='others' data-value='true' data-role='button' data-inline='true' "+a+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveGlobalOption' data-key='others' data-value='false' data-role='button' data-inline='true' "+t+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DEFAULT_OPEN")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='global_collapsed' data-theme='"+theme+"'>";var i=optionsMap.collapsed;return e+=getSelectColapsedOptions("favorites",i),e+=getSelectColapsedOptions("rooms",i),e+=getSelectColapsedOptions("functions",i),e+=getSelectColapsedOptions("variables",i),e+=getSelectColapsedOptions("programs",i),e+="<option value='others' "+("others"===i?"selected='selected'":"")+">"+mapText("SETTINGS")+"</option>",e+="</select>",e+="<a href='#' name='saveGlobalOption' data-key='collapsed' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DEFAULT_SORT")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",a="",t="",optionsMap.default_sort_manually?a="class='ui-btn-active'":t="class='ui-btn-active'",e+="<a href='#' name='saveGlobalOption' data-key='default_sort_manually' data-reload='true' data-value='true' data-role='button' data-icon='refresh' data-inline='true' "+a+">"+mapText("MANUALLY")+"</a>",e+="<a href='#' name='saveGlobalOption' data-key='default_sort_manually' data-reload='true' data-value='false' data-role='button' data-icon='refresh' data-inline='true' "+t+">"+mapText("ALPHABETICAL")+"</a>",e+="</div>",e+="</div>",e+="</div></div></li>"}function processOptionsGlobalVariables(){var e="<li><h1>"+mapText("WORKSPACE")+"</h1>";e+="<div class='ui-field-contain'>",e+="<div class='ui-grid-b'>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DEFAULT_READONLY")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var a="",t="";optionsMap.systemvar_readonly?a="class='ui-btn-active'":t="class='ui-btn-active'",e+="<a href='#' name='saveGlobalOption' data-key='systemvar_readonly' data-value='true' data-role='button' data-inline='true' "+a+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveGlobalOption' data-key='systemvar_readonly' data-value='false' data-role='button' data-inline='true' "+t+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("SHOW_DESCRIPTION")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var a="",t="";optionsMap.show_description?a="class='ui-btn-active'":t="class='ui-btn-active'",e+="<a href='#' name='saveGlobalOption' data-key='show_description' data-value='true' data-role='button' data-inline='true' "+a+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveGlobalOption' data-key='show_description' data-value='false' data-role='button' data-inline='true' "+t+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("SHOW_LAST_TIME_USED")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var a="",t="";return optionsMap.show_lastUsedTime?a="class='ui-btn-active'":t="class='ui-btn-active'",e+="<a href='#' name='saveGlobalOption' data-key='show_lastUsedTime' data-value='true' data-role='button' data-inline='true' "+a+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveGlobalOption' data-key='show_lastUsedTime' data-value='false' data-role='button' data-inline='true' "+t+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="</div></div></li>"}function processOptionsGlobalClients(){var e="";return Object.keys(clientsList).length>1&&(e="<li><h1>Clients</h1>",e+="<div class='ui-field-contain'>",e+="<div class='ui-grid-b'>",$.each(clientsList,function(a,t){e+="<div class='ui-block-a text-right' name='title_client_div_"+a.replace(/\./g,"_")+"'>",e+="<span>"+mapText("CLIENT_TITLE")+": "+a+"</span>",e+="</div>",e+="<div class='ui-block-b' name='title_client_div_"+a.replace(/\./g,"_")+"'>",e+="<input type='text' id='title_client_"+a.replace(/\./g,"_")+"' value='"+t+"' />",e+="</div>",e+="<div class='ui-block-c' name='title_client_div_"+a.replace(/\./g,"_")+"'>",e+="<a href='#' name='title_client' data-key='"+a+"' data-role='button' data-inline='true'>"+mapText("SAVE")+"</a>",e+="</div>"}),e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("CLIENT_SETTINGS")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='choose_tmp_client' data-theme='"+theme+"'>",e+="<option value=''>"+mapText("CHOOSE")+"</option>",$.each(clientsList,function(a,t){e+="<option value='"+a+"' "+(client===a?"selected='selected'":"")+">"+t+"</option>"}),e+="</select>",e+="<a href='#' name='choose_tmp_client' data-role='button' data-inline='true' data-icon='refresh'>"+mapText("RELOAD")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DELETE_SETTINGS")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='delete_client' data-theme='"+theme+"'>",e+="<option value=''>"+mapText("CHOOSE")+"</option>",$.each(clientsList,function(a,t){e+="<option value='"+a+"'>"+t+"</option>"}),e+="</select>",e+="<a href='#' name='delete_client' data-role='button' data-inline='true' data-icon='delete'>"+mapText("DELETE")+"</a>",e+="</div>",e+="</div>",e+="</div></div></li>"),e}function processOptionsGlobalHistorian(){var e="<li><h1>CCU-Historian</h1>";return e+="<p>&nbsp;</p>",e+="<div class='ui-field-contain'>",e+="<div class='editButton'>",e+="<a href='http://homematic-forum.de/forum/viewtopic.php?f=39&t=28274' target='_blank' class='ui-btn ui-btn-inline ui-icon-info ui-btn-icon-notext ui-corner-all' />",e+="</div>",e+="<div class='ui-grid-b'>",e+="<div class='ui-block-a text-right'>",e+="CCU-Historian Link",e+="</div>",e+="<div class='ui-block-b'>",e+="<input type='text' id='global_ccu_historian' value='"+optionsMap.ccu_historian+"' placeholder='http://192.168.xx.xxx' />",e+="</div>",e+="<div class='ui-block-c'>",e+="/historian/index.html ",e+="<a href='#' name='saveGlobalOption' data-key='ccu_historian' data-role='button' data-inline='true'>"+mapText("SAVE")+"</a>",e+="</div>",e+="</div></div></li>"}function processOptionsGlobalOthers(){var e="<li><h1>"+mapText("OTHERS")+"</h1>";e+="<div class='ui-field-contain'>",e+="<div class='ui-grid-b'>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("NEW_UPDATES_WARNING")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='global_new_version' data-theme='"+theme+"'>";var a=optionsMap.new_version;e+="<option value='no'>"+mapText("NO")+"</option>",e+="<option value='stable' "+("stable"===a?"selected='selected'":"")+">"+mapText("STABLE")+"</option>",e+="<option value='alpha' "+("alpha"===a?"selected='selected'":"")+">"+mapText("ALPHA")+"</option>",e+="</select>",e+="<a href='#' name='saveGlobalOption' data-key='new_version' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DONT_LEAVE")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var t="",i="";return optionsMap.dont_leave?t="class='ui-btn-active'":i="class='ui-btn-active'",e+="<a href='#' name='saveGlobalOption' data-key='dont_leave' data-value='true' data-role='button' data-inline='true' "+t+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveGlobalOption' data-key='dont_leave' data-value='false' data-role='button' data-inline='true' "+i+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="</div></div></li>"}function processOptionsClientTheme(){var e="<li><h1>"+mapText("CHOOSE_THEME")+"</h1>";e+="<div class='ui-field-contain'>",e+="<div class='ui-grid-b'>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DESIGN")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='client_default_theme' data-theme='"+theme+"'>";var a=optionsClientMap.default_theme;e+="<option value='none'>"+mapText("NOT_SELECTED")+"</option>",e+="<option value='wma' "+("wma"===a?"selected='selected'":"")+">"+mapText("DEFAULT")+"</option>",e+="<option value='wmb' "+("wmb"===a?"selected='selected'":"")+">"+mapText("BLACK")+"</option>",e+="<option value='wmc' "+("wmc"===a?"selected='selected'":"")+">"+mapText("PINK")+"</option>",e+="<option value='wmd' "+("wmd"===a?"selected='selected'":"")+">"+mapText("GREEN")+"</option>",e+="<option value='wme' "+("wme"===a?"selected='selected'":"")+">"+mapText("YELLOW")+"</option>",e+="<option value='wmf' "+("wmf"===a?"selected='selected'":"")+">"+mapText("GREY")+"</option>",e+="<option value='wmg' "+("wmg"===a?"selected='selected'":"")+">"+mapText("BLUE")+"</option>",e+="<option value='wmh' "+("wmh"===a?"selected='selected'":"")+">"+mapText("RED")+"</option>",e+="<option value='wmi' "+("wmi"===a?"selected='selected'":"")+">"+mapText("BROWN")+"</option>",e+="<option value='wmj' "+("wmj"===a?"selected='selected'":"")+">"+mapText("WHITE")+"</option>",e+="<option value='wmk' "+("wmk"===a?"selected='selected'":"")+">"+mapText("BRAZIL")+"</option>",e+="<option value='wml' "+("wml"===a?"selected='selected'":"")+">"+mapText("GERMANY")+"</option>",e+="</select>",e+="<a href='#' name='saveClientOption' data-key='default_theme' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("FONT")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='client_default_font' data-theme='"+theme+"'>";var t=optionsClientMap.default_font;e+="<option value='none'>"+mapText("NOT_SELECTED")+"</option>",e+="<option value='a' "+("a"===t?"selected='selected'":"")+">Normal</option>",e+="<option value='b' "+("b"===t?"selected='selected'":"")+">Koch Fraktur</option>",e+="<option value='c' "+("c"===t?"selected='selected'":"")+">Planet Benson</option>",e+="<option value='d' "+("d"===t?"selected='selected'":"")+">Action Man</option>",e+="<option value='e' "+("e"===t?"selected='selected'":"")+">Amadeus</option>",e+="<option value='f' "+("f"===t?"selected='selected'":"")+">Vamp</option>",e+="<option value='g' "+("g"===t?"selected='selected'":"")+">HennyPenny</option>",e+="<option value='h' "+("h"===t?"selected='selected'":"")+">Anglican</option>",e+="<option value='i' "+("i"===t?"selected='selected'":"")+">Nosifer</option>",e+="<option value='j' "+("j"===t?"selected='selected'":"")+">Pacifico</option>",e+="<option value='k' "+("k"===t?"selected='selected'":"")+">Sixties</option>",e+="<option value='l' "+("l"===t?"selected='selected'":"")+">Crackman</option>",e+="</select>",e+="<a href='#' name='saveClientOption' data-key='default_font' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("GRAPHICS_SIZE")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var i=optionsClientMap.default_menugfxsize,o="",s="",n="";"large"===i?n="class='ui-btn-active'":"small"===i?s="class='ui-btn-active'":o="class='ui-btn-active'",e+="<a href='#' name='saveClientOption' data-key='default_menugfxsize' data-value='none' data-role='button' data-inline='true' "+o+">"+mapText("NOT_SELECTED")+"</a>",e+="<a href='#' name='saveClientOption' data-key='default_menugfxsize' data-value='small' data-role='button' data-inline='true' "+s+">"+mapText("SMALL")+"</a>",e+="<a href='#' name='saveClientOption' data-key='default_menugfxsize' data-value='large' data-role='button' data-inline='true' "+n+">"+mapText("BIG")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("TWO_SITES_VERSION")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",o="",s="",n="";var l=!1;"two_sites"in optionsClientMap?optionsClientMap.two_sites?(s="class='ui-btn-active'",l=!0):n="class='ui-btn-active'":o="class='ui-btn-active'",e+="<a href='#' name='saveClientOption' data-key='two_sites' data-value='none' data-role='button' data-inline='true' "+o+">"+mapText("NOT_SELECTED")+"</a>",e+="<a href='#' name='saveClientOption' data-key='two_sites' data-value='true' data-role='button' data-inline='true' "+s+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveClientOption' data-key='two_sites' data-value='false' data-role='button' data-inline='true' "+n+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="<div name='clientTwoSitesTransitionDiv' class='ui-block-f text-right' "+(l?"":"style='display: none;'")+">",e+="<span>"+mapText("TWO_SITES_TRANSITION")+"</span>",e+="</div>",e+="<div name='clientTwoSitesTransitionDiv' class='ui-block-g' "+(l?"":"style='display: none;'")+">",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='client_transition' data-theme='"+theme+"'>";var d=optionsClientMap.transition;e+="<option value='none'>"+mapText("NOT_SELECTED")+"</option>",e+="<option value='flip' "+("flip"===d?"selected='selected'":"")+">flip</option>",e+="<option value='slide' "+("slide"===d?"selected='selected'":"")+">slide</option>",e+="<option value='slideup' "+("slideup"===d?"selected='selected'":"")+">slideup</option>",e+="<option value='slidedown' "+("slidedown"===d?"selected='selected'":"")+">slidedown</option>",e+="<option value='pop' "+("pop"===d?"selected='selected'":"")+">pop</option>",e+="<option value='fade' "+("fade"===d?"selected='selected'":"")+">fade</option>",e+="</select>",e+="<a href='#' name='saveClientOption' data-key='transition' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("NUMBER_OF_COLUMNS")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='client_columns' data-theme='"+theme+"'>";var r=optionsClientMap.columns;return e+="<option value='none'>"+mapText("NOT_SELECTED")+"</option>",e+="<option value='1' "+("1"===r?"selected='selected'":"")+">1</option>",e+="<option value='2' "+("2"===r?"selected='selected'":"")+">2</option>",e+="<option value='3' "+("3"===r?"selected='selected'":"")+">3</option>",e+="<option value='4' "+("4"===r?"selected='selected'":"")+">4</option>",e+="<option value='5' "+("5"===r?"selected='selected'":"")+">auto</option>",e+="</select>",e+="<a href='#' name='saveClientOption' data-key='columns' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="</div></div></li>"}function processOptionsClientAnzeige(){var e="<li><h1>"+mapText("MENU")+"</h1>";e+="<div class='ui-field-contain'>",e+="<div class='ui-grid-b'>",e+=createClientMenuOptions("favorites"),e+=createClientMenuOptions("rooms"),e+=createClientMenuOptions("functions"),e+=createClientMenuOptions("variables"),e+=createClientMenuOptions("programs"),e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("SETTINGS")+" "+mapText("SHOW")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var a="class='",t="class='",i="class='",o="false";"others"in optionsClientMap?optionsClientMap.others?(t+="ui-btn-active",o="true",1!==optionsMap.no_more_settings||optionsMap.others||(a+="ui-state-disabled",t+=" ui-state-disabled",i+="ui-state-disabled")):i+="ui-btn-active":a+="ui-btn-active",a+="'",t+="'",i+="'",e+="<a href='#' name='saveClientOption' data-key='others' data-value='none' id='others_none_selector' data-nms='"+o+"' data-role='button' data-inline='true' "+a+">"+mapText("NOT_SELECTED")+"</a>",
e+="<a href='#' name='saveClientOption' data-key='others' data-value='true' data-role='button' data-inline='true' "+t+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveClientOption' data-key='others' data-value='false' id='others_no_selector' data-nms='"+o+"' data-role='button' data-inline='true' "+i+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DEFAULT_OPEN")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",e+="<select id='client_collapsed' data-theme='"+theme+"'>";var s=optionsClientMap.collapsed;return e+="<option value='none'>"+mapText("NOT_SELECTED")+"</a>",e+="<option value=''>"+mapText("NO_VALUE")+"</option>",e+=getSelectColapsedOptions("favorites",s),e+=getSelectColapsedOptions("rooms",s),e+=getSelectColapsedOptions("functions",s),e+=getSelectColapsedOptions("variables",s),e+=getSelectColapsedOptions("programs",s),e+="<option value='others' "+("others"===s?"selected='selected'":"")+">"+mapText("SETTINGS")+"</option>",e+="</select>",e+="<a href='#' name='saveClientOption' data-key='collapsed' data-role='button' data-inline='true' data-icon='check'>&nbsp;</a>",e+="</div>",e+="</div>",e+="</div></div></li>"}function processOptionsClientVariables(){var e="<li><h1>"+mapText("WORKSPACE")+"</h1>";e+="<div class='ui-field-contain'>",e+="<div class='ui-grid-b'>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("DEFAULT_READONLY")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>";var a="",t="",i="";return"systemvar_readonly"in optionsClientMap?optionsClientMap.systemvar_readonly?t="class='ui-btn-active'":i="class='ui-btn-active'":a="class='ui-btn-active'",e+="<a href='#' name='saveClientOption' data-key='systemvar_readonly' data-value='none' data-role='button' data-inline='true' "+a+">"+mapText("NOT_SELECTED")+"</a>",e+="<a href='#' name='saveClientOption' data-key='systemvar_readonly' data-value='true' data-role='button' data-inline='true' "+t+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveClientOption' data-key='systemvar_readonly' data-value='false' data-role='button' data-inline='true' "+i+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("SHOW_DESCRIPTION")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",a="",t="",i="","show_description"in optionsClientMap?optionsClientMap.show_description?t="class='ui-btn-active'":i="class='ui-btn-active'":a="class='ui-btn-active'",e+="<a href='#' name='saveClientOption' data-key='show_description' data-value='none' data-role='button' data-inline='true' "+a+">"+mapText("NOT_SELECTED")+"</a>",e+="<a href='#' name='saveClientOption' data-key='show_description' data-value='true' data-role='button' data-inline='true' "+t+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveClientOption' data-key='show_description' data-value='false' data-role='button' data-inline='true' "+i+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="<div class='ui-block-f text-right'>",e+="<span>"+mapText("SHOW_LAST_TIME_USED")+"</span>",e+="</div>",e+="<div class='ui-block-g'>",e+="<div data-role='controlgroup' data-type='horizontal'>",a="",t="",i="","show_lastUsedTime"in optionsClientMap?optionsClientMap.show_lastUsedTime?t="class='ui-btn-active'":i="class='ui-btn-active'":a="class='ui-btn-active'",e+="<a href='#' name='saveClientOption' data-key='show_lastUsedTime' data-value='none' data-role='button' data-inline='true' "+a+">"+mapText("NOT_SELECTED")+"</a>",e+="<a href='#' name='saveClientOption' data-key='show_lastUsedTime' data-value='true' data-role='button' data-inline='true' "+t+">"+mapText("YES")+"</a>",e+="<a href='#' name='saveClientOption' data-key='show_lastUsedTime' data-value='false' data-role='button' data-inline='true' "+i+">"+mapText("NO")+"</a>",e+="</div>",e+="</div>",e+="</div></div></li>"}function processGraphicIDGlobal(e){var a=getMap(e),t=getMap(e),i="variables"===e,o=!1,s=!1,n=!1,l="programs"===e,d="rooms"===e,r="functions"===e,p="favorites"===e,c=d||r||p,v="";v+="<li><h1>"+mapText("SETTINGS")+"</h1>",v+="<div class='ui-field-contain'>",v+="<div class='ui-grid-b'>",v+="<div class='ui-block-f text-right'>",v+="<span>"+mapText("DIVIDE")+"</span>",v+="</div>",v+="<div class='ui-block-g'>",v+="<div data-role='controlgroup' data-type='horizontal' style='vertical-align:middle;'>";var u="",m="";optionsMap[e+"_divisor"]?u="class='ui-btn-active'":m="class='ui-btn-active'",v+="<a href='#' name='saveGlobalOption' data-reload='true' data-key='"+e+"_divisor' data-value='true' data-role='button' data-inline='true' "+u+">"+mapText("YES")+"</a>",v+="<a href='#' name='saveGlobalOption' data-reload='true' data-key='"+e+"_divisor' data-value='false' data-role='button' data-inline='true' "+m+">"+mapText("NO")+"</a>",v+="&nbsp;("+mapText("RELOAD")+")",v+="</div>",v+="</div>",v+="</div>";var b=$.isEmptyObject(t.divisors)?0:$.keys(t.divisors).length;v+="<div class='ui-grid-b' id='dividerOptions' style='"+(optionsMap[e+"_divisor"]?"":"display: none;")+"'>",v+="<div class='ui-block-f text-right'>",v+="<span>"+mapText("ADD_DIVIDER")+"</span>",v+="</div>",v+="<div class='ui-block-g'>",v+="<div data-role='controlgroup' data-type='horizontal'>",v+="<input type='text' id='addDividerInput' value='' class='ui-no-corner-right' data-wrapper-class='controlgroup-textinput ui-btn'/>",v+="<a href='#' data-role='button' id='addDivider' data-type='"+e+"' data-size='"+b+"' data-inline='true' data-icon='plus'>&nbsp;</a>",v+="</div>",v+="</div>",v+="</div>",v+="<ul id='dataListDivisors' data-role='listview' data-inset='true' style='"+(optionsMap[e+"_divisor"]?"":"display: none;")+"'>",v+=addDivisor(b,e),v+="</ul>",v+="</div>",v+="</li>",$("#"+dataList).append(v);var f={},b=a.size;resultOptionsMap.default_sort_manually&&(a=recalculatePositions(a,e,!1)),$.each(a,function(a,t){if("date"!==a&&"size"!==a&&"divisors"!==a){o=i&&"20"===t.valueType,s=i&&"16"===t.valueType,n=i&&"4"===t.valueType;var d=i&&o&&-1!==$.inArray(t.valueUnit.toUpperCase(),specialTextVariables),r=i&&o&&-1!==$.inArray(t.valueUnit.toUpperCase(),specialTextVariablesOnlypic),p=getPicKey(a,e,t,!0);if(v="<li id='list"+a+"' data-id='"+a+"'>",v+="<div style='float: left; text-align: center; padding-right: 5px;'>",v+="<img id='img"+a+"' class='ui-div-thumbnail ui-img-"+theme,-1!==$.inArray(p,picturesList)&&(v+=" lazyLoadImage' data-original='../"+userFolder+"/img/ids/"+e+"/"+p+".png?"+t.picdate),v+="' src='img/menu/"+e+".png' data-type='"+e+"'/>",v+="<a href='#' "+(-1===$.inArray(p,picturesList)?"class='ui-btn ui-mini ui-icon-delete ui-btn-icon-left ui-shadow ui-corner-all ui-state-disabled'":"data-role='button' data-mini='true' data-icon='delete'")+" name='deletePic' id='deletePic"+a+"' data-id='"+a+"' data-pickey='"+p+"' data-type='"+e+"' data-faktor='"+t.faktor+"'>"+mapText("DELETE")+"</a>",v+="<h1>(",v+=c?"<a href='get.html?id="+a+"' target='_blank'>"+a+"</a>":a,v+=")</h1>",n&&(v+=createImgFloatList(a,t.faktor?t.faktor:1)),v+="</div>",resultOptionsMap.default_sort_manually&&(v+="<div style='float: right;'>",v+="<input type='hidden' name='position' id='position"+a+"' data-id='"+a+"' data-type='"+e+"' value='"+t.position+"' data-last='"+(b===t.position)+"'/>",v+="<a href='#' class='ui-btn ui-btn-inline ui-icon-carat-u ui-btn-icon-notext ui-corner-all",t.position<=1&&(v+=" ui-state-disabled' style='display: none;"),v+="' name='setUp' id='setUp"+a+"' data-id='"+a+"' />",v+="<a href='#' class='ui-btn ui-btn-inline ui-icon-carat-d ui-btn-icon-notext ui-corner-all",t.position>=b&&(v+=" ui-state-disabled' style='display: none;"),v+="' name='setDown' id='setDown"+a+"' data-id='"+a+"' />",v+="</div>"),v+="<form method='post' enctype='multipart/form-data' action='#' id='form"+a+"'>",v+="<div class='ui-grid-b'>",v+="<div class='ui-block-a'><input name='editName' data-id='"+a+"' data-type='"+e+"' type='text' value='"+t.name+"' /></div>",i&&(!d||r)||l?(v+="<div class='ui-block-b'>",v+="<label>"+mapText("ONLY_PIC")+":&nbsp;",v+="<input type='checkbox' data-role='flipswitch' name='flipswitch' data-type='"+e+"' data-key='onlyPic' data-id='"+a+"' data-on-text='"+mapText("YES")+"' data-off-text='"+mapText("NO")+"' "+(t.onlyPic?"checked":"")+"/>",v+="</label>",v+="</div>"):d&&(v+="<div class='ui-block-b small-hidden'></div>"),i&&(optionsMap.variables_divisor?(v+="<div class='ui-block-c'>",v+=getDivisorSelectbox(e,t[e+"_divisor"],a),v+="</div>"):v+="<div class='ui-block-c small-hidden'></div>"),i&&!o?v+="<div class='ui-block-a'>"+createExecutationField(a,t)+"</div>":l&&(v+="<div class='ui-block-a small-hidden'></div>"),v+="<div class='ui-block-b'>",v+="<input name='file' id='file"+a+"' data-pickey='"+p+"' type='file' accept='image/*' />",v+="</div>",v+="<div class='ui-block-c'><a href='#' name='uploadPicture' data-type='"+e+"' data-faktor='"+t.faktor+"' id='uploadPicture"+a+"' class='ui-link ui-btn ui-icon-check ui-btn-icon-left ui-btn-inline ui-shadow ui-corner-all ui-state-disabled'>"+mapText("UPLOAD")+"</a></div>",s?(v+="<div class='ui-block-a'>",v+="<div data-role='controlgroup' data-type='horizontal'>",v+="<select id='listType"+a+"' data-theme='"+theme+"'>",v+="<option value='auto' "+("auto"===t.listType?"selected='selected'":"")+">auto</option>",v+="<option value='small' "+("small"===t.listType?"selected='selected'":"")+">button</option>",v+="<option value='big' "+("big"===t.listType?"selected='selected'":"")+">select</option>",v+="</select>",v+="<a href='#' data-role='button' name='changeFloatSF' data-change='listType' data-id='"+a+"' data-inline='true' data-icon='check'>&nbsp;</a>",v+="</div>",v+="</div>"):n?(v+="<div class='ui-block-a'>",v+="<div class='ui-grid-a'>",v+="<div class='ui-block-a'>",v+=mapText("STEP")+":&nbsp;",v+="<div data-role='controlgroup' data-type='horizontal'>",v+="<input type='number' id='step"+a+"' class='ui-no-corner-right' style='width: 50px;' value='"+t.step+"' data-wrapper-class='controlgroup-textinput ui-btn'/>",v+="<a href='#' data-role='button' name='changeFloatSF' data-change='step' data-id='"+a+"' data-inline='true' data-icon='check'>&nbsp;</a>",v+="</div>",v+="</div>",v+="<div class='ui-block-b'>",v+=mapText("FACTOR")+":&nbsp;",v+="<div data-role='controlgroup' data-type='horizontal'>",v+="<input type='number' id='faktor"+a+"' class='ui-no-corner-left' style='width: 50px;' value='"+t.faktor+"' data-wrapper-class='controlgroup-textinput ui-btn'/>",v+="<a href='#' data-role='button' name='changeFloatSF' data-change='faktor' data-id='"+a+"' data-inline='true' data-icon='check'>&nbsp;</a>",v+="</div>",v+="</div>",v+="<div class='ui-block-c'>",v+="<span>&nbsp;</span>",v+="</div>",v+="</div>",v+="</div>"):optionsMap[e+"_divisor"]&&!i?(v+="<div class='ui-block-a'>",v+=getDivisorSelectbox(e,t[e+"_divisor"],a),v+="</div>"):v+="<div class='ui-block-a small-hidden'></div>",v+="<div class='ui-block-b",l||i){if(v+="'>",v+="<label>"+mapText("OPERATABLE")+":&nbsp;",i){v+="<div data-role='controlgroup' data-type='horizontal'>";var u="",m="",g="";"none"===t.operate?u="class='ui-btn-active'":t.operate?m="class='ui-btn-active'":g="class='ui-btn-active'",v+="<a href='#' name='editVarOperate' data-type='"+e+"' data-id='"+a+"' data-value='none' data-role='button' data-inline='true' "+u+">"+mapText("DEFAULT")+"</a>",v+="<a href='#' name='editVarOperate' data-type='"+e+"' data-id='"+a+"' data-value='true' data-role='button' data-inline='true' "+m+">"+mapText("YES")+"</a>",v+="<a href='#' name='editVarOperate' data-type='"+e+"' data-id='"+a+"' data-value='false' data-role='button' data-inline='true' "+g+">"+mapText("NO")+"</a>",v+="</div>"}else v+="<input type='checkbox' data-role='flipswitch' name='flipswitch' data-key='operate' data-type='"+e+"' data-id='"+a+"' data-on-text='"+mapText("YES")+"' data-off-text='"+mapText("NO")+"' "+(t.operate?"checked":"")+"/>";v+="</label>"}else v+=" small-hidden'>";v+="</div>",v+="<div class='ui-block-c'>",v+="<label>"+mapText("VISIBILITY")+":&nbsp;",v+="<input type='checkbox' data-role='flipswitch' name='flipswitch' data-key='visible' data-type='"+e+"' data-id='"+a+"' data-on-text='"+mapText("YES")+"' data-off-text='"+mapText("NO")+"' "+(t.visible?"checked":"")+"/>",v+="</label>",v+="</div>",v+="</div>",v+="</form>",v+="</li>",resultOptionsMap.default_sort_manually?f[parseInt(t.position)]=v:f[t.name.toLowerCase()]=v}});var g;g=resultOptionsMap.default_sort_manually?Object.keys(f).sort(function(e,a){return e-a}):Object.keys(f).sort();for(var h=g.length,T=0;h>T;T++){var y=g[T];$("#"+dataList).append(f[y])}}function processGraphicIDClient(e){var a=getMap(e),t=getClientMap(e),i="variables"===e,o=!1,s=!1,n="programs"===e,l="rooms"===e,d="functions"===e,r="favorites"===e,p=l||d||r,c="",v={};resultOptionsMap.default_sort_manually&&(a=recalculatePositions(a,e,!1)),$.each(a,function(a,l){if("date"!==a&&"size"!==a&&"divisors"!==a){var d=t[a];o=i&&"20"===l.valueType,s=i&&"16"===l.valueType;var r=i&&o&&-1!==$.inArray(l.valueUnit.toUpperCase(),specialTextVariables),u=i&&o&&-1!==$.inArray(l.valueUnit.toUpperCase(),specialTextVariablesOnlypic),m=getPicKey(a,e,l,!0);if(c="<li id='list"+a+"' data-id='"+a+"'>",c+="<div style='float: left; text-align: center;'>",c+="<img id='img"+a+"' class='ui-div-thumbnail ui-img-"+theme,-1!==$.inArray(m,picturesList)&&(c+=" lazyLoadImage' data-original='../"+userFolder+"/img/ids/"+e+"/"+m+".png?"+l.picdate),c+="' src='img/menu/"+e+".png' data-type='"+e+"'/>",c+="<h1>(",c+=p?"<a href='get.html?id="+a+"' target='_blank'>"+a+"</a>":a,c+=")</h1>",c+="</div>",c+="<form method='post' action='#' id='form"+a+"'>",c+="<div class='ui-grid-b'>",c+="<div class='ui-block-a'><strong>"+l.name+"</strong></div>",i&&(!r||u)||n){c+="<div class='ui-block-b'>",c+="<label>"+mapText("ONLY_PIC")+":&nbsp;",c+="<div data-role='controlgroup' data-type='horizontal'>";var b="",f="",g="";void 0===d||void 0===d.onlyPic?b="class='ui-btn-active'":d.onlyPic===!0?f="class='ui-btn-active'":d.onlyPic===!1&&(g="class='ui-btn-active'"),c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='onlyPic' data-value='global' data-role='button' data-inline='true' "+b+">"+mapText("NOT_SELECTED")+"</a>",c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='onlyPic' data-value='true' data-role='button' data-inline='true' "+f+">"+mapText("YES")+"</a>",c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='onlyPic' data-value='false' data-role='button' data-inline='true' "+g+">"+mapText("NO")+"</a>",c+="</div>",c+="</label>",c+="</div>"}else r&&(c+="<div class='ui-block-b small-hidden'></div>");if(i&&(optionsMap.variables_divisor?(c+="<div class='ui-block-c'>",c+=getDivisorSelectbox(e,l[e+"_divisor"],a,!0,d),c+="</div>"):c+="<div class='ui-block-c small-hidden'></div>"),c+=i&&!o?"<div class='ui-block-a'>"+createExecutationField(a,l)+"</div>":"<div class='ui-block-a small-hidden'></div>",c+="<div class='ui-block-b",n||i){if(c+="'>",c+="<label>"+mapText("OPERATABLE")+":&nbsp;",i){c+="<div data-role='controlgroup' data-mini='true' data-type='horizontal'>";var h="",b="",f="",g="";void 0===d||void 0===d.operate?h="class='ui-btn-active'":"none"===d.operate?b="class='ui-btn-active'":d.operate===!0?f="class='ui-btn-active'":d.operate===!1&&(g="class='ui-btn-active'"),c+="<a href='#' name='editVarOperateClient' data-type='"+e+"' data-id='"+a+"' data-value='global' data-role='button' data-inline='true' "+h+">"+mapText("NOT_SELECTED")+"</a>",c+="<a href='#' name='editVarOperateClient' data-type='"+e+"' data-id='"+a+"' data-value='none' data-role='button' data-inline='true' "+b+">"+mapText("DEFAULT")+"</a>",c+="<a href='#' name='editVarOperateClient' data-type='"+e+"' data-id='"+a+"' data-value='true' data-role='button' data-inline='true' "+f+">"+mapText("YES")+"</a>",c+="<a href='#' name='editVarOperateClient' data-type='"+e+"' data-id='"+a+"' data-value='false' data-role='button' data-inline='true' "+g+">"+mapText("NO")+"</a>",c+="</div>"}else{c+="<div data-role='controlgroup' data-type='horizontal'>";var b="",f="",g="";void 0===d||void 0===d.operate?b="class='ui-btn-active'":d.operate===!0?f="class='ui-btn-active'":d.operate===!1&&(g="class='ui-btn-active'"),c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='operate' data-value='global' data-role='button' data-inline='true' "+b+">"+mapText("NOT_SELECTED")+"</a>",c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='operate' data-value='true' data-role='button' data-inline='true' "+f+">"+mapText("YES")+"</a>",c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='operate' data-value='false' data-role='button' data-inline='true' "+g+">"+mapText("NO")+"</a>",c+="</div>"}c+="</label>"}else c+=" small-hidden'>";c+="</div>",c+="<div class='ui-block-c'>",c+="<label>"+mapText("VISIBILITY")+":&nbsp;",c+="<div data-role='controlgroup' data-type='horizontal'>";var b="",f="",g="";if(void 0===d||void 0===d.visible?b="class='ui-btn-active'":d.visible===!0?f="class='ui-btn-active'":d.visible===!1&&(g="class='ui-btn-active'"),c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='visible' data-value='global' data-role='button' data-inline='true' "+b+">"+mapText("NOT_SELECTED")+"</a>",c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='visible' data-value='true' data-role='button' data-inline='true' "+f+">"+mapText("YES")+"</a>",c+="<a href='#' name='flipswitchClient' data-type='"+e+"' data-id='"+a+"' data-key='visible' data-value='false' data-role='button' data-inline='true' "+g+">"+mapText("NO")+"</a>",c+="</div>",c+="</label>",c+="</div>",s){c+="<div class='ui-block-a'>",c+="<div data-role='controlgroup' data-type='horizontal'>",c+="<select id='listType"+a+"' data-theme='"+theme+"'>";var T="global";T=void 0===d||void 0===d.listType?"global":d.listType,c+="<option value='global' "+("global"===T?"selected='selected'":"")+">Global: "+l.listType+"</option>",c+="<option value='auto' "+("auto"===T?"selected='selected'":"")+">auto</option>",c+="<option value='small' "+("small"===T?"selected='selected'":"")+">button</option>",c+="<option value='big' "+("big"===T?"selected='selected'":"")+">select</option>",c+="</select>",c+="<a href='#' data-role='button' name='changeFloatSFClient' data-change='listType' data-id='"+a+"' data-inline='true' data-icon='check'>&nbsp;</a>",c+="</div>",c+="</div>"}else optionsMap[e+"_divisor"]&&!i&&(c+="<div class='ui-block-a'>",c+=getDivisorSelectbox(e,l[e+"_divisor"],a,!0,d),c+="</div>");c+="</div>",c+="</form>",c+="</li>",resultOptionsMap.default_sort_manually?v[parseInt(l.position)]=c:v[l.name.toLowerCase()]=c}});var u;u=resultOptionsMap.default_sort_manually?Object.keys(v).sort(function(e,a){return e-a}):Object.keys(v).sort();for(var m=u.length,b=0;m>b;b++){var f=u[b];$("#"+dataList).append(v[f])}}$(function(){$(document.body).on("click","[id^=setUp]",function(){var e=$(this).data("id"),a=$("#list"+e),t=a.height(),i=a.prev(),o=i.data("id"),s=parseInt($("#position"+e).val()),n=$("#position"+e).data("last"),l=parseInt($("#position"+o).val());$("#position"+e).val(l),$("#position"+o).val(s),1===l&&($("#setUp"+e).addClass("ui-state-disabled").hide(),$("#setUp"+o).removeClass("ui-state-disabled").show()),n&&($("#position"+e).data("last",!1),$("#position"+o).data("last",!0),$("#setDown"+e).removeClass("ui-state-disabled").show(),$("#setDown"+o).addClass("ui-state-disabled").hide()),a.animate({top:"-"+t+"px"},500,function(){i.animate({top:t+"px"},500,function(){a.css("top","0px"),i.css("top","0px"),a.insertBefore(i)})});var d=$("#position"+e).data("type"),r=!1;switch(d){case"favorites":favoritesMap[e].position=l,favoritesMap[o].position=s;break;case"favoritesDivisor":var p=favoritesMap.divisors;p[e].position=l,p[o].position=s,favoritesMap.divisors=p,d="favorites",r=!0;break;case"rooms":roomsMap[e].position=l,roomsMap[o].position=s;break;case"roomsDivisor":var p=roomsMap.divisors;p[e].position=l,p[o].position=s,roomsMap.divisors=p,d="rooms",r=!0;break;case"functions":functionsMap[e].position=l,functionsMap[o].position=s;break;case"functionsDivisor":var p=functionsMap.divisors;p[e].position=l,p[o].position=s,functionsMap.divisors=p,d="functions",r=!0;break;case"programs":programsMap[e].position=l,programsMap[o].position=s;break;case"programsDivisor":var p=programsMap.divisors;p[e].position=l,p[o].position=s,programsMap.divisors=p,d="programs";break;case"variables":variablesMap[e].position=l,variablesMap[o].position=s;break;case"variablesDivisor":var p=variablesMap.divisors;p[e].position=l,p[o].position=s,variablesMap.divisors=p,d="variables"}if(r){var c=$("#"+d+e+"MainMenu"),v=c.prev();c.insertBefore(v)}createOneMap(d),activateSettingSaveButton()}),$(document.body).on("click","[id^=setDown]",function(){var e=$(this).data("id"),a=$("#list"+e),t=a.height(),i=a.next(),o=i.data("id"),s=parseInt($("#position"+e).val()),n=$("#position"+o).data("last"),l=parseInt($("#position"+o).val());$("#position"+e).val(l),$("#position"+o).val(s),1===s&&($("#setUp"+o).addClass("ui-state-disabled").hide(),$("#setUp"+e).removeClass("ui-state-disabled").show()),n&&($("#position"+e).data("last",!0),$("#position"+o).data("last",!1),$("#setDown"+e).addClass("ui-state-disabled").hide(),$("#setDown"+o).removeClass("ui-state-disabled").show()),a.animate({top:t+"px"},500,function(){i.animate({top:"-"+t+"px"},500,function(){a.css("top","0px"),i.css("top","0px"),a.insertAfter(i)})});var d=$("#position"+e).data("type"),r=!1;switch(d){case"favorites":favoritesMap[e].position=l,favoritesMap[o].position=s;break;case"favoritesDivisor":var p=favoritesMap.divisors;p[e].position=l,p[o].position=s,favoritesMap.divisors=p,d="favorites",r=!0;break;case"rooms":roomsMap[e].position=l,roomsMap[o].position=s;break;case"roomsDivisor":var p=roomsMap.divisors;p[e].position=l,p[o].position=s,roomsMap.divisors=p,d="rooms",r=!0;break;case"functions":functionsMap[e].position=l,functionsMap[o].position=s;break;case"functionsDivisor":var p=functionsMap.divisors;p[e].position=l,p[o].position=s,functionsMap.divisors=p,d="functions",r=!0;break;case"programs":programsMap[e].position=l,programsMap[o].position=s;break;case"programsDivisor":var p=programsMap.divisors;p[e].position=l,p[o].position=s,programsMap.divisors=p,d="programs";break;case"variables":variablesMap[e].position=l,variablesMap[o].position=s;break;case"variablesDivisor":var p=variablesMap.divisors;p[e].position=l,p[o].position=s,variablesMap.divisors=p,d="variables"}if(r){var c=$("#"+d+e+"MainMenu"),v=c.prev();c.insertAfter(v)}createOneMap(d),activateSettingSaveButton()}),$(document.body).on("click","[name='saveClientOption']",function(){var e=$(this).data("key"),a="";if($("#client_"+e).length?a=$("#client_"+e).val():($(this).parent().find(".ui-btn-active").removeClass("ui-btn-active"),a=$(this).addClass("ui-btn-active").data("value")),"others"===e){var t=optionsMap.no_more_settings;a?(t++,optionsMap.no_more_settings=t,saveOptionsToServer()):"true"===$(this).data("nms")&&($("#others_none_selector").attr("data-nms","false"),$("#others_no_selector").attr("data-nms","false"),t--,optionsMap.no_more_settings=t,saveOptionsToServer())}"two_sites"===e&&("true"===a?$("[name=clientTwoSitesTransitionDiv]").show():$("[name=clientTwoSitesTransitionDiv]").hide()),""!==a&&("true"===a?a=!0:"false"===a?a=!1:$.isNumeric(a)&&(a=parseInt(a)),"none"===a?(delete optionsClientMap[e],resultOptionsMap[e]=optionsMap[e],a=optionsMap[e]):(optionsClientMap[e]=a,resultOptionsMap[e]=a),saveClientOptionsToServer(e,a))}),$(document.body).on("click","#addDivider",function(){var e=$(this),a=parseInt(e.attr("data-size"))+1,t=e.data("type"),i=0,o=getMap(t);i=$.isEmptyObject(o.divisors)?1:Math.max.apply(Math,$.keys(o.divisors))+1;var s={},n=$("#addDividerInput");s.name=n.val(),s.position=a;var l=o.divisors;l[i]=s,o.divisors=l,n.val(""),createOneMap(t),optionsMap[t+i]=!0,saveOptionsToServer(t+i,!0,!1),$("#dataListDivisors").html(addDivisor(a,t)).enhanceWithin(),e.attr("data-size",a),activateSettingSaveButton(!0)}),$(document.body).on("click","[name='saveGlobalOption']",function(){var e=$(this).data("key"),a="";if($("#global_"+e).length?a=$("#global_"+e).val():($(this).parent().find(".ui-btn-active").removeClass("ui-btn-active"),a=$(this).addClass("ui-btn-active").data("value")),"two_sites"===e&&("true"===a?$("[name=globalTwoSitesTransitionDiv]").show():$("[name=globalTwoSitesTransitionDiv]").hide()),""!==a){"true"===a?a=!0:"false"===a?a=!1:$.isNumeric(a)&&(a=parseInt(a));var t=$(this).data("reload");optionsMap[e]=a,saveOptionsToServer(e,a,t)}}),$(document.body).on("click","[name='change_lang']",function(){$.get("cgi/changeLang.cgi",{old:wmLang,"new":$("#change_lang").val(),debug:debugModus,folder:userFolder}).done(function(){location.reload(!0)})}),$(document.body).on("click","[name='title_client']",function(){var e=$(this).data("key"),a=$("#title_client_"+e.replace(/\./g,"_")).val();a||(a=e),$("#delete_client option[value='"+e+"']").text(a),$("#choose_tmp_client option[value='"+e+"']").text(a),clientsList[e]=a,optionsMap.clientsList=clientsList,saveOptionsToServer("clientsList",clientsList)}),$(document.body).on("click","[name='choose_tmp_client']",function(){var e=$("#choose_tmp_client").val();e&&(localStorage.setItem(isPreRelease+"tempOptionsForClient",e),location.reload(!0))}),$(document.body).on("click","[name='delete_client']",function(){var e=$("#delete_client").val();e&&confirm(mapText("DELETE_SETTINGS_WARNING"))&&$.get("cgi/deleteOptions.cgi",{client:e,folder:userFolder}).done(function(){delete clientsList[e],optionsMap.clientsList=clientsList,e===client?saveOptionsToServer("clientsList",clientsList,!0):($("#delete_client option[value='"+e+"']").remove(),$("#choose_tmp_client option[value='"+e+"']").remove(),$("[name='title_client_div_"+e.replace(/\./g,"_")+"']").remove(),$("#delete_client").val("").selectmenu("refresh"),saveOptionsToServer("clientsList",clientsList))})}),$(document.body).on("change","[name='flipswitch']",function(){var e=$(this),a=e.data("id"),t=e.data("type"),i=e.data("key"),o=e.prop("checked");switch(("favorites"===t||"rooms"===t||"functions"===t)&&(o?$("#"+a).fadeIn(1e3):$("#"+a).fadeOut(1e3)),t){case"favorites":favoritesMap[a][i]=o;break;case"rooms":roomsMap[a][i]=o;break;case"functions":functionsMap[a][i]=o;break;case"programs":programsMap[a][i]=o;break;case"variables":variablesMap[a][i]=o}createOneMap(t),activateSettingSaveButton()}),$(document.body).on("click","[name='flipswitchClient']",function(){var e=$(this),a=e.data("id"),t=e.data("type"),i=e.data("key"),o=e.data("value");if($(this).parent().children().removeClass("ui-btn-active"),$(this).addClass("ui-btn-active"),"favorites"===t||"rooms"===t||"functions"===t){var s=o;if("global"===o){var n=getMap(t);s=n[a][i]}s?$("#"+a).fadeIn(1e3):$("#"+a).fadeOut(1e3)}switch(t){case"favorites":if(void 0===favoritesClientMap&&(favoritesClientMap={}),"global"===o){if(void 0!==favoritesClientMap[a]){var n=favoritesClientMap[a];delete n[i],favoritesClientMap[a]=n}}else{var n=favoritesClientMap[a];void 0===n&&(n={}),n[i]=o,favoritesClientMap[a]=n}break;case"rooms":if(void 0===roomsClientMap&&(roomsClientMap={}),"global"===o){if(void 0!==roomsClientMap[a]){var n=roomsClientMap[a];delete n[i],roomsClientMap[a]=n}}else{var n=roomsClientMap[a];void 0===n&&(n={}),n[i]=o,roomsClientMap[a]=n}break;case"functions":if(void 0===functionsClientMap&&(functionsClientMap={}),"global"===o){if(void 0!==functionsClientMap[a]){var n=functionsClientMap[a];delete n[i],functionsClientMap[a]=n}}else{var n=functionsClientMap[a];void 0===n&&(n={}),n[i]=o,functionsClientMap[a]=n}break;case"programs":if(void 0===programsClientMap&&(programsClientMap={}),"global"===o){if(void 0!==programsClientMap[a]){var n=programsClientMap[a];delete n[i],programsClientMap[a]=n}}else{var n=programsClientMap[a];void 0===n&&(n={}),n[i]=o,programsClientMap[a]=n}break;case"variables":if(void 0===variablesClientMap&&(variablesClientMap={}),"global"===o){if(void 0!==variablesClientMap[a]){var n=variablesClientMap[a];delete n[i],variablesClientMap[a]=n}}else{var n=variablesClientMap[a];void 0===n&&(n={}),n[i]=o,variablesClientMap[a]=n}}createOneMap(t),activateSettingSaveButton(!1,!0)}),$(document.body).on("click","[name='editVarOperate']",function(){var e=$(this),a=e.data("id"),t=e.data("value");$(this).parent().children().removeClass("ui-btn-active"),$(this).addClass("ui-btn-active"),variablesMap[a].operate=t,createOneMap("variables"),activateSettingSaveButton()}),$(document.body).on("click","[name='editVarOperateClient']",function(){var e=$(this),a=e.data("id"),t=e.data("value");if($(this).parent().children().removeClass("ui-btn-active"),$(this).addClass("ui-btn-active"),void 0===variablesClientMap&&(variablesClientMap={}),"global"===t){if(void 0!==variablesClientMap[a]){var i=variablesClientMap[a];delete i.operate,variablesClientMap[a]=i}}else{var i=variablesClientMap[a];void 0===i&&(i={}),i.operate=t,variablesClientMap[a]=i}createOneMap("variables"),activateSettingSaveButton(!1,!0)}),$(document.body).on("change","[name='saveDivisor']",function(){var e=$(this),a=e.data("id"),t=e.data("key"),i=e.data("type"),o=e.val();$.isNumeric(o)&&(o=parseInt(o));var s=getMap(i);s[a][t]=o,createOneMap(i),activateSettingSaveButton(!0)}),$(document.body).on("click","[name='changeFloatSF']",function(){var e=$(this),a=e.data("id"),t=e.data("change"),i=$("#"+t+a).val();variablesMap[a][t]=i;var o=variablesMap[a];"faktor"===t||"step"===t?$("#mainNumber"+a).replaceWith(addSetNumber(0,a,parseFloat(o.valueMin),o.valueUnit,parseFloat(o.valueMin),parseFloat(o.valueMax),o.step?o.step:1,o.faktor?o.faktor:1,"",!1,!0,!0)):"listType"===t&&$("#mainNumber"+a).replaceWith(addSetValueList(0,a,"0",o.valueList,o.valueUnit,"",!1,!0,o.listType,!0)),$("#mainNumber"+a).enhanceWithin(),createOneMap("variables"),activateSettingSaveButton()}),$(document.body).on("click","[name='changeFloatSFClient']",function(){var e=$(this),a=e.data("id"),t=e.data("change"),i=$("#"+t+a).val();if(void 0===variablesClientMap&&(variablesClientMap={}),"global"===i){if(void 0!==variablesClientMap[a]){var o=variablesClientMap[a];delete o[t],variablesClientMap[a]=o}}else{var o=variablesClientMap[a];void 0===o&&(o={}),o[t]=i,variablesClientMap[a]=o}var o=variablesMap[a];"listType"===t&&$("#mainNumber"+a).replaceWith(addSetValueList(0,a,"0",o.valueList,o.valueUnit,"",!1,!0,i,!0)),$("#mainNumber"+a).enhanceWithin(),createOneMap("variables"),activateSettingSaveButton(!1,!0)}),$(document.body).on("click","[name='saveAllChanges']",function(){saveAllDatasToServer()}),$(document.body).on("click","[name='deleteDivider']",function(){var e=$(this),a=e.data("id"),t=e.data("type"),i="";switch(t){case"favoritesDivisor":var o=favoritesMap.divisors;delete o[a],favoritesMap.divisors=o,i="favorites",$.each(favoritesMap,function(e,t){"date"!==e&&"size"!==e&&"divisors"!==e&&t.favorites_divisor===a&&(favoritesMap[e].favorites_divisor="unsorted")});break;case"roomsDivisor":var o=roomsMap.divisors;delete o[a],roomsMap.divisors=o,i="rooms",$.each(roomsMap,function(e,t){"date"!==e&&"size"!==e&&"divisors"!==e&&t.rooms_divisor===a&&(roomsMap[e].rooms_divisor="unsorted")});break;case"functionsDivisor":var o=functionsMap.divisors;delete o[a],functionsMap.divisors=o,i="functions",$.each(functionsMap,function(e,t){"date"!==e&&"size"!==e&&"divisors"!==e&&t.functions_divisor===a&&(functionsMap[e].functions_divisor="unsorted")});break;case"programsDivisor":var o=programsMap.divisors;delete o[a],programsMap.divisors=o,i="programs",$.each(programsMap,function(e,t){"date"!==e&&"size"!==e&&"divisors"!==e&&t.programs_divisor===a&&(programsMap[e].programs_divisor="unsorted")});break;case"variablesDivisor":var o=variablesMap.divisors;delete o[a],variablesMap.divisors=o,i="variables",$.each(variablesMap,function(e,t){"date"!==e&&"size"!==e&&"divisors"!==e&&t.variables_divisor===a&&(variablesMap[e].variables_divisor="unsorted");
})}recalculatePositions(getMap(i),i,!0),$("#"+i+a+"MainMenu").fadeOut(500).remove(),$("#list"+a).fadeOut(500).remove(),createOneMap(t),activateSettingSaveButton(!0)}),$(document.body).on("change","[name='editName']",function(){var e=$(this),a=e.data("id"),t=e.val(),i=e.data("type"),o="",s=!1;switch(i){case"favorites":favoritesMap[a].name=t;break;case"favoritesDivisor":var n=favoritesMap.divisors;n[a].name=t,favoritesMap.divisors=n,i="favorites",o=i,s=!0;break;case"rooms":roomsMap[a].name=t;break;case"roomsDivisor":var n=roomsMap.divisors;n[a].name=t,roomsMap.divisors=n,i="rooms",o=i,s=!0;break;case"functions":functionsMap[a].name=t;break;case"functionsDivisor":var n=functionsMap.divisors;n[a].name=t,functionsMap.divisors=n,i="functions",o=i,s=!0;break;case"programs":programsMap[a].name=t;break;case"programsDivisor":var n=programsMap.divisors;n[a].name=t,programsMap.divisors=n,i="programs",o=i;break;case"variables":variablesMap[a].name=t;break;case"variablesDivisor":var n=variablesMap.divisors;n[a].name=t,variablesMap.divisors=n,i="variables",o=i}$("#menuText"+o+a).fadeOut(500,function(){$("#menuText"+o+a).text(t).fadeIn(1e3)}),s&&$("#"+i+a+"MainMenu").find(".ui-collapsible-heading-toggle").text(t),createOneMap(i),activateSettingSaveButton()}),$(document.body).on("click","[name='changeGraphicIDEditModus']",function(){var e=$(this),a=e.data("global"),t=e.data("type");loadGraphicIDs(t,!a)}),$(document.body).on("click","[name=setImgFloat]",function(){$("#optionssetValue_"+$(this).data("id")).val($(this).text()).slider("refresh"),$("#optionssetButton_"+$(this).data("id")).click()}),$(document.body).on("click","[id^=optionssetButton],[id^=optionssetValueBigList]",function(){var e=$(this).data("id"),a=$(this).data("value"),t=a;if("undefined"==typeof a){var i="optionssetValue_"+e;a=$("#"+i).val(),t=a,"undefined"==typeof a&&(a=$("#selector_"+e).val(),t=a);var o=$("#"+i).data("factor");if("undefined"!=typeof o){$("#optionsValueSpan"+e).text(t),a=parseFloat(a),o=parseFloat(o),a/=o,t=a;var s=$.grep(picturesList,function(a){var t=new RegExp("^"+e,"i");return a.trim().match(t)}),n=parseFloat($("#"+i).attr("min"));"undefined"!=typeof s&&s.length>0&&$.each(s,function(e,a){var i=parseFloat(a.split("_")[1]);t>=i&&i>n&&(n=i)}),t=n}}var l=e+"_"+t;$("#file"+e).attr("data-pickey",e+"_"+a);var d=$("#img"+e).data("type");"check"!==$(this).data("icon")&&($(this).parent().children().removeClass("ui-btn-active"),$(this).addClass("ui-btn-active")),$("#img"+e).fadeOut(500,function(){var a=new Date,t="img/menu/"+d+".png";-1!==$.inArray(l,picturesList)?(t="../"+userFolder+"/img/ids/"+d+"/"+l+".png?"+a.getTime(),$("#deletePic"+e).removeClass("ui-state-disabled")):$("#deletePic"+e).addClass("ui-state-disabled"),$("#img"+e).attr("src",t).fadeIn(1e3),$("#deletePic"+e).attr("data-pickey",l)})}),$(document.body).on("click","[name='deletePic']",function(){var e=$(this),a=e.data("type"),t=e.data("id"),i=e.attr("data-pickey"),o=e.data("faktor");$.get("cgi/delete.cgi?type="+a+"&name="+i+"&folder="+userFolder,function(){$("#img"+t).fadeOut(500,function(){$("#img"+t).attr("src","img/menu/"+a+".png").fadeIn(1e3)}),$("#menuImg"+t).fadeOut(500,function(){$("#menuImg"+t).attr("src","img/menu/"+a+".png").fadeIn(1e3)});var s=picturesList.indexOf(i);-1!==s&&picturesList.splice(s,1),"undefined"!==o&&($("#imgFloatList"+t).replaceWith(createImgFloatList(t,parseFloat(o))),$("#"+dataList).listview("refresh"),$("#"+dataList).enhanceWithin()),e.addClass("ui-state-disabled")})}),$(document.body).on("change",":file",function(){var e=this.files[0];if(e.name.length<1);else if("image/png"!==e.type&&"image/jpg"!==e.type&&"image/gif"!==!e.type&&"image/jpeg"!==e.type)alert(mapText("IMAGE_UPLOAD"));else{var a=$(this).attr("id"),t=a.substr(4,a.length);$("#uploadPicture"+t).removeClass("ui-state-disabled")}}),$(document.body).on("click","a[name=uploadPicture]",function(){var e=$(this),a=e.attr("id"),t=a.substr(13,a.length),i=e.data("type"),o=$("#file"+t).attr("data-pickey"),s=e.data("faktor"),n=new FormData,l=document.getElementById("file"+t).files[0],d=new FileReader;d.onloadend=function(){var e=new Image;e.src=d.result,e.onload=function(){var a=160,l=160,d=e.width,r=e.height;d>r?d>a&&(r*=a/d,d=a):r>l&&(d*=l/r,r=l);var p=document.createElement("canvas");p.width=d,p.height=r;var c=p.getContext("2d");c.drawImage(this,0,0,d,r);for(var v=p.toDataURL("image/png"),u=atob(v.split(",")[1]),m=new ArrayBuffer(u.length),b=new Uint8Array(m),f=0;f<u.length;f++)b[f]=255&u.charCodeAt(f);var g;try{g=new Blob([m],{type:"image/png"})}catch(h){var T=new(window.WebKitBlobBuilder||window.MozBlobBuilder);T.append(m),g=T.getBlob("image/png")}$("#img"+t).fadeOut(500,function(){$("#img"+t).attr("src",v).fadeIn(1e3)}),$("#menuImg"+t).fadeOut(500,function(){$("#menuImg"+t).attr("src",v).fadeIn(1e3)}),n.append("file",g,o+".png"),n.append("filename",o+".png"),n.append("path","/usr/local/etc/config/addons/www/"+userFolder+"/img/ids/"+i+"/"),$.ajax({url:"cgi/upload.cgi",type:"POST",data:n,cache:!1,contentType:!1,processData:!1},"json").done(function(){-1===$.inArray(o,picturesList)&&(picturesList.push(o),"undefined"!==s&&($("#imgFloatList"+t).replaceWith(createImgFloatList(t,parseFloat(s))),$("#"+dataList).listview("refresh"),$("#"+dataList).enhanceWithin())),reloadDatePicCache(i,t)})},$("#uploadPicture"+t).addClass("ui-state-disabled"),$("#deletePic"+t).removeClass("ui-state-disabled")},d.readAsDataURL(l)})});