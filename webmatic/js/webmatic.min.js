function refreshPage(item,col){if(restartTimer(),testSite=!1,-1!==lastClickType&&-1!==lastClickID&&!isDialog){var restart=oldID!==lastClickID&&0!==item;switch(oldID=lastClickID,restart&&(col||(col=resultOptionsMap.columns),changeNumberOfColumns(col),0!==item&&(0!==prevItem&&prevItem.find(".ui-btn").removeClass("ui-btn-active"),item.find(".ui-btn").addClass("ui-btn-active"),prevItem=item),excludeFromRefresh.length=0,$("#"+dataList).hide(),loadColorPicker=!1),lastClickType){case 1:loadData("cgi/list.cgi",lastClickID,restart);break;case 2:loadVariables(restart);break;case 3:loadPrograms(restart);break;case 4:loadGraphicIDs("favorites",!0);break;case 5:testSite=!0,loadData("debug/debug.json","a",restart);break;case 6:testSite=!0,loadData("debug/debug_cuxd.json","b",restart);break;case 7:loadOptions();break;case 8:loadGraphicIDs("rooms",!0);break;case 9:loadGraphicIDs("functions",!0);break;case 10:loadGraphicIDs("programs",!0);break;case 11:loadOptionsClient();break;case 12:loadGraphicIDs("variables",!0)}$(".evalScript").each(function(){var valID=$(this).data("id");-1===$.inArray(valID.toString(),excludeFromRefresh)&&(excludeFromRefresh.push(valID.toString()),$(this).find("script").each(function(){var src=$(this).attr("src");if(src)try{$.getScript(src)}catch(err){log(err,2)}else try{eval($(this).text())}catch(err){log(err,2)}}))})}}function refreshServiceMessages(){$(".buttonService .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>"),$.getJSON("cgi/service.cgi",function(e){$("#serviceList").empty();var a=0;$.each(e.entries,function(e,t){var i=t.name,s=t.type,r=t.device,n=t.error,l=t.value,d=t.date,o=getErrorMessage(s,n,l,r);$("#serviceList").append("<li><p class='ui-li-desc' style='text-align:right;'>"+d+"</p><h1>"+i+"</h1><p>"+o+"</p></li>"),a+=1}),webmaticVersion!==newWebmaticVersion&&($("#serviceList").append("<li><p class='ui-li-desc' style='text-align:right;'>"+dateNow+"</p><h1>"+mapText("NEW_VERSION")+"</h1><p><span class='valueInfo valueInfo-"+theme+"'><a href='http://webmatic.lmdsoft.de/tiki-index.php?page=Entwicklungsstand' target='_blank' >Webmatic "+newWebmaticVersion+" "+mapText("DOWNLOAD")+"</a></span></p></li>"),a+=1),$(".buttonService .ui-btn-text").text("("+a+")"),0===a?($(".buttonService, #popupDiv").removeClass(function(e,a){return(a.match(/(^|\s)valueService-(\S{3}|\S{1})/g)||[]).join(" ")}),$("#headerButtonGroup"+(page2?"2":"")).controlgroup("refresh",!0),$("#serviceList").append("<li><p>"+mapText("NO_SERVICE_MESSAGES")+"</p></li>")):($(".buttonService, #popupDiv").addClass("valueService-"+theme),$("#headerButtonGroup"+(page2?"2":"")).controlgroup("refresh",!0)),$("#serviceList").listview("refresh",!0)})}function removeMessages(){newWebmaticVersion=webmaticVersion,$.ajax("cgi/removemessages.cgi")}function processVariable(e,a,t){var i=unescape(e.value),s=e.valueType,r=e.valueUnit,n=getTimeDiffString(e.date,t),l=unescape(e.info),d=checkOperate(e.operate),o=getPicKey(a,"variables",e,!1),p="<li class='dataListItem' id='"+a+"' "+(e.visible?"":"style='display: none;'")+">";if(p+="<h2 class='ui-li-heading'>"+unescape(e.name)+"</h2>",e.onlyPic){var c="20"===s,u="data-id='"+a+"' data-type='variables"+s+"' class='onlyPic"+(d||c?"":" onlyPicDisabled")+"' ";c||(u+="data-value='"+i+"' "),"4"===s&&d?u+="data-faktor='"+e.faktor+"' data-step='"+e.step+"' data-min='"+e.valueMin+"' data-max='"+e.valueMax+"' ":"16"===s&&d?u+="data-list='"+e.valueList+"' data-listtype='"+e.listType+"' ":c&&(u+="data-operate='"+d+"' "),(d&&("4"===s||"16"===s)||c)&&(u+="data-name='"+unescape(e.name)+"' data-unit='"+r+"' data-date='"+n+"'"),p+="<div "+(d||c?"class='onlyPicDiv'":u)+">",(d||c)&&(p+="<a href='#' "+u+">"),p+="<img id='img"+a+"' class='ui-img-"+theme,-1!==$.inArray(o,picturesList)&&(p+=" lazyLoadImage' data-original='../"+userFolder+"/img/ids/variables/"+o+".png?"+e.picdate),p+="' src='img/menu/variables.png'/>",(d||c)&&(p+="</a>"),d?p+="<div class='onlyPic-player onlyPic-player-"+theme+"' id='player"+a+"'>&nbsp;</div>":c&&(p+="<div class='onlyPic-viewer onlyPic-viewer-"+theme+"'>&nbsp;</div>"),"4"===s?p+="<div class='onlyPic-value valueInfo-"+theme+"'>"+parseFloat(i)+r+"</div>":c&&r&&"COLOR"===r.toUpperCase()?p+="<div class='onlyPic-color' style='background-color: "+i+";'>&nbsp;</div>":c&&r&&("DATE"===r.toUpperCase()||"TIME"===r.toUpperCase())&&(p+="<div class='onlyPic-value valueInfo-"+theme+"'>"+i+"</div>"),c&&(p+="<span id='textValue"+a+"' style='display: none;'>"+i+"</span>"),p+="</div>"}else{p+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+l+"</p>";var m=!1;-1!==$.inArray(o,picturesList)&&(p+="<div style='float: left; text-align: center; padding-right: 10px;'>",p+="<img id='img"+o+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../"+userFolder+"/img/ids/variables/"+o+".png?"+e.picdate+"' src='img/menu/variables.png'/>",p+="</div>",m=5===actColumn),p+=addVariableField("",a,e,n,!d,d,m)}return p+="</li>"}function processProgram(e,a,t,i,s){var r="<li class='dataListItem' id='"+a+"' "+(s?"":"style='display: none;'")+">";if(r+="<h2 class='ui-li-heading'>"+e.name+"</h2>",e.onlyPic){var n=e.operate||!readModus,l="data-id='"+a+"' data-type='programs' class='onlyPic"+(n?"":" onlyPicDisabled")+"'";r+="<div "+(n?"class='onlyPicDiv'":l)+">",n&&(r+="<a href='#' "+l+">"),r+="<img id='img"+a+"' class='ui-img-"+theme,-1!==$.inArray(a,picturesList)&&(r+=" lazyLoadImage' data-original='../"+userFolder+"/img/ids/programs/"+a+".png?"+e.picdate),r+="' src='img/menu/programs.png'/>",n&&(r+="<div class='onlyPic-player onlyPic-player-"+theme+"' id='player"+a+"'>&nbsp;</div>",r+="</a>"),r+="</div>"}else r+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+e.info+(i?"":" ("+mapText("MANUAL")+")")+"</p>",-1!==$.inArray(a,picturesList)&&(r+="<div style='float: left; text-align: center; padding-right: 10px;'>",r+="<img id='img"+a+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../"+userFolder+"/img/ids/programs/"+a+".png?"+e.picdate+"' src='img/menu/programs.png'/>",r+="</div>"),r+=addStartProgramButton("",a,mapText("RUN"),getTimeDiffString(e.date,t),e.operate||!readModus);return r+="</li>"}function getErrorMessage(e,a,t,i){var s="";if("ALARMDP"===e){var r;return r="CONFIG_PENDING"===a||"STICKY_UNREACH"===a?"Info":"LOWBAT"===a?"Warning":"Error","<span class='value"+r+" value"+r+"-"+theme+"'>"+mapText(e+"__"+a)+"</span>"}return"HSSDP"===e&&(s=mapText(i+"__"+a+"__"+t),""!==s&&"-"!==s)?"<span class='valueError valueError-"+theme+"'>"+s+"</span>":(""===s&&(s="<span class='valueError valueError-"+theme+"'>"+mapText("UNKNOWN_ERROR")+": "+t+"</span>"),s)}function addDiagram(e){if(e.addDiagram){$("#"+dataList).listview("refresh");for(var a="l",t="69A5CF",i="",s="",r=1,n="0/#008800",l="30/#AA4400",d=0;d<e.varOptions.length;d++){var o=e.varOptions[d].split("=");2===o.length&&("t"===o[0]?a=o[1]:"c"===o[0]?t=o[1]:"l"===o[0]?i=o[1]:"h"===o[0]?s=o[1]:"k"===o[0]?r=parseInt(o[1]):"s"===o[0]?n=o[1]:"e"===o[0]&&(l=o[1]))}if("g"===e.varOptionsFirst){var p=parseFloat(e.diagramData),c=n.split("/"),u=parseFloat(c[0]),m=c[1];u>p&&(u=p);var g=l.split("/"),v=parseFloat(g[0]),h=g[1];p>v&&(v=p);for(var T=parseInt(m.substring(1,3),16),f=parseInt(m.substring(3,5),16),b=parseInt(m.substring(5,7),16),_=parseInt(h.substring(1,3),16),y=parseInt(h.substring(3,5),16),x=parseInt(h.substring(5,7),16),O=[],R=[],I=10,d=1;I>=d;d++){var M=d/I,S=u+M*(v-u);O.push(S),M=(d-1)/(I-1);var P=Math.floor(T+M*(_-T)).toString(16);P.length<2&&(P="0"+P);var D=Math.floor(f+M*(y-f)).toString(16);D.length<2&&(D="0"+D);var L=Math.floor(b+M*(x-b)).toString(16);L.length<2&&(L="0"+L);var A="#"+P+D+L;R.push(A)}var E=[e.diagramData];$.jqplot(e.diagramID,[E],{seriesDefaults:{renderer:$.jqplot.MeterGaugeRenderer,rendererOptions:{label:e.diagramData+" "+e.diagramUnit,labelPosition:"bottom",labelHeightAdjust:-5,min:u,max:v,intervals:O,intervalColors:R,smooth:!0,animation:{show:!0}}},grid:{backgroundColor:"transparent"}})}else if("h"===e.varOptionsFirst){var C=e.diagramData.split(";"),w=C[0];if(w>0){var k=new Array;k[0]=new Array,k[1]=new Array,k[2]=new Array,k[3]=new Array,k[4]=new Array;var F,N=0,V=!1,Y=!1;""===i?(F=15,V=!0):F=parseFloat(i);var U;""===s?(U=23,Y=!0):U=parseFloat(s);for(var H="",z="",G=100,B=-100,d=1;w>=d;d++){var W=C[d],j=W.split(","),K=j[0];(""===H||H>K)&&(H=K),(""===z||K>z)&&(z=K);var q=parseFloat(j[2]);for(G>q&&(G=q),q>B&&(B=q),N=1;N<j.length;N++){var J=new Array;J[0]=K;var X=j[N];J[1]=X,k[N-1][d-1]=J}}V&&(F=G-1,F=Math.floor(F)),Y&&(U=B+1,U=Math.ceil(U))}$.jqplot(e.diagramID,[k[0],k[1],k[2],k[3],k[4]],{axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,tickRenderer:$.jqplot.CanvasAxisTickRenderer,tickOptions:{formatString:"%a, %#d %#H:%M",angle:20},min:H,max:z},yaxis:{min:F,max:U,showLabel:!0,tickOptions:{formatString:"%."+r+"f&deg;C"}},y2axis:{min:0,max:100,showLabel:!0,tickOptions:{formatString:"%d%"}}},legend:{show:!1,fontSize:23,placement:"outside",location:"e"},seriesDefaults:{lineWidth:2,showMarker:!1,fill:!1,shadow:!1},series:[{label:"Soll",color:"#555555",fill:!0,fillAlpha:.1},{label:"Ist",color:"#DD0000"},{label:"relF%",color:"#0174DF",yaxis:"y2axis",lineWidth:1},{label:"Ventil",color:"#777777",yaxis:"y2axis",lineWidth:1},{label:"Ventil",color:"#777777",yaxis:"y2axis"}],highlighter:{show:!0,sizeAdjust:5.5},cursor:{zoom:!0,show:!0},grid:{backgroundColor:"#F4F4F4"},animated:!0})}else if(("l"===a||"f"===a)&&(C=e.diagramData.split(","),w=C.length,w>=3)){k=new Array,N=0,F=1e6,U=-1e6,H="",z="";for(var d=1;w>d;d+=2){K=C[d],X=C[d+1];var Q=new Array;Q[0]=K,S="true"===X?1:"false"===X?0:parseFloat(X),Q[1]=S,F>S&&(F=S),S>U&&(U=S),(""===H||H>K)&&(H=K),(""===z||K>z)&&(z=K),k[N]=Q,N++}if(""===i)F-=.1*(U-F);else if("m"===i);else{var Z=parseFloat(i);F>Z&&(F=Z)}if(""===s)U+=.1*(U-F);else if("m"===s);else{var ee=parseFloat(s);ee>U&&(U=ee)}var ae;ae="l"===a?!1:!0,$.jqplot(e.diagramID,[k],{axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,tickRenderer:$.jqplot.CanvasAxisTickRenderer,tickOptions:{formatString:"%b %#d, %#H:%M",angle:20},min:H,max:z},yaxis:{min:F,max:U,tickOptions:{formatString:"%."+r+"f"+e.diagramUnit}}},seriesDefaults:{rendererOptions:{smooth:!0}},series:[{color:"#"+t,lineWidth:2,showMarker:!1,fill:ae}],highlighter:{show:!0,sizeAdjust:5.5},cursor:{show:!1},grid:{backgroundColor:"#F4F4F4"},animated:!0})}}}function addChannel(e,a,t,s){var r=e.hssType,n=e.id,l=!1,d=[];d.deviceHTMLPostChannelGroup="",d.deviceHTMLPostChannelGroupMode=0;var o="";if($.each(e.channels,function(e,c){l=!0;var u=c.type;if("HSSDP"===u){var m=c.id,g=c.hssType,v=c.date,h=getTimeDiffString(v,a),T=c.value,f=parseFloat(c.value),b="true"===T,_=mapUnit(c.valueUnit,g),y=parseFloat(c.valueMin),x=parseFloat(c.valueMax);if("SETPOINT"===g||"SET_TEMPERATURE"===g){o+=addSetNumber(n,m,f,_,6,30,.5,1,h,!1,s);var O=f-3,R=O+6;for(y>O&&(O=y,R=11),R>x&&(O=25,R=x),o+="<div data-role='controlgroup' data-type='horizontal'>","SETPOINT"===g&&(o+=addSetButton(n,m,mapText(r+"__"+g+"__VENT_CLOSED"),0,h,!0,0===f,!1,s)),i=O;i<=R;i+=1)o+=addSetButton(n,m,i+_,i,h,!0,i===f,!1,s);"SETPOINT"===g&&(o+=addSetButton(n,m,mapText(r+"__"+g+"__VENT_OPEN"),100,h,!0,100===f,!1,s)),o+="</div>"}else if("CLIMATECONTROL_RT_TRANSCEIVER"===r&&(g.endsWith("MODE")||g.startsWith("PARTY")))"CONTROL_MODE"===g?d.deviceHTMLPostChannelGroupMode=f:"AUTO_MODE"===g?d.deviceHTMLPostChannelGroup+=addSetButton(n,m,mapText(r+"__"+g),!0,h,!0,0===d.deviceHTMLPostChannelGroupMode,!0,s):"MANU_MODE"===g?d.deviceHTMLPostChannelGroup+=addSetButton(n,m,mapText(r+"__"+g),!0,h,!0,1===d.deviceHTMLPostChannelGroupMode,!0,s):"BOOST_MODE"===g?d.deviceHTMLPostChannelGroup+=addSetButton(n,m,mapText(r+"__"+g),!0,h,!0,3===d.deviceHTMLPostChannelGroupMode,!0,s):"LOWERING_MODE"===g||"COMFORT_MODE"===g?d.deviceHTMLPostChannelGroup+=addSetButton(n,m,mapText(r+"__"+g),!0,h,!0,!1,!0,s):"PARTY_TEMPERATURE"===g?d.PARTY_TEMPERATURE=f:"PARTY_START_TIME"===g?d.PARTY_START_TIME=parseInt(T):"PARTY_START_DAY"===g?d.PARTY_START_DAY=parseInt(T):"PARTY_START_MONTH"===g?d.PARTY_START_MONTH=parseInt(T):"PARTY_START_YEAR"===g?d.PARTY_START_YEAR=parseInt(T):"PARTY_STOP_TIME"===g?d.PARTY_STOP_TIME=parseInt(T):"PARTY_STOP_DAY"===g?d.PARTY_STOP_DAY=parseInt(T):"PARTY_STOP_MONTH"===g?d.PARTY_STOP_MONTH=parseInt(T):"PARTY_STOP_YEAR"===g?d.PARTY_STOP_YEAR=parseInt(T):"PARTY_MODE_SUBMIT"===g&&(d.PARTY_MODE_ID=m,d.VORDATE=h);else if("PROGRAM"===g&&"RGBW_AUTOMATIC"===r)o+="<div data-role='controlgroup' data-type='horizontal'>",o+=addSetButton(n,m,mapText(r+"__"+g+"__0"),0,h,!0,0===f,!0,s),o+=addSetButton(n,m,mapText(r+"__"+g+"__1"),1,h,!0,1===f,!0,s),o+=addSetButton(n,m,mapText(r+"__"+g+"__2"),2,h,!0,2===f,!0,s),o+=addSetButton(n,m,mapText(r+"__"+g+"__3"),3,h,!0,3===f,!0,s),o+=addSetButton(n,m,mapText(r+"__"+g+"__4"),4,h,!0,4===f,!0,s),o+=addSetButton(n,m,mapText(r+"__"+g+"__5"),5,h,!0,5===f,!0,s),o+=addSetButton(n,m,mapText(r+"__"+g+"__6"),6,h,!0,6===f,!0,s),o+="</div>";else if("COLOR"===g&&"RGBW_COLOR"===r)o+="<span class='RGBW-Color'>",o+=addSetNumber(n,m,f,_,0,200,1,1,h,!0,s),o+="</span>";else if("LED_STATUS"===g&&"KEY"===r)switch(f){case 0:o+="<p><img class='ui-img-"+theme+"' src='img/channels/off_lamp.png' style='max-height:40px'> "+mapText(r+"__"+g+"__0")+" <span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+h+"</i></span></p>";break;case 1:o+="<p><img class='ui-img-"+theme+"' src='img/channels/red_lamp.png' style='max-height:40px'> "+mapText(r+"__"+g+"__1")+" <span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+h+"</i></span></p>";break;case 2:o+="<p><img class='ui-img-"+theme+"' src='img/channels/green_lamp.png' style='max-height:40px'> "+mapText(r+"__"+g+"__2")+" <span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+h+"</i></span></p>";break;case 3:o+="<p><img class='ui-img-"+theme+"' src='img/channels/orange_lamp.png' style='max-height:40px'> "+mapText(r+"__"+g+"__3")+" <span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+h+"</i></span></p>"}else if("LEVEL"===g&&"BLIND"===r)o+=addSetNumber(n,m,f,_,0,1,.01,100,h+" | 0<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("CLOSE")+", 100<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("OPEN"),!1,s),o+=addSetControlGroup(n,m,mapText("CLOSE_SHORT"),mapText("OPEN_SHORT"),h,f,s);else if("LEVEL"===g&&"WINMATIC"===r)o+=addSetNumber(n,m,f,_,-.005,1,.01,100,h+" | -0.5<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("LOCKED")+", 0<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("CLOSE")+", 100<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("OPEN"),!1,s),o+=addSetControlGroup(n,m,mapText("CLOSE_SHORT"),mapText("OPEN_SHORT"),h,f,s,addSetButton(n,m,mapText("LOCK"),-.005,h,!0,f===-.005,!1,s));else if("LEVEL"!==g||"DIMMER"!==r&&"VIRTUAL_DIMMER"!==r)if("FREQUENCY"===g&&"DIGITAL_ANALOG_OUTPUT"===r)o+=addSetNumber(n,m,f,_,0,5e4,100,1,h+" | 0<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("MAX")+", 50000<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("MIN"),!1,s),o+="<div data-role='controlgroup' data-type='horizontal'>",o+=addSetButton(n,m,mapText("MAX"),0,h,!0,0===f,!0,s),o+=addSetButton(n,m,mapText("MED"),3e4,h,!0,3e4===f,!0,s),o+=addSetButton(n,m,mapText("MIN"),5e4,h,!0,5e4===f,!0,s),o+="</div>";else if("SUBMIT"!==g||"SIGNAL_LED"!==r&&"SIGNAL_CHIME"!==r)if("ON_TIME"===g||"RAMP_TIME"===g)o+="<div class='ui-field-contain ui-grid-c'>",o+="<div class='ui-block-a'>",o+="<input type='text' data-role='datebox' data-theme='"+theme+"' data-duration-parent='"+n+"' data-id='"+m+'\' data-options=\'{"mode":"durationbox"}\'/>&nbsp;',o+="</div>",o+="<div class='ui-block-b grid-text'>",o+=mapText(r+"__"+g),o+="</div>",o+="</div>";else{var I=mapInput(r,c,h,n,s);if(""!==I)o+=I;else{var M=mapState(g,r,f,b);if("Hide"!==M){var S="",P="&nbsp;",D=1;if(""!==M)S="<span class='value"+M+" value"+M+"-"+theme+"'>"+mapText(r+"__"+g+"__"+T)+"&nbsp;<span id='unit_ "+p+"'>"+_+"</span></span>";else if("VALUE"===g)S=T+" <span id='unit_ "+p+"'>"+_+"</span>";else{("LEVEL"===g&&"AKKU"===r||"BAT_LEVEL"===g&&"POWER"===r)&&(D=100),P=mapText(r+"__"+g);var L=T;isNaN(T)&&1===D||(L=f*D),S=L+" <span id='unit_ "+p+"'>"+_+"</span>"}"-"!==P&&(o+="<p class='ui-li-desc'>",o+="<img class='ui-img-"+theme+"' src='img/channels/"+mapImage(g)+"' style='max-height:20px'>",o+="<span class='valueInfo valueInfo-"+theme+"'>"+S+" </span>&nbsp;"+P+"&nbsp;",o+="<span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+h+"</i></span>",o+="</p>")}}}else;else o+=addSetNumber(n,m,f,_,0,1,.01,100,h+" | 0<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("OFF")+", 100<span id='unit_ "+p+"'>"+_+"</span> = "+mapText("ON"),!1,s),o+=addSetControlGroup(n,m,mapText("OFF"),mapText("ON"),h,f,s)}else if("VARDP"===u){var A=c.id,E=unescape(c.info),C=unescape(c.value),_=c.valueUnit,v=c.date,h=getTimeDiffString(v,a),w=getPicKey(A,"variables",c,!1);t.varOptionsFirst="",t.varOptions=[];var k=E.indexOf("(");if(-1!==k){var F=E.indexOf(")",k);if(-1!==F){var N=E.substring(k+1,F);t.varOptions=N.split(","),t.varOptions.length>=1&&(t.varOptionsFirst=t.varOptions[0].toLowerCase())}}"nv"!==t.varOptionsFirst&&(o+="<br><h2 class='ui-li-heading'>"+unescape(c.name)+"</h2>",o+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+E+"</p>",-1!==$.inArray(w,picturesList)&&(o+="<div style='float: left; text-align: center; padding-right: 10px;'>",o+="<img id='img"+w+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../"+userFolder+"/img/ids/variables/"+w+".png?"+c.picdate+"' src='img/menu/variables.png'/>",o+="</div>"),"d"===t.varOptionsFirst||"dk"===t.varOptionsFirst||"g"===t.varOptionsFirst||"h"===t.varOptionsFirst?(excludeFromRefresh.push(A),t.addDiagram=!0,"dk"===t.varOptionsFirst?t.diagramData=c.diagrams:t.diagramData=C,t.diagramID="chart_"+A,t.diagramUnit=_,o+="g"===t.varOptionsFirst?"<div id='"+t.diagramID+"' style='height:200px; width:300px;'></div> <i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+h+"</i>":"<div id='"+t.diagramID+"' style='height:300px; width:90%;'></div> <i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+h+"</i>"):o+=addVariableField(n,A,c,h,isReadOnly(E),s))}}),""!==d.deviceHTMLPostChannelGroup){o+="<div data-role='controlgroup' data-type='horizontal'>",o+=d.deviceHTMLPostChannelGroup,o+="</div>";var p=d.PARTY_MODUS_ID,c=[d.PARTY_START_YEAR+2e3,d.PARTY_START_MONTH-1,d.PARTY_START_DAY],u=60*d.PARTY_START_TIME,m=[d.PARTY_STOP_YEAR+2e3,d.PARTY_STOP_MONTH-1,d.PARTY_STOP_DAY],g=60*d.PARTY_STOP_TIME;o+="<div class='ui-field-contain ui-grid-c control-set control-set-"+theme+"'>",o+="<div class='ui-block-a grid-text'>"+mapText("CLIMATECONTROL_RT_TRANSCEIVER__PARTY_TEMPERATURE")+"</div>",o+="<div class='ui-block-b'><input type='range' data-parent-id='"+n+"' value='"+d.PARTY_TEMPERATURE+"' min='5.0' max='30.0' step='0.5' data-factor='1' id='setTemperature_"+p+"' data-highlight='true' data-theme='"+theme+"'/></div>",o+="<div class='ui-block-c'></div>",o+="<div class='ui-block-d'></div>",o+="<div class='ui-block-a grid-text'>"+mapText("CLIMATECONTROL_RT_TRANSCEIVER__PARTY_START")+"</div>",o+="<div class='ui-block-b'><input type='text' data-parent-id='"+n+"' data-datebox-default-value='"+c+"' id='setStartDate_"+p+"' data-theme='"+theme+"' data-role='datebox' data-datebox-mode='calbox' data-datebox-use-lang='de'/></div>",o+="<div class='ui-block-c'><input type='text' data-parent-id='"+n+"' data-datebox-default-value='"+u+"' id='setStartTime_"+p+"' data-theme='"+theme+"' data-role='datebox' data-datebox-mode='timebox' data-datebox-minute-step='30' data-datebox-use-lang='de'/></div>",o+="<div class='ui-block-d'></div>",o+="<div class='ui-block-a grid-text'>"+mapText("CLIMATECONTROL_RT_TRANSCEIVER__PARTY_STOP")+"</div>",o+="<div class='ui-block-b'><input type='text' data-parent-id='"+n+"' data-datebox-default-value='"+m+"' id='setEndDate_"+p+"' data-theme='"+theme+"' data-role='datebox' data-datebox-mode='calbox' data-datebox-use-lang='de'/></div>",o+="<div class='ui-block-c'><input type='text' data-parent-id='"+n+"' data-datebox-default-value='"+g+"' id='setEndTime_"+p+"' data-theme='"+theme+"' data-role='datebox' data-datebox-mode='timebox' data-datebox-minute-step='30' data-datebox-use-lang='de'/></div>",o+="<div class='ui-block-d'></div>",o+="<div class='ui-block-a'>"+addSetButton(n,p,mapText("CLIMATECONTROL_RT_TRANSCEIVER__PARTY_MODE"),"",d.VORDATE,!0,2===d.deviceHTMLPostChannelGroupMode,!0,s,"CLIMATECONTROL_RT_TRANSCEIVER")+"</div>",o+="</div>"}else l||(o="");return o}function processDevices(e,a,t,i){var s="<li class='dataListItem' id='"+e.id+"'><h2 class='ui-li-heading'>"+unescape(e.name)+"</h2>";if("CHANNEL"===e.type)s+=addChannel(e,a,t,i);else if("VARDP"===e.type){i=!0;var r=e.id,n=unescape(e.info),l=unescape(e.value),d=e.valueUnit,o=e.date,p=getTimeDiffString(o,a),c=getPicKey(r,"variables",e,!1);t.varOptionsFirst="",t.varOptions=[];var u=n.indexOf("(");if(-1!==u){var m=n.indexOf(")",u);if(-1!==m){var g=n.substring(u+1,m);t.varOptions=g.split(","),t.varOptions.length>=1&&(t.varOptionsFirst=t.varOptions[0].toLowerCase())}}s+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+n+"</p>",-1!==$.inArray(c,picturesList)&&(s+="<div style='float: left; text-align: center; padding-right: 10px;'>",s+="<img id='img"+c+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../"+userFolder+"/img/ids/variables/"+c+".png?"+e.picdate+"' src='img/menu/variables.png'/>",s+="</div>"),"d"===t.varOptionsFirst||"dk"===t.varOptionsFirst||"g"===t.varOptionsFirst||"h"===t.varOptionsFirst?(excludeFromRefresh.push(r.toString()),t.addDiagram=!0,"dk"===t.varOptionsFirst?t.diagramData=e.diagrams:t.diagramData=l,t.diagramID="chart_"+r,t.diagramUnit=d,s+="g"===t.varOptionsFirst?"<div id='"+t.diagramID+"' style='height:200px; width:300px;'></div> <i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+p+"</i>":"<div id='"+t.diagramID+"' style='height:300px; width:90%;'></div> <i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+p+"</i>"):"nv"===t.varOptionsFirst?s="":s+=addVariableField("",r,e,p,isReadOnly(n),i)}else if("PROGRAM"===e.type){var v=e.id,h=e.info,T=e.date;p=getTimeDiffString(T,a),i=!0,s+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+h+"</p>",-1!==$.inArray(v,picturesList)&&(s+="<div style='float: left; text-align: center; padding-right: 10px;'>",s+="<img id='img"+v+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../"+userFolder+"/img/ids/programs/"+v+".png?"+e.picdate+"' src='img/menu/programs.png'/>",s+="</div>"),s+=addStartProgramButton("",v,mapText("RUN"),p,i)}return""!==s&&(s+="</li>"),s}function buttonEvents(e,a){var t=e.data("id"),i="?id="+t,s="info_"+t,r=e.data("value");if("undefined"==typeof r){var n="setValue_"+t;r=$("#"+n).val();var l=$("#"+n).data("factor");i+="undefined"!=typeof l?"&value="+parseFloat(r)/l:"&value="+r}else i+="&value="+r;var d=0,o=$("[data-duration-parent='"+e.data("parent-id")+"']");o.each(function(e){var a=$(this).datebox("getLastDur");isNaN(a)||(d=a>d?a:d,i+="&durationId"+e+"="+o.data("id")+"&durationValue"+e+"="+a)}),testSite&&(i+="&debug=true"),$("#"+s).text(mapText("TRANSFER")),$.get("cgi/set.cgi"+i,function(){isDialog?history.back():a?($("#"+s).text(mapText("TRANSFER_OK")),refreshPage(0)):$("#"+s).text(mapText("DELAY")),d>0&&setTimeout(function(){refreshPage(0)},1e3*(d+3))})}function reloadList(e,a,t,i){e.startsWith("room")||e.startsWith("func")?e=mapText(e):e.startsWith("${")?e=mapText(e.substring(2,e.length-1)):e.startsWith("%24%7B")&&(e=mapText(e.substring(6,e.length-3))),$("#"+dataListHeader).empty(),$("#"+dataListHeader).append("<li data-role='list-divider' role='heading'>"+e+"<p style='float:right;'>"+a+"</p></li>"),""!==i&&$("#"+dataListHeader).append("<li class='description'>"+i+"</li>"),$("#"+dataListHeader).listview("refresh"),$("#"+dataList).listview("refresh"),t&&$("#"+dataList).fadeIn(),$("#"+dataList).enhanceWithin()}function loadData(e,a,t){$(".buttonRefresh .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>");var i=!1;if(t){$("#"+dataList).empty(),$("#"+dataListHeader).empty(),$("#"+dataListHeader).append("<li><img src='img/misc/wait16.gif' width=12px height=12px class='ui-li-icon ui-img-"+theme+"'>"+mapText("LOADING")+"...</li>").listview("refresh"),null===localStorage.getItem(isPreRelease+"webmaticdevicesMap"+a)||"undefined"===localStorage.getItem(isPreRelease+"webmaticdevicesMap"+a)?(newVersion&&(saveDataToFile=!0),loadConfigData(!1,e+"?list="+a,"devices","webmaticdevicesMap"+a,!1,!0,null),i=!0):loadLocalStorageMap("devices",a),null===localStorage.getItem(isPreRelease+"webmaticdevicesclientMap"+a)||"undefined"===localStorage.getItem(isPreRelease+"webmaticdevicesclientMap")?""!==client&&loadConfigData(!1,"../"+userFolder+"/devices"+a+client+".json","devicesClient","webmaticdevicesclientMap"+a,!1,!0,null):devicesClientMap=JSON.parse(localStorage.getItem(isPreRelease+"webmaticdevicesclientMap"+a)),createOneMap("devices");var s=resultDevicesMap.date;$.each(resultDevicesMap.entries,function(e,a){var t=new Object;if(t.addDiagram=!1,t.diagramData="",t.diagramID="",t.diagramUnit="",t.varOptions={},t.varOptionsFirst="","false"!==a.visible){var i=processDevices(a,s,t,"false"!==a.operate);""!==i&&$("#"+dataList).append(i)}addDiagram(t)}),isGetSite&&(document.title=resultDevicesMap.name),reloadList(resultDevicesMap.name,s,t,resultDevicesMap.description),$("#"+dataList).trigger("fertig")}i||loadConfigData(!0,e+"?list="+a,"devices","webmaticdevicesMap"+a,!1,!0,function(e){var a=e.date,i="false"!==e.visible;$.each(e.entries,function(e,t){var s=new Object;s.addDiagram=!1,s.diagramData="",s.diagramID="",s.diagramUnit="",s.varOptions={},s.varOptionsFirst="";var r="";if("false"!==t.visible){if(r=processDevices(t,a,s,"false"!==t.operate),""!==r){var n=t.id;0===$("#"+n).length&&i?$("#"+dataList).append(r):i?-1===$.inArray(n.toString(),excludeFromRefresh)&&$("#"+n).replaceWith(r):0!==$("#"+n).length&&$("#"+n).remove()}addDiagram(s)}}),reloadList(e.name,a,t,e.description),$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"}),$("img").trigger("lazyLoadInstantly"),loadColorPicker&&$(".colorPicker").colorPicker(),$("#"+dataList).trigger("fertig")}),$(".buttonRefresh .ui-btn-text").html("&nbsp;"),$(".ui-input-search .ui-input-text").trigger("change"),$("[id^=button]").enhanceWithin(),$("[id^=input]").enhanceWithin(),$("textarea").textinput("refresh"),$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"}),$("img").trigger("lazyLoadInstantly"),loadColorPicker&&$(".colorPicker").colorPicker()}function loadVariables(e){if($(".buttonRefresh .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>"),e){$("#"+dataList).empty(),$("#"+dataListHeader).empty(),$("#"+dataListHeader).append("<li><img src='img/misc/wait16.gif' width=12px height=12px class='ui-li-icon ui-img-"+theme+"'>"+mapText("LOADING")+"...</li>").listview("refresh"),null===localStorage.getItem(isPreRelease+"webmaticvariablesMap")||"undefined"===localStorage.getItem(isPreRelease+"webmaticvariablesMap")?(newVersion&&(saveDataToFile=!0),loadConfigData(!1,"../"+userFolder+"/variables.json","variables","webmaticvariablesMap",!1,!1)):loadLocalStorageMap("variables"),null===localStorage.getItem(isPreRelease+"webmaticvariablesclientMap")||"undefined"===localStorage.getItem(isPreRelease+"webmaticvariablesclientMap")?""!==client&&loadConfigData(!1,"../"+userFolder+"/variables"+client+".json","variablesClient","webmaticvariablesclientMap",!1,!0):variablesClientMap=JSON.parse(localStorage.getItem(isPreRelease+"webmaticvariablesclientMap")),createOneMap("variables");var a=resultVariablesMap.date,t={};$.each(resultVariablesMap,function(e,i){if(!("date"===e||"size"===e||"divisors"===e||divisorClick&&i.variables_divisor!==lastClickID)){var s=processVariable(i,e,a);resultOptionsMap.default_sort_manually?t[parseInt(i.position)]=s:t[i.name.toLowerCase()]=s}});var i;i=resultOptionsMap.default_sort_manually?Object.keys(t).sort(function(e,a){return e-a}):Object.keys(t).sort();for(var s=i.length,r=0;s>r;r++){var n=i[r];$("#"+dataList).append(t[n])}reloadList(mapText("VARIABLES"),a,e,""),$("#"+dataList).trigger("fertig")}loadConfigData(!0,"cgi/variables.cgi","variables","webmaticvariablesMap",!1,!0,function(){createOneMap("variables");var a=resultVariablesMap.date;$.each(resultVariablesMap,function(e,t){"date"===e||"size"===e||"divisors"===e||divisorClick&&t.variables_divisor!==lastClickID||(0===$("#"+e).length?$("#"+dataList).append(processVariable(t,e,a)):$("#"+e).replaceWith(processVariable(t,e,a)))}),reloadList(mapText("VARIABLES"),a,e,""),$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"}),$("img").trigger("lazyLoadInstantly"),loadColorPicker&&$(".colorPicker").colorPicker(),$("#"+dataList).trigger("fertig")}),$(".buttonRefresh .ui-btn-text").html("&nbsp;"),$(".ui-input-search .ui-input-text").trigger("change"),$("textarea").textinput("refresh"),$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"}),$("img").trigger("lazyLoadInstantly"),loadColorPicker&&$(".colorPicker").colorPicker()}function loadPrograms(e){if($(".buttonRefresh .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>"),e){$("#"+dataList).empty(),$("#"+dataListHeader).empty(),$("#"+dataListHeader).append("<li><img src='img/misc/wait16.gif' width=12px height=12px class='ui-li-icon ui-img-"+theme+"'>"+mapText("LOADING")+"...</li>").listview("refresh"),null===localStorage.getItem(isPreRelease+"webmaticprogramsMap")||"undefined"===localStorage.getItem(isPreRelease+"webmaticprogramsMap")?(newVersion&&(saveDataToFile=!0),loadConfigData(!1,"../"+userFolder+"/programs.json","programs","webmaticprogramsMap",!1,!1)):loadLocalStorageMap("programs"),null===localStorage.getItem(isPreRelease+"webmaticprogramsclientMap")||"undefined"===localStorage.getItem(isPreRelease+"webmaticprogramsclientMap")?""!==client&&loadConfigData(!1,"../"+userFolder+"/programs"+client+".json","programsClient","webmaticprogramsclientMap",!1,!0):programsClientMap=JSON.parse(localStorage.getItem(isPreRelease+"webmaticprogramsclientMap")),createOneMap("programs");var a=resultProgramsMap.date,t={};$.each(resultProgramsMap,function(e,i){if(!("date"===e||"size"===e||"divisors"===e||divisorClick&&i.programs_divisor!==lastClickID)){var s=i.visible,r=i.active,n=e,l=processProgram(i,n,a,r,readModus&&s||!readModus);resultOptionsMap.default_sort_manually?t[parseInt(i.position)]=l:t[i.name.toLowerCase()]=l}});var i;i=resultOptionsMap.default_sort_manually?Object.keys(t).sort(function(e,a){return e-a}):Object.keys(t).sort();for(var s=i.length,r=0;s>r;r++){var n=i[r];$("#"+dataList).append(t[n])}reloadList(mapText("PROGRAMS"),a,e,""),$("#"+dataList).find(".btnDisabled").button("disable"),$("#"+dataList).trigger("fertig")}loadConfigData(!0,"cgi/programs.cgi","programs","webmaticprogramsMap",!1,!0,function(){createOneMap("programs");var a=resultProgramsMap.date;$.each(resultProgramsMap,function(e,t){if(!("date"===e||"size"===e||"divisors"===e||divisorClick&&t.programs_divisor!==lastClickID)){var i=t.visible,s=t.active,r=e;0===$("#"+r).length?$("#"+dataList).append(processProgram(t,r,a,s,readModus&&i||!readModus)):$("#"+r).replaceWith(processProgram(t,r,a,s,readModus&&i||!readModus))}}),reloadList(mapText("PROGRAMS"),a,e,""),$("#"+dataList).find(".btnDisabled").button("disable"),$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"
}),$("img").trigger("lazyLoadInstantly"),$("#"+dataList).trigger("fertig")}),$(".buttonRefresh .ui-btn-text").html("&nbsp;"),$(".ui-input-search .ui-input-text").trigger("change"),$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"}),$("img").trigger("lazyLoadInstantly")}$(function(){debugModus,1,$.jqplot.config.enablePlugins=!0,$(document).bind("mobileinit",function(){$.mobile.listview.prototype.options.filterPlaceholder=mapText("FILTER")}),$(document.body).on("click","[id^=setButton]",function(){var e=$(this),a=e.data("special");if(a){var t=e.data("id");switch(a){case"CLIMATECONTROL_RT_TRANSCEIVER":var i=$("#setTemperature_"+t).val(),s=$("#setStartTime_"+t).datebox("getTheDate"),r=$("#setStartDate_"+t).datebox("getTheDate"),n=60*s.getHours()+s.getMinutes(),l=r.getDate(),d=r.getMonth()+1,o=r.getYear()-100,p=$("#setEndTime_"+t).datebox("getTheDate"),c=$("#setEndDate_"+t).datebox("getTheDate"),u=60*p.getHours()+p.getMinutes(),m=c.getDate(),g=c.getMonth()+1,v=c.getYear()-100;e.attr("data-value",i+","+n+","+l+","+d+","+o+","+u+","+m+","+g+","+v)}}buttonEvents(e,e.data("refresh"),a)}),$(document.body).on("click","[id^=setValueBigList]",function(){var e=$(this),a=e.data("id");e.attr("data-value",$("#selector_"+a).val()),buttonEvents(e,e.data("refresh"))}),$(document.body).on("click","[id^=setTextButton]",function(){var e=$(this).data("id"),a="setValue_"+e,t="info_"+e,i=$("#"+a).val();i=i.replace(/\"/g,"'"),i=encodeURIComponent(i);var s="";testSite&&(s+="&debug=true"),$("#"+t).text(mapText("TRANSFER")),$.get("cgi/set.cgi?id="+e+"&value="+i+s,function(){isDialog?history.back():($("#"+t).text(mapText("TRANSFER_OK")),refreshPage(0))})}),$(document.body).on("click","[id^=startProgramButton]",function(){var e=$(this).data("id"),a="info_"+e,t="";testSite&&(t+="&debug=true"),$("#"+a).text("START"),$.get("cgi/startprogram.cgi?id="+e+t,function(){$("#"+a).text(mapText("TRANSFER_OK"))})}),$(document.body).on("click",".onlyPic:not(.onlyPicDisabled)",function(){var e=$(this).data("id");$("#player"+e).removeClass("onlyPic-player-"+theme).addClass("onlyPic-playerani-"+theme);var a=$(this).data("type"),t=$(this).data("unit"),i=testSite?"&debug=true":"";testSite&&(i+="&debug=true");var s=$(this).data("value"),r=$(this).data("name"),n=$(this).data("date");if("programs"===a)$.get("cgi/startprogram.cgi?id="+e+i,function(){$("#player"+e).delay(3e3).removeClass("onlyPic-playerani-"+theme).addClass("onlyPic-player-"+theme)});else if("variables2"===a)""===s&&(s=!1),$.get("cgi/set.cgi?id="+e+"&value="+!s+i,function(){refreshPage(0)});else if("variables4"===a){var l=$(this).data("faktor");l||(l=1);var d=$(this).data("min"),o=$(this).data("max"),p=$(this).data("step");p||(p=1),openOnlyPicDialog(r,addSetNumber("",e,s,t,d,o,p,l,n,!0,!0))}else if("variables16"===a){var c=$(this).data("list"),u=$(this).data("listtype");u||(u="auto"),openOnlyPicDialog(r,addSetValueList("",e,s,c,t,n,!0,!0,u,!1))}else if("variables20"===a){s=$("#textValue"+e).text();var m,g=$(this).data("operate"),v="";g?t&&"COLOR"===t.toUpperCase()?(v=addColorPicker("",e,s,n,g),m=function(){$(".colorPicker").colorPicker()}):v=t&&"DATE"===t.toUpperCase()?addDatePicker("",e,s,n,g,"datebox"):t&&"TIME"===t.toUpperCase()?addDatePicker("",e,s,n,g,"timebox"):addSetText("",e,s,t,n,g):v=addReadonlyVariable(e,s,n,"20",t),openOnlyPicDialog(r,v,m)}}),$(document.body).on("click","[id^=saveHistorianData]",function(){var e=$(this),a=e.data("id");e.attr("data-value",$("#hisHistorianID_"+a).val()+";"+$("#hisHMID_"+a).val()+";"+$("#hisDuration_"+a).val()+$("#hisSelector_"+a).val()),buttonEvents(e,!0)}),$(document.body).on("click","[id^=saveTuneInRadioData]",function(){var e=$(this),a=e.data("id");e.attr("data-value",$("#tuneInURL_"+a).val()),buttonEvents(e,!0)}),$(document.body).on("click","[name=showTuneIn]",function(){var e=$(this),a=e.data("id"),t=$("#saveTuneInRadioData_"+a).data("value");e.fadeOut(500,function(){e.attr("name","editTuneIn"),void 0!==t&&e.attr("data-val",t),e.removeClass("ui-icon-eye").addClass("ui-icon-edit").fadeIn(1e3)});var i=e.data("parentId"),s=e.data("vorDate");$("#tuneInField_"+a).fadeOut(500,function(){$("#tuneInField_"+a).html(getTuneIn(i,a,t,s)),$("#"+a).enhanceWithin(),$("#tuneInField_"+a).fadeIn(1e3)})}),$(document.body).on("click","[name=editTuneIn]",function(){var e=$(this);e.fadeOut(500,function(){e.attr("name","showTuneIn"),e.removeClass("ui-icon-edit").addClass("ui-icon-eye").fadeIn(1e3)});var a=e.data("parentId"),t=e.data("id"),i=e.data("val"),s=e.data("vorDate");$("#tuneInField_"+t).fadeOut(500,function(){$("#tuneInField_"+t).html(editTuneIn(a,t,i,s)),$("#"+t).enhanceWithin(),$("#tuneInField_"+t).fadeIn(1e3)})}),$(document.body).on("fertig","#dataList,#dataList2",function(){$("#"+dataList).hasClass("column-1")||setTimeout(function(){calcHight()},twoPage?500:0)}),$(window).on("beforeunload",function(){return mustBeSaved&&saveAllDatasToServer(),!debugModus&&resultOptionsMap.dont_leave?"Don't leave me!":void 0}),$(document).on("scroll",window,function(){$(this).scrollTop()>300?$(".cd-top").addClass("cd-is-visible"):$(".cd-top").removeClass("cd-is-visible cd-fade-out"),$(this).scrollTop()>1200&&$(".cd-top").addClass("cd-fade-out")}),$(".cd-top").on("click",function(e){e.preventDefault(),$("body,html").animate({scrollTop:0},700)})});