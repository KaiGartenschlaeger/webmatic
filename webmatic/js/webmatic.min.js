
function refreshPage(item,col){restartTimer();testSite=false;if(lastClickType!==-1&&lastClickID!==-1){var restart=oldID!==lastClickID&&item!==0;oldID=lastClickID;if(restart){if(!col){col=resultOptionsMap.columns}changeNumberOfColumns(col,false);if(item!==0){if(prevItem!==0){prevItem.find(".ui-btn").removeClass("ui-btn-active")}item.find(".ui-btn").addClass("ui-btn-active");prevItem=item}excludeFromRefresh.length=0;$("#"+dataList).hide()}switch(lastClickType){case 1:loadData("cgi/list.cgi",lastClickID,restart);break;case 2:loadVariables(restart);break;case 3:loadPrograms(restart);break;case 4:loadGraphicIDs("favorites");break;case 5:testSite=true;loadData("debug/debug.json","a",restart);break;case 6:testSite=true;loadData("debug/debug_cuxd.json","b",restart);break;case 7:loadOptions();break;case 8:loadGraphicIDs("rooms");break;case 9:loadGraphicIDs("functions");break;case 10:loadGraphicIDs("programs");break;case 11:loadOptionsClient();break;case 12:loadGraphicIDs("variables");break}$(".evalScript").each(function(){var valID=$(this).data("id");if($.inArray(valID.toString(),excludeFromRefresh)===-1){excludeFromRefresh.push(valID.toString());$(this).find("script").each(function(){var src=$(this).attr("src");if(src){try{$.getScript(src)}catch(err){log(err,2)}}else{try{eval($(this).text())}catch(err){log(err,2)}}})}})}}function refreshServiceMessages(){$(".buttonService .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>");$.getJSON("cgi/service.cgi",function(b){$("#serviceList").empty();var a=0;$.each(b.entries,function(f,e){var k=e.name;var g=e.type;var j=e.device;var l=e.error;var d=e.value;var c=e.date;var h=getErrorMessage(g,l,d,j);$("#serviceList").append("<li><p class='ui-li-desc' style='text-align:right;'>"+c+"</p><h1>"+k+"</h1><p>"+h+"</p></li>");a+=1});if(webmaticVersion!==newWebmaticVersion){$("#serviceList").append("<li><p class='ui-li-desc' style='text-align:right;'>"+dateNow+"</p><h1>"+mapText("NEW_VERSION")+"</h1><p><span class='valueInfo valueInfo-"+theme+"'><a href='https://github.com/jens-maus/webmatic/releases' target='_blank' >Webmatic "+newWebmaticVersion+" "+mapText("DOWNLOAD")+"</a></span></p></li>");a+=1}$(".buttonService .ui-btn-text").text("("+a+")");if(a===0){$(".buttonService, #popupDiv").removeClass(function(d,c){return(c.match(/(^|\s)valueService-(\S{3}|\S{1})/g)||[]).join(" ")});$("#headerButtonGroup"+(page2?"2":"")).controlgroup("refresh",true);$("#serviceList").append("<li><p>"+mapText("NO_SERVICE_MESSAGES")+"</p></li>")}else{$(".buttonService, #popupDiv").addClass("valueService-"+theme);$("#headerButtonGroup"+(page2?"2":"")).controlgroup("refresh",true)}$("#serviceList").listview("refresh",true)})}function removeMessages(){newWebmaticVersion=webmaticVersion;$.ajax("cgi/removemessages.cgi")}function processVariable(d,j,a){var l=unescape(d.value);var h=d.valueType;var k=d.valueUnit;var m=getTimeDiffString(d.date,a);var b=unescape(d.info);var f=checkOperate(d.operate);var c=getPicKey(j,"variables",d,false);var g="<li class='dataListItem' id='"+j+"' "+(d.visible?"":"style='display: none;'")+">";g+="<h2 class='ui-li-heading'>"+unescape(d.name)+"</h2>";if(d.onlyPic&&(!f||h==="2")){var e="data-id='"+j+"' data-value='"+l+"' data-type='variables"+h+"' class='onlyPic"+(!f?" onlyPicDisabled":"")+"'";g+="<div "+(f?"class='onlyPicDiv'":e)+">";if(f){g+="<a href='#' "+e+">"}g+="<img id='img"+j+"' class='ui-img-"+theme+" lazyLoadImage' data-original='../webmatic_user/img/ids/variables/"+c+".png' src='img/menu/variables.png'/>";if(f){g+="</a>";g+="<div class='onlyPic-player onlyPic-player-"+theme+"' id='player"+j+"'>&nbsp;</div>"}else{if(h==="4"){g+="<div class='onlyPic-value valueInfo-"+theme+"'>"+parseFloat(l)+k+"</div>"}}g+="</div>"}else{g+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+b+"</p>";if($.inArray(c,picturesList)!==-1){g+="<div style='float: left; text-align: center; padding-right: 10px;'>";g+="<img id='img"+c+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../webmatic_user/img/ids/variables/"+c+".png' src='img/menu/variables.png'/>";g+="</div>"}if(!f){g+=addReadonlyVariable(j,l,m,h,k,d.valueList,d.valueName0,d.valueName1,d.faktor)}else{if(h==="2"){g+=addSetBoolButtonList("",j,l,d.valueName0,d.valueName1,k,m,true,f)}else{if(h==="4"){g+=addSetNumber("",j,l,k,d.valueMin,d.valueMax,d.step?d.step:1,d.faktor?d.faktor:1,m,true,f)}else{if(h==="16"){g+=addSetValueList("",j,l,d.valueList,k,m,true,f,d.listType)}else{if(h==="20"&&k.toUpperCase()==="HTML"){g+=addHTML("",j,l,m,false)}else{if(h==="20"&&k.toUpperCase()==="HISTORIAN"){g+=addHistorianDiagram("",j,l,m,false)}else{if(h==="20"&&k.toUpperCase()==="TUNEIN"){g+=addTuneInRadio("",j,l,m,false)}else{if(h==="20"){g+=addSetText("",j,l,k,m,f)}else{g+=mapText("UNKNOWN_VAR_TYPE")+"!"}}}}}}}}}g+="</li>";return g}function processProgram(g,d,c,f,h){var b="<li class='dataListItem' id='"+d+"' "+(h?"":"style='display: none;'")+">";b+="<h2 class='ui-li-heading'>"+g.name+"</h2>";if(g.onlyPic){var a=(g.operate||!readModus);var e="data-id='"+d+"' data-type='programs' class='onlyPic"+(!a?" onlyPicDisabled":"")+"'";b+="<div "+(a?"class='onlyPicDiv'":e)+">";if(a){b+="<a href='#' "+e+">"}b+="<img id='img"+d+"' class='ui-img-"+theme+" lazyLoadImage' data-original='../webmatic_user/img/ids/programs/"+d+".png' src='img/menu/programs.png'/>";if(a){b+="<div class='onlyPic-player onlyPic-player-"+theme+"' id='player"+d+"'>&nbsp;</div>";b+="</a>"}b+="</div>"}else{b+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+g.info+(!f?" ("+mapText("MANUAL")+")":"")+"</p>";if($.inArray(d,picturesList)!==-1){b+="<div style='float: left; text-align: center; padding-right: 10px;'>";b+="<img id='img"+d+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../webmatic_user/img/ids/programs/"+d+".png' src='img/menu/programs.png'/>";b+="</div>"}b+=addStartProgramButton("",d,mapText("RUN"),getTimeDiffString(g.date,c),(g.operate||!readModus))}b+="</li>";return b}function getErrorMessage(c,d,f,b){var a="";if(c==="ALARMDP"){var e;if(d==="CONFIG_PENDING"||d==="STICKY_UNREACH"){e="Info"}else{if(d==="LOWBAT"){e="Warning"}else{e="Error"}}return"<span class='value"+e+" value"+e+"-"+theme+"'>"+mapText(c+"__"+d)+"</span>"}else{if(c==="HSSDP"){a=mapText(b+"__"+d+"__"+f);if(a!==""&&a!=="-"){return"<span class='valueError valueError-"+theme+"'>"+a+"</span>"}}}if(a===""){a="<span class='valueError valueError-"+theme+"'>"+mapText("UNKNOWN_ERROR")+": "+f+"</span>"}return a}function addDiagram(z){if(z.addDiagram){$("#"+dataList).listview("refresh");var B="l";var Z="69A5CF";var O="";var q="";var x=1;var S="0/#008800";var b="30/#AA4400";for(var X=0;X<z.varOptions.length;X++){var J=z.varOptions[X].split("=");if(J.length===2){if(J[0]==="t"){B=J[1]}else{if(J[0]==="c"){Z=J[1]}else{if(J[0]==="l"){O=J[1]}else{if(J[0]==="h"){q=J[1]}else{if(J[0]==="k"){x=parseInt(J[1])}else{if(J[0]==="s"){S=J[1]}else{if(J[0]==="e"){b=J[1]}}}}}}}}}if(z.varOptionsFirst==="g"){var m=parseFloat(z.diagramData);var R=S.split("/");var H=parseFloat(R[0]);var p=R[1];if(m<H){H=m}var g=b.split("/");var d=parseFloat(g[0]);var F=g[1];if(m>d){d=m}var a=parseInt(p.substring(1,3),16);var w=parseInt(p.substring(3,5),16);var Q=parseInt(p.substring(5,7),16);var T=parseInt(F.substring(1,3),16);var s=parseInt(F.substring(3,5),16);var o=parseInt(F.substring(5,7),16);var C=[];var U=[];var P=10;for(var X=1;X<=P;X++){var aa=X/P;var L=H+aa*(d-H);C.push(L);aa=(X-1)/(P-1);var A=Math.floor(a+aa*(T-a)).toString(16);if(A.length<2){A="0"+A}var E=Math.floor(w+aa*(s-w)).toString(16);if(E.length<2){E="0"+E}var I=Math.floor(Q+aa*(o-Q)).toString(16);if(I.length<2){I="0"+I}var ab="#"+A+E+I;U.push(ab)}var G=[z.diagramData];$.jqplot(z.diagramID,[G],{seriesDefaults:{renderer:$.jqplot.MeterGaugeRenderer,rendererOptions:{label:z.diagramData+" "+z.diagramUnit,labelPosition:"bottom",labelHeightAdjust:-5,min:H,max:d,intervals:C,intervalColors:U,smooth:true,animation:{show:true}}},grid:{backgroundColor:"transparent"}})}else{if(z.varOptionsFirst==="h"){var u=z.diagramData.split(";");var l=u[0];if(l>0){var n=new Array();n[0]=new Array();n[1]=new Array();n[2]=new Array();n[3]=new Array();n[4]=new Array();var W=0;var y;if(O===""){y=15}else{y=parseFloat(O)}var k;if(q===""){k=23}else{k=parseFloat(q)}var M="";var V="";for(var X=1;X<=l;X++){var N=u[X];var K=N.split(",");var ad=K[0];if(M===""||ad<M){M=ad}if(V===""||ad>V){V=ad}for(W=1;W<K.length;W++){var D=new Array();D[0]=ad;var ac=K[W];D[1]=ac;n[W-1][X-1]=D}}}$.jqplot(z.diagramID,[n[0],n[1],n[2],n[3],n[4]],{axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,tickRenderer:$.jqplot.CanvasAxisTickRenderer,tickOptions:{formatString:"%a, %#d %#H:%M",angle:20},min:M,max:V},yaxis:{min:y,max:k,showLabel:true,tickOptions:{formatString:"%."+x+"f&deg;C"}},y2axis:{min:0,max:100,showLabel:true,tickOptions:{formatString:"%d%"}}},legend:{show:false,fontSize:23,placement:"outside",location:"e"},seriesDefaults:{lineWidth:2,showMarker:false,fill:false,shadow:false},series:[{label:"Soll",color:"#555555",fill:true,fillAlpha:0.1},{label:"Ist",color:"#DD0000"},{label:"relF%",color:"#0174DF",yaxis:"y2axis",lineWidth:1},{label:"Ventil",color:"#777777",yaxis:"y2axis",lineWidth:1},{label:"Ventil",color:"#777777",yaxis:"y2axis"}],highlighter:{show:true,sizeAdjust:5.5},cursor:{zoom:true,show:true},grid:{backgroundColor:"#F4F4F4"},animated:true})}else{if(B==="l"||B==="f"){u=z.diagramData.split(",");l=u.length;if(l>=3){n=new Array();W=0;y=1000000;k=-1000000;M="";V="";for(var X=1;X<l;X=X+2){ad=u[X];ac=u[X+1];var h=new Array();h[0]=ad;L;if(ac==="true"){L=1}else{if(ac==="false"){L=0}else{L=parseFloat(ac)}}h[1]=L;if(L<y){y=L}if(L>k){k=L}if(M===""||ad<M){M=ad}if(V===""||ad>V){V=ad}n[W]=h;W++}if(O===""){y=y-0.1*(k-y)}else{if(O==="m"){}else{var r=parseFloat(O);if(r<y){y=r}}}if(q===""){k=k+0.1*(k-y)}else{if(q==="m"){}else{var Y=parseFloat(q);if(Y>k){k=Y}}}var e;if(B==="l"){e=false}else{e=true}$.jqplot(z.diagramID,[n],{axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,tickRenderer:$.jqplot.CanvasAxisTickRenderer,tickOptions:{formatString:"%b %#d, %#H:%M",angle:20},min:M,max:V},yaxis:{min:y,max:k,tickOptions:{formatString:"%."+x+"f"+z.diagramUnit}}},seriesDefaults:{rendererOptions:{smooth:true}},series:[{color:"#"+Z,lineWidth:2,showMarker:false,fill:e}],highlighter:{show:true,sizeAdjust:5.5},cursor:{show:false},grid:{backgroundColor:"#F4F4F4"},animated:true})}}}}}}function addChannel(c,a,o,h){var d=c.hssType;var m=c.id;var g=false;var n=[];n.deviceHTMLPostChannelGroup="";n.deviceHTMLPostChannelGroupMode=0;var l="";$.each(c.channels,function(J,V){g=true;var t=V.type;if(t==="HSSDP"){var N=V.id;var u=V.hssType;var I=V.date;var R=getTimeDiffString(I,a);var F=V.value;var r=parseFloat(V.value);var q=(F==="true");var s=mapUnit(V.valueUnit,u);var A=parseFloat(V.valueMin);var C=parseFloat(V.valueMax);if(u==="SETPOINT"||u==="SET_TEMPERATURE"){l+=addSetNumber(m,N,r,s,6,30,0.5,1,R,false,h);var G=r-3;var p=G+6;if(G<A){G=A;p=11}if(p>C){G=25;p=C}l+="<div data-role='controlgroup' data-type='horizontal'>";if(u==="SETPOINT"){l+=addSetButton(m,N,mapText(d+"__"+u+"__VENT_CLOSED"),0,R,true,0===r,false,h)}for(i=G;i<=p;i+=1){l+=addSetButton(m,N,i+s,i,R,true,i===r,false,h)}if(u==="SETPOINT"){l+=addSetButton(m,N,mapText(d+"__"+u+"__VENT_OPEN"),100,R,true,100===r,false,h)}l+="</div>"}else{if(d==="CLIMATECONTROL_RT_TRANSCEIVER"&&(u.endsWith("MODE")||u.startsWith("PARTY"))){if(u==="CONTROL_MODE"){n.deviceHTMLPostChannelGroupMode=r}else{if(u==="AUTO_MODE"){n.deviceHTMLPostChannelGroup+=addSetButton(m,N,mapText(d+"__"+u),true,R,true,n.deviceHTMLPostChannelGroupMode===0,true,h)}else{if(u==="MANU_MODE"){n.deviceHTMLPostChannelGroup+=addSetButton(m,N,mapText(d+"__"+u),true,R,true,n.deviceHTMLPostChannelGroupMode===1,true,h)}else{if(u==="BOOST_MODE"){n.deviceHTMLPostChannelGroup+=addSetButton(m,N,mapText(d+"__"+u),true,R,true,n.deviceHTMLPostChannelGroupMode===3,true,h)}else{if(u==="LOWERING_MODE"||u==="COMFORT_MODE"){n.deviceHTMLPostChannelGroup+=addSetButton(m,N,mapText(d+"__"+u),true,R,true,false,true,h)}else{if(u==="PARTY_TEMPERATURE"){n.PARTY_TEMPERATURE=r}else{if(u==="PARTY_START_TIME"){n.PARTY_START_TIME=parseInt(F)}else{if(u==="PARTY_START_DAY"){n.PARTY_START_DAY=parseInt(F)}else{if(u==="PARTY_START_MONTH"){n.PARTY_START_MONTH=parseInt(F)}else{if(u==="PARTY_START_YEAR"){n.PARTY_START_YEAR=parseInt(F)}else{if(u==="PARTY_STOP_TIME"){n.PARTY_STOP_TIME=parseInt(F)}else{if(u==="PARTY_STOP_DAY"){n.PARTY_STOP_DAY=parseInt(F)}else{if(u==="PARTY_STOP_MONTH"){n.PARTY_STOP_MONTH=parseInt(F)}else{if(u==="PARTY_STOP_YEAR"){n.PARTY_STOP_YEAR=parseInt(F)}else{if(u==="PARTY_MODE_SUBMIT"){n.PARTY_MODE_ID=N;n.VORDATE=R}}}}}}}}}}}}}}}}else{if(u==="PROGRAM"&&d==="RGBW_AUTOMATIC"){l+="<div data-role='controlgroup' data-type='horizontal'>";l+=addSetButton(m,N,mapText(d+"__"+u+"__0"),0,R,true,r===0,true,h);l+=addSetButton(m,N,mapText(d+"__"+u+"__1"),1,R,true,r===1,true,h);l+=addSetButton(m,N,mapText(d+"__"+u+"__2"),2,R,true,r===2,true,h);l+=addSetButton(m,N,mapText(d+"__"+u+"__3"),3,R,true,r===3,true,h);l+=addSetButton(m,N,mapText(d+"__"+u+"__4"),4,R,true,r===4,true,h);l+=addSetButton(m,N,mapText(d+"__"+u+"__5"),5,R,true,r===5,true,h);l+=addSetButton(m,N,mapText(d+"__"+u+"__6"),6,R,true,r===6,true,h);l+="</div>"}else{if(u==="COLOR"&&d==="RGBW_COLOR"){l+="<span class='RGBW-Color'>";l+=addSetNumber(m,N,r,s,0,200,1,1,R,true,h);l+="</span>"}else{if(u==="LED_STATUS"&&d==="KEY"){switch(r){case 0:l+="<p><img class='ui-img-"+theme+"' src='img/channels/off_lamp.png' style='max-height:40px'> "+mapText(d+"__"+u+"__0")+" <span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+R+"</i></span></p>";break;case 1:l+="<p><img class='ui-img-"+theme+"' src='img/channels/red_lamp.png' style='max-height:40px'> "+mapText(d+"__"+u+"__1")+" <span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+R+"</i></span></p>";break;case 2:l+="<p><img class='ui-img-"+theme+"' src='img/channels/green_lamp.png' style='max-height:40px'> "+mapText(d+"__"+u+"__2")+" <span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+R+"</i></span></p>";break;case 3:l+="<p><img class='ui-img-"+theme+"' src='img/channels/orange_lamp.png' style='max-height:40px'> "+mapText(d+"__"+u+"__3")+" <span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+R+"</i></span></p>";break}}else{if(u==="LEVEL"&&d==="BLIND"){l+=addSetNumber(m,N,r,s,0,1,0.01,100,R+" | 0<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("CLOSE")+", 100<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("OPEN"),false,h);l+=addSetControlGroup(m,N,mapText("CLOSE_SHORT"),mapText("OPEN_SHORT"),R,r,h)}else{if(u==="LEVEL"&&d==="WINMATIC"){l+=addSetNumber(m,N,r,s,-0.005,1,0.01,100,R+" | -0.5<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("LOCKED")+", 0<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("CLOSE")+", 100<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("OPEN"),false,h);l+=addSetControlGroup(m,N,mapText("CLOSE_SHORT"),mapText("OPEN_SHORT"),R,r,h,addSetButton(m,N,mapText("LOCK"),-0.005,R,true,r===-0.005,false,h))}else{if(u==="LEVEL"&&(d==="DIMMER"||d==="VIRTUAL_DIMMER")){l+=addSetNumber(m,N,r,s,0,1,0.01,100,R+" | 0<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("OFF")+", 100<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("ON"),false,h);l+=addSetControlGroup(m,N,mapText("OFF"),mapText("ON"),R,r,h)}else{if(u==="FREQUENCY"&&d==="DIGITAL_ANALOG_OUTPUT"){l+=addSetNumber(m,N,r,s,0,50000,100,1,R+" | 0<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("MAX")+", 50000<span id='unit_ "+b+"'>"+s+"</span> = "+mapText("MIN"),false,h);l+="<div data-role='controlgroup' data-type='horizontal'>";l+=addSetButton(m,N,mapText("MAX"),0,R,true,r===0,true,h);l+=addSetButton(m,N,mapText("MED"),30000,R,true,r===30000,true,h);l+=addSetButton(m,N,mapText("MIN"),50000,R,true,r===50000,true,h);l+="</div>"}else{if(u==="SUBMIT"&&(d==="SIGNAL_LED"||d==="SIGNAL_CHIME")){}else{if(u==="ON_TIME"||u==="RAMP_TIME"){l+="<div class='ui-field-contain ui-grid-c'>";l+="<div class='ui-block-a'>";l+="<input type='text' data-role='datebox' data-theme='"+theme+"' data-duration-parent='"+m+"' data-id='"+N+'\' data-options=\'{"mode":"durationbox"}\'/>&nbsp;';l+="</div>";l+="<div class='ui-block-b grid-text'>";l+=mapText(d+"__"+u);l+="</div>";l+="</div>"}else{var E=mapInput(d,V,R,m,h);if(E!==""){l+=E}else{var H=mapState(u,d,r,q);if(H!=="Hide"){var M="";var U="&nbsp;";var L=1;if(H!==""){M="<span class='value"+H+" value"+H+"-"+theme+"'>"+mapText(d+"__"+u+"__"+F)+"&nbsp;<span id='unit_ "+b+"'>"+s+"</span></span>"}else{if(u==="VALUE"){M=F+" <span id='unit_ "+b+"'>"+s+"</span>"}else{if((u==="LEVEL"&&d==="AKKU")||(u==="BAT_LEVEL"&&d==="POWER")){L=100}U=mapText(d+"__"+u);var B=F;if(!isNaN(F)||L!==1){B=r*L}M=B+" <span id='unit_ "+b+"'>"+s+"</span>"}}if(U!=="-"){l+="<p class='ui-li-desc'>";l+="<img class='ui-img-"+theme+"' src='img/channels/"+mapImage(u)+"' style='max-height:20px'>";l+="<span class='valueInfo valueInfo-"+theme+"'>"+M+" </span>&nbsp;"+U+"&nbsp;";l+="<span><i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+R+"</i></span>";l+="</p>"}}}}}}}}}}}}}}}else{if(t==="VARDP"){var w=V.id;var y=unescape(V.info);var O=unescape(V.value);var K=V.valueType;s=V.valueUnit;var S=V.valueName0;var Q=V.valueName1;var x=V.valueList;I=V.date;R=getTimeDiffString(I,a);var D=getPicKey(w,"variables",V,false);o.varOptionsFirst="";o.varOptions=[];var z=y.indexOf("(");if(z!==-1){var T=y.indexOf(")",z);if(T!==-1){var P=y.substring(z+1,T);o.varOptions=P.split(",");if(o.varOptions.length>=1){o.varOptionsFirst=o.varOptions[0].toLowerCase()}}}if(o.varOptionsFirst!=="nv"){l+="<br><h2 class='ui-li-heading'>"+unescape(V.name)+"</h2>";l+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+y+"</p>";if($.inArray(D,picturesList)!==-1){l+="<div style='float: left; text-align: center; padding-right: 10px;'>";l+="<img id='img"+D+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../webmatic_user/img/ids/variables/"+D+".png' src='img/menu/variables.png'/>";l+="</div>"}if(isReadOnly(y)){l+=addReadonlyVariable(w,O,R,K,s,x,S,Q,1)}else{if(o.varOptionsFirst==="d"||o.varOptionsFirst==="dk"||o.varOptionsFirst==="g"||o.varOptionsFirst==="h"){excludeFromRefresh.push(w);o.addDiagram=true;if(o.varOptionsFirst==="dk"){o.diagramData=V.diagrams}else{o.diagramData=O}o.diagramID="chart_"+w;o.diagramUnit=s;if(o.varOptionsFirst==="g"){l+="<div id='"+o.diagramID+"' style='height:200px; width:300px;'></div> <i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+R+"</i>"}else{l+="<div id='"+o.diagramID+"' style='height:300px; width:90%;'></div> <i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+R+"</i>"}}else{if(K==="2"){l+=addSetBoolButtonList(m,w,O,S,Q,s,R,true,h)}else{if(K==="4"){l+=addSetNumber(m,w,O,s,A,C,0.001,1,R,true,h)}else{if(K==="16"){l+=addSetValueList(m,w,O,x,s,R,true,h)}else{if(K==="20"&&s.toUpperCase()==="HTML"){l+=addHTML(m,w,O,R,false)}else{if(K==="20"&&s.toUpperCase()==="HISTORIAN"){l+=addHistorianDiagram(m,w,O,R,false)}else{if(K==="20"&&s.toUpperCase()==="TUNEIN"){l+=addTuneInRadio(m,w,O,R,false)}else{if(K==="20"){l+=addSetText(m,w,O,s,R,h)}else{l+=mapText("UNKNOWN_VAR_TYPE")+"!"}}}}}}}}}}}}});if(n.deviceHTMLPostChannelGroup!==""){l+="<div data-role='controlgroup' data-type='horizontal'>";l+=n.deviceHTMLPostChannelGroup;l+="</div>";var b=n.PARTY_MODUS_ID;var f=[n.PARTY_START_YEAR+2000,n.PARTY_START_MONTH-1,n.PARTY_START_DAY];var e=n.PARTY_START_TIME*60;var k=[n.PARTY_STOP_YEAR+2000,n.PARTY_STOP_MONTH-1,n.PARTY_STOP_DAY];var j=n.PARTY_STOP_TIME*60;l+="<div class='ui-field-contain ui-grid-c control-set control-set-"+theme+"'>";l+="<div class='ui-block-a grid-text'>"+mapText("CLIMATECONTROL_RT_TRANSCEIVER__PARTY_TEMPERATURE")+"</div>";l+="<div class='ui-block-b'><input type='range' data-parent-id='"+m+"' value='"+n.PARTY_TEMPERATURE+"' min='5.0' max='30.0' step='0.5' data-factor='1' id='setTemperature_"+b+"' data-highlight='true' data-theme='"+theme+"'/></div>";l+="<div class='ui-block-c'></div>";l+="<div class='ui-block-d'></div>";l+="<div class='ui-block-a grid-text'>"+mapText("CLIMATECONTROL_RT_TRANSCEIVER__PARTY_START")+"</div>";l+="<div class='ui-block-b'><input type='text' data-parent-id='"+m+"' data-datebox-default-value='"+f+"' id='setStartDate_"+b+"' data-theme='"+theme+"' data-role='datebox' data-datebox-mode='calbox' data-datebox-use-lang='de'/></div>";l+="<div class='ui-block-c'><input type='text' data-parent-id='"+m+"' data-datebox-default-value='"+e+"' id='setStartTime_"+b+"' data-theme='"+theme+"' data-role='datebox' data-datebox-mode='timebox' data-datebox-minute-step='30' data-datebox-use-lang='de'/></div>";l+="<div class='ui-block-d'></div>";l+="<div class='ui-block-a grid-text'>"+mapText("CLIMATECONTROL_RT_TRANSCEIVER__PARTY_STOP")+"</div>";l+="<div class='ui-block-b'><input type='text' data-parent-id='"+m+"' data-datebox-default-value='"+k+"' id='setEndDate_"+b+"' data-theme='"+theme+"' data-role='datebox' data-datebox-mode='calbox' data-datebox-use-lang='de'/></div>";l+="<div class='ui-block-c'><input type='text' data-parent-id='"+m+"' data-datebox-default-value='"+j+"' id='setEndTime_"+b+"' data-theme='"+theme+"' data-role='datebox' data-datebox-mode='timebox' data-datebox-minute-step='30' data-datebox-use-lang='de'/></div>";l+="<div class='ui-block-d'></div>";l+="<div class='ui-block-a'>"+addSetButton(m,b,mapText("CLIMATECONTROL_RT_TRANSCEIVER__PARTY_MODE"),"",n.VORDATE,true,n.deviceHTMLPostChannelGroupMode===2,true,h,"CLIMATECONTROL_RT_TRANSCEIVER")+"</div>";l+="</div>"}else{if(!g){l=""}}return l}function processDevices(p,d,b,s){var r="<li class='dataListItem' id='"+p.id+"'><h2 class='ui-li-heading'>"+unescape(p.name)+"</h2>";if(p.type==="CHANNEL"){r+=addChannel(p,d,b,s)}else{if(p.type==="VARDP"){s=true;var c=p.id;var g=unescape(p.info);var t=unescape(p.value);var q=p.valueType;var a=p.valueUnit;var x=p.valueName0;var w=p.valueName1;var j=p.valueMin;var m=p.valueMax;var f=p.valueList;var o=p.date;var v=getTimeDiffString(o,d);var n=getPicKey(c,"variables",p,false);b.varOptionsFirst="";b.varOptions=[];var h=g.indexOf("(");if(h!==-1){var y=g.indexOf(")",h);if(y!==-1){var u=g.substring(h+1,y);b.varOptions=u.split(",");if(b.varOptions.length>=1){b.varOptionsFirst=b.varOptions[0].toLowerCase()}}}r+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+g+"</p>";if($.inArray(n,picturesList)!==-1){r+="<div style='float: left; text-align: center; padding-right: 10px;'>";r+="<img id='img"+n+"' class='ui-div-thumbnail ui-img-"+theme+" lazyLoadImage' data-original='../webmatic_user/img/ids/variables/"+n+".png' src='img/menu/variables.png'/>";r+="</div>"}if(isReadOnly(g)){r+=addReadonlyVariable(c,t,v,q,a,f,x,w,1)}else{if(b.varOptionsFirst==="d"||b.varOptionsFirst==="dk"||b.varOptionsFirst==="g"||b.varOptionsFirst==="h"){excludeFromRefresh.push(c.toString());b.addDiagram=true;if(b.varOptionsFirst==="dk"){b.diagramData=p.diagrams}else{b.diagramData=t}b.diagramID="chart_"+c;b.diagramUnit=a;if(b.varOptionsFirst==="g"){r+="<div id='"+b.diagramID+"' style='height:200px; width:300px;'></div> <i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+v+"</i>"}else{r+="<div id='"+b.diagramID+"' style='height:300px; width:90%;'></div> <i class='last-used-time ui-li-desc' "+(resultOptionsMap.show_lastUsedTime?"":"style='display: none;'")+">"+v+"</i>"}}else{if(b.varOptionsFirst==="nv"){r=""}else{if(q==="2"){r+=addSetBoolButtonList("",c,t,x,w,a,v,true,s)}else{if(q==="4"){r+=addSetNumber("",c,t,a,j,m,0.001,1,v,true,s)}else{if(q==="16"){r+=addSetValueList("",c,t,f,a,v,true,s)}else{if(q==="20"&&a.toUpperCase()==="HTML"){r+=addHTML("",c,t,v,false)}else{if(q==="20"&&a.toUpperCase()==="HISTORIAN"){r+=addHistorianDiagram("",c,t,v,false)}else{if(q==="20"&&a.toUpperCase()==="TUNEIN"){r+=addTuneInRadio("",c,t,v,false)}else{if(q==="20"){r+=addSetText("",c,t,a,v,s)}else{r+=mapText("UNKNOWN_VAR_TYPE")+"!"}}}}}}}}}}}else{if(p.type==="PROGRAM"){var l=p.id;var e=p.info;var k=p.date;v=getTimeDiffString(k,d);s=true;r+="<p class='description' "+(resultOptionsMap.show_description?"":"style='display: none;'")+">"+e+"</p>";r+=addStartProgramButton("",l,mapText("RUN"),v,s)}}}if(r!==""){r+="</li>"}return r}function loadRecognization(){$.ajax({type:"GET",url:"cgi/recognizer.cgi",dataType:"json",async:false}).done(function(a){if(a.REMOTE_ADDR.match("^192.168.")||a.REMOTE_ADDR.match("^10.")||a.REMOTE_ADDR.match("^172.(1[6-9]|2[0-9]|3[0-1]).")){recognizeMap=a;client=a.REMOTE_ADDR;localStorage.setItem("webmaticrecognizeMap",JSON.stringify(recognizeMap))}else{recognizeMap={};client=""}}).fail(function(){recognizeMap={};client=""})}function buttonEvents(a,c){var e=a.data("id");var j="?id="+e;var h="info_"+e;var g=a.data("value");if(typeof g==="undefined"){var b="setValue_"+e;g=$("#"+b).val();var d=$("#"+b).data("factor");if(typeof d!=="undefined"){j+="&value="+(parseFloat(g)/d)}else{j+="&value="+g}}else{j+="&value="+g}var f=0;var k=$("[data-duration-parent='"+a.data("parent-id")+"']");k.each(function(l){var m=$(this).datebox("getLastDur");if(!isNaN(m)){f=m>f?m:f;j+="&durationId"+l+"="+k.data("id")+"&durationValue"+l+"="+m}});if(testSite){j+="&debug=true"}$("#"+h).text(mapText("TRANSFER"));$.get("cgi/set.cgi"+j,function(){if(c){$("#"+h).text(mapText("TRANSFER_OK"));refreshPage(0)}else{$("#"+h).text(mapText("DELAY"))}if(f>0){setTimeout(function(){refreshPage(0)},(f+3)*1000)}})}function reloadList(a,c,b,d){$("#"+dataListHeader).empty();$("#"+dataListHeader).append("<li data-role='list-divider' role='heading'>"+a+"<p style='float:right;'>"+c+"</p></li>");if(d!==""){$("#"+dataListHeader).append("<li class='description'>"+d+"</li>")}$("#"+dataListHeader).listview("refresh");$("#"+dataList).listview("refresh");if(b){$("#"+dataList).fadeIn()}$("#"+dataList).enhanceWithin().trigger("fertig")}function loadData(b,e,a){$(".buttonRefresh .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>");var d=false;if(a){$("#"+dataList).empty();$("#"+dataListHeader).empty();$("#"+dataListHeader).append("<li><img src='img/misc/wait16.gif' width=12px height=12px class='ui-li-icon ui-img-"+theme+"'>"+mapText("LOADING")+"...</li>").listview("refresh");if(localStorage.getItem("webmaticdevicesMap"+e)===null||localStorage.getItem("webmaticdevicesMap"+e)==="undefined"){if(newVersion){saveDataToFile=true}loadConfigData(false,b+"?list="+e,"devices","webmaticdevicesMap"+e,false,true);d=true}else{loadLocalStorageMap("devices",e)}var c=devicesMap.date;$.each(devicesMap.entries,function(h,j){var f=new Object();f.addDiagram=false;f.diagramData="";f.diagramID="";f.diagramUnit="";f.varOptions={};f.varOptionsFirst="";if(j.visible!=="false"){var g=processDevices(j,c,f,j.operate!=="false");if(g!==""){$("#"+dataList).append(g)}}addDiagram(f)});if(isGetSite){document.title=devicesMap.name}reloadList(devicesMap.name,c,a,devicesMap.description)}if(!d){loadConfigData(true,b+"?list="+e,"devices","webmaticdevicesMap"+e,false,true,function(h){var f=h.date;var g=h.visible!=="false";$.each(h.entries,function(m,n){var k=new Object();k.addDiagram=false;k.diagramData="";k.diagramID="";k.diagramUnit="";k.varOptions={};k.varOptionsFirst="";var l="";if(n.visible!=="false"){l=processDevices(n,f,k,n.operate!=="false");if(l!==""){var j=n.id;if($("#"+j).length===0&&g){$("#"+dataList).append(l)}else{if(g){if($.inArray(j.toString(),excludeFromRefresh)===-1){$("#"+j).replaceWith(l)}}else{if($("#"+j).length!==0){$("#"+j).remove()}}}}addDiagram(k)}});reloadList(h.name,f,a,h.description);$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"});$("img").trigger("lazyLoadInstantly")})}$(".buttonRefresh .ui-btn-text").html("&nbsp;");$(".ui-input-search .ui-input-text").trigger("change");$("[id^=button]").enhanceWithin();$("[id^=input]").enhanceWithin();$("textarea").textinput("refresh");$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"});$("img").trigger("lazyLoadInstantly")}function loadVariables(c){$(".buttonRefresh .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>");if(c){$("#"+dataList).empty();$("#"+dataListHeader).empty();$("#"+dataListHeader).append("<li><img src='img/misc/wait16.gif' width=12px height=12px class='ui-li-icon ui-img-"+theme+"'>"+mapText("LOADING")+"...</li>").listview("refresh");if(localStorage.getItem("webmaticvariablesMap")===null||localStorage.getItem("webmaticvariablesMap")==="undefined"){if(newVersion){saveDataToFile=true}loadConfigData(false,"../webmatic_user/variables.json","variables","webmaticvariablesMap",false,false)}else{loadLocalStorageMap("variables")}if(localStorage.getItem("webmaticvariablesclientMap")===null||localStorage.getItem("webmaticvariablesclientMap")==="undefined"){if(client!==""){loadConfigData(false,"../webmatic_user/variables"+client+".json","variablesClient","webmaticvariablesclientMap",false,true)}}else{variablesClientMap=JSON.parse(localStorage.getItem("webmaticvariablesclientMap"))}createOneMap("variables");var e=resultVariablesMap.date;var g={};$.each(resultVariablesMap,function(k,h){if(k==="date"||k==="size"||k==="divisors"||(divisorClick&&h.variables_divisor!==lastClickID)){return}var j=processVariable(h,k,e);if(resultOptionsMap.default_sort_manually){g[parseInt(h.position)]=j}else{g[h.name.toLowerCase()]=j}});var f;if(resultOptionsMap.default_sort_manually){f=Object.keys(g).sort(function(j,h){return j-h})}else{f=Object.keys(g).sort()}var a=f.length;for(var d=0;d<a;d++){var b=f[d];$("#"+dataList).append(g[b])}reloadList(mapText("VARIABLES"),e,c,"")}loadConfigData(true,"cgi/variables.cgi","variables","webmaticvariablesMap",false,true,function(){createOneMap("variables");var h=resultVariablesMap.date;$.each(resultVariablesMap,function(k,j){if(k==="date"||k==="size"||k==="divisors"||(divisorClick&&j.variables_divisor!==lastClickID)){return}if($("#"+k).length===0){$("#"+dataList).append(processVariable(j,k,h))}else{$("#"+k).replaceWith(processVariable(j,k,h))}});reloadList(mapText("VARIABLES"),h,c,"");$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"});$("img").trigger("lazyLoadInstantly")});$(".buttonRefresh .ui-btn-text").html("&nbsp;");$(".ui-input-search .ui-input-text").trigger("change");$("textarea").textinput("refresh");$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"});$("img").trigger("lazyLoadInstantly")}function loadPrograms(c){$(".buttonRefresh .ui-btn-text").html("<img class='ui-img-"+theme+"' src='img/misc/wait16.gif' width=12px height=12px>");if(c){$("#"+dataList).empty();$("#"+dataListHeader).empty();$("#"+dataListHeader).append("<li><img src='img/misc/wait16.gif' width=12px height=12px class='ui-li-icon ui-img-"+theme+"'>"+mapText("LOADING")+"...</li>").listview("refresh");if(localStorage.getItem("webmaticprogramsMap")===null||localStorage.getItem("webmaticprogramsMap")==="undefined"){if(newVersion){saveDataToFile=true}loadConfigData(false,"../webmatic_user/programs.json","programs","webmaticprogramsMap",false,false)}else{loadLocalStorageMap("programs")}if(localStorage.getItem("webmaticprogramsclientMap")===null||localStorage.getItem("webmaticprogramsclientMap")==="undefined"){if(client!==""){loadConfigData(false,"../webmatic_user/programs"+client+".json","programsClient","webmaticprogramsclientMap",false,true)}}else{programsClientMap=JSON.parse(localStorage.getItem("webmaticprogramsclientMap"))}createOneMap("programs");var e=resultProgramsMap.date;var g={};$.each(resultProgramsMap,function(l,n){if(l==="date"||l==="size"||l==="divisors"||(divisorClick&&n.programs_divisor!==lastClickID)){return}var j=n.visible;var h=n.active;var m=l;var k=processProgram(n,m,e,h,(readModus&&j)||!readModus);if(resultOptionsMap.default_sort_manually){g[parseInt(n.position)]=k}else{g[n.name.toLowerCase()]=k}});var f;if(resultOptionsMap.default_sort_manually){f=Object.keys(g).sort(function(j,h){return j-h})}else{f=Object.keys(g).sort()}var a=f.length;for(var d=0;d<a;d++){var b=f[d];$("#"+dataList).append(g[b])}reloadList(mapText("PROGRAMS"),e,c,"");$("#"+dataList).find(".btnDisabled").button("disable")}loadConfigData(true,"cgi/programs.cgi","programs","webmaticprogramsMap",false,true,function(){createOneMap("programs");var h=resultProgramsMap.date;$.each(resultProgramsMap,function(l,n){if(l==="date"||l==="size"||l==="divisors"||(divisorClick&&n.programs_divisor!==lastClickID)){return}var k=n.visible;var j=n.active;var m=l;if($("#"+m).length===0){$("#"+dataList).append(processProgram(n,m,h,j,(readModus&&k)||!readModus))}else{$("#"+m).replaceWith(processProgram(n,m,h,j,(readModus&&k)||!readModus))}});reloadList(mapText("PROGRAMS"),h,c,"");$("#"+dataList).find(".btnDisabled").button("disable");$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"});$("img").trigger("lazyLoadInstantly")});$(".buttonRefresh .ui-btn-text").html("&nbsp;");$(".ui-input-search .ui-input-text").trigger("change");$("img.lazyLoadImage").lazyload({event:"lazyLoadInstantly"});$("img").trigger("lazyLoadInstantly")}$(function(){if(debugModus&&false){$("#errorsDebugger").show();$.each(errorsDebugger,function(e){$("#errorsDebugger").append(errorsDebugger[e])})}$.jqplot.config.enablePlugins=true;$(document).bind("mobileinit",function(){$.mobile.listview.prototype.options.filterPlaceholder=mapText("FILTER")});$(document.body).on("click","[id^=setButton]",function(){var l=$(this);var p=l.data("special");if(p){var r=l.data("id");switch(p){case"CLIMATECONTROL_RT_TRANSCEIVER":var s=$("#setTemperature_"+r).val();var f=$("#setStartTime_"+r).datebox("getTheDate");var g=$("#setStartDate_"+r).datebox("getTheDate");var k=(f.getHours()*60)+f.getMinutes();var q=g.getDate();var h=g.getMonth()+1;var u=g.getYear()-100;var n=$("#setEndTime_"+r).datebox("getTheDate");var m=$("#setEndDate_"+r).datebox("getTheDate");var e=(n.getHours()*60)+n.getMinutes();var j=m.getDate();var t=m.getMonth()+1;var o=m.getYear()-100;l.attr("data-value",s+","+k+","+q+","+h+","+u+","+e+","+j+","+t+","+o);break}}buttonEvents(l,l.data("refresh"),p)});$(document.body).on("click","[id^=setValueBigList]",function(){var f=$(this);var e=f.data("id");f.attr("data-value",$("#selector_"+e).val());buttonEvents(f,f.data("refresh"))});$(document.body).on("click","[id^=setTextButton]",function(){var f=$(this).data("id");var e="setValue_"+f;var h="info_"+f;var j=$("#"+e).val();j=j.replace(/\"/g,"'");j=encodeURIComponent(j);var g="";if(testSite){g+="&debug=true"}$("#"+h).text(mapText("TRANSFER"));$.get("cgi/set.cgi?id="+f+"&value="+j+g,function(){$("#"+h).text(mapText("TRANSFER_OK"));refreshPage(0)})});$(document.body).on("click","[id^=startProgramButton]",function(){var e=$(this).data("id");var g="info_"+e;var f="";if(testSite){f+="&debug=true"}$("#"+g).text("START");$.get("cgi/startprogram.cgi?id="+e+f,function(){$("#"+g).text(mapText("TRANSFER_OK"))})});$(document.body).on("click",".onlyPic:not(.onlyPicDisabled)",function(){var e=$(this).data("id");$("#player"+e).removeClass("onlyPic-player-"+theme).addClass("onlyPic-playerani-"+theme);var g=$(this).data("type");var f=testSite?"&debug=true":"";if(testSite){f+="&debug=true"}if(g==="programs"){$.get("cgi/startprogram.cgi?id="+e+f,function(){$("#player"+e).delay(3000).removeClass("onlyPic-playerani-"+theme).addClass("onlyPic-player-"+theme)})}else{if(g==="variables"){var h=$(this).data("value");if(h===""){h=false}$.get("cgi/set.cgi?id="+e+"&value="+!h+f,function(){refreshPage(0)})}}});$(document.body).on("click","[id^=saveHistorianData]",function(){var f=$(this);var e=f.data("id");f.attr("data-value",$("#hisHistorianID_"+e).val()+";"+$("#hisHMID_"+e).val()+";"+$("#hisDuration_"+e).val()+$("#hisSelector_"+e).val());buttonEvents(f,true)});$(document.body).on("click","[id^=saveTuneInRadioData]",function(){var f=$(this);var e=f.data("id");f.attr("data-value",$("#tuneInURL_"+e).val());buttonEvents(f,true)});$(document.body).on("click","[name=showTuneIn]",function(){var g=$(this);var f=g.data("id");var h=$("#saveTuneInRadioData_"+f).data("value");g.fadeOut(500,function(){g.attr("name","editTuneIn");if(h!==undefined){g.attr("data-val",h)}g.removeClass("ui-icon-eye").addClass("ui-icon-edit").fadeIn(1000)});var j=g.data("parentId");var e=g.data("vorDate");$("#tuneInField_"+f).fadeOut(500,function(){$("#tuneInField_"+f).html(getTuneIn(j,f,h,e));$("#"+f).enhanceWithin();$("#tuneInField_"+f).fadeIn(1000)})});$(document.body).on("click","[name=editTuneIn]",function(){var g=$(this);g.fadeOut(500,function(){g.attr("name","showTuneIn");g.removeClass("ui-icon-edit").addClass("ui-icon-eye").fadeIn(1000)});var j=g.data("parentId");var f=g.data("id");var h=g.data("val");var e=g.data("vorDate");$("#tuneInField_"+f).fadeOut(500,function(){$("#tuneInField_"+f).html(editTuneIn(j,f,h,e));$("#"+f).enhanceWithin();$("#tuneInField_"+f).fadeIn(1000)})});$(window).on("beforeunload",function(){if(mustBeSaved){saveAllDatasToServer()}if(!debugModus&&resultOptionsMap.dont_leave){return"Don't leave me!"}});$(document.body).on("fertig","#dataList,#dataList2",function(){if(!$("#"+dataList).hasClass("column-1")){var f=0;var g=0;var k=new Array();var j;var h=0;var l=$(".dataListItem");var e=l.length;l.each(function(n){j=$(this);h=j.position().top;if(g!==h){for(var m=0;m<k.length;m++){k[m].height(f)}h=j.position().top;k.length=0;g=h;f=j.height();k.push(j)}else{k.push(j);f=(f<j.height())?(j.height()):(f)}if(n===e-1){for(var m=0;m<k.length;m++){k[m].height(f)}}})}});var b=300,d=1200,a=700,c=$(".cd-top");$(window).scroll(function(){($(this).scrollTop()>b)?c.addClass("cd-is-visible"):c.removeClass("cd-is-visible cd-fade-out");if($(this).scrollTop()>d){c.addClass("cd-fade-out")}});c.on("click",function(e){e.preventDefault();$("body,html").animate({scrollTop:0},a)})});