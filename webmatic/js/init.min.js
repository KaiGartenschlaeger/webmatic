
if(localStorage.getItem(isPreRelease+"webmaticrecognizeMap")===null||localStorage.getItem(isPreRelease+"webmaticrecognizeMap")==="undefined"){loadRecognization()}else{recognizeMap=JSON.parse(localStorage.getItem(isPreRelease+"webmaticrecognizeMap"));client=("REMOTE_ADDR" in recognizeMap?recognizeMap.REMOTE_ADDR:"")}$.ajax({type:"GET",url:"../"+userFolder+"/reload"+client+".json",async:false,cache:false}).done(function(a){reloadClient=(String(a).trim()==="true");if(reloadClient){$.post("cgi/saveconfig.cgi",{name:"reload"+client,text:"false",folder:userFolder})}}).fail(function(){$.post("cgi/saveconfig.cgi",{name:"reload"+client,text:"false",folder:userFolder})});if(localStorage.getItem(isPreRelease+"clearCache")!==null||reloadClient){localStorage.clear()}if(localStorage.getItem(isPreRelease+"tempOptionsForClient")!==null){client=localStorage.getItem(isPreRelease+"tempOptionsForClient");isTempClient=true;localStorage.clear();$.post("cgi/saveconfig.cgi",{name:"reload"+client,text:"true",folder:userFolder})}if(localStorage.getItem(isPreRelease+"webmaticoptionsMap")===null||localStorage.getItem(isPreRelease+"webmaticoptionsMap")==="undefined"){localStorage.clear();if(isTempClient){localStorage.setItem(isPreRelease+"clearCache",true)}localStorage.setItem(isPreRelease+"webmaticrecognizeMap",JSON.stringify(recognizeMap));loadConfigData(false,"../"+userFolder+"/config.json","config","webmaticoptionsMap",false,true)}else{optionsMap=JSON.parse(localStorage.getItem(isPreRelease+"webmaticoptionsMap"));var ok=true;if(optionsMap.storageVersion!==storageVersion){ok=false;localStorage.clear();localStorage.setItem(isPreRelease+"webmaticrecognizeMap",JSON.stringify(recognizeMap));newVersion=true}loadConfigData(ok,"../"+userFolder+"/config.json","config","webmaticoptionsMap",false,true)}if(localStorage.getItem(isPreRelease+"webmaticoptionsclientMap")===null||localStorage.getItem(isPreRelease+"webmaticoptionsclientMap")==="undefined"){if(client!==""){loadConfigData(false,"../"+userFolder+"/config"+client+".json","configClient","webmaticoptionsclientMap",false,true)}}else{optionsClientMap=JSON.parse(localStorage.getItem(isPreRelease+"webmaticoptionsclientMap"))}createOneMap("config");clientsList=optionsMap.clientsList;if(localStorage.getItem(isPreRelease+"picturesList")===null||localStorage.getItem(isPreRelease+"picturesList")==="undefined"){$.ajax({type:"GET",url:"cgi/check-image.cgi?folder="+userFolder,dataType:"json",async:false,cache:false}).done(function(a){picturesList=a;localStorage.setItem(isPreRelease+"picturesList",JSON.stringify(picturesList))}).fail(function(){picturesListError=true})}else{picturesList=JSON.parse(localStorage.getItem(isPreRelease+"picturesList"));$.getJSON("cgi/check-image.cgi?folder="+userFolder,function(a){picturesList=a;localStorage.setItem(isPreRelease+"picturesList",JSON.stringify(picturesList))})}if(!debugModus){if(resultOptionsMap.new_version!=="no"){if(resultOptionsMap.new_version==="alpha"){$.get("https://raw.githubusercontent.com/ldittmar81/webmatic/master/ISALPHA",function(b){var a="";if(b==="1"){a="https://raw.githubusercontent.com/ldittmar81/webmatic/master/VERSIONALPHA"}else{a="https://raw.githubusercontent.com/ldittmar81/webmatic/master/VERSION"}$.get(a,function(c){newWebmaticVersion=String(c).trim()})});versionURL="https://raw.githubusercontent.com/ldittmar81/webmatic/master/VERSIONALPHA"}else{$.get("https://raw.githubusercontent.com/ldittmar81/webmatic/master/VERSION",function(a){newWebmaticVersion=String(a).trim();if(isPreRelease&&newWebmaticVersion===lastStableVersion){newWebmaticVersion=webmaticVersion}})}}$.get("../"+userFolder+"/ver.json",function(a){if(String(a).trim()!==webmaticVersion){createVerFile()}}).fail(function(a){if(a.status===404){createVerFile()}})}theme=resultOptionsMap.default_theme;if($.inArray(theme,["wma","wmb","wmc","wmd","wme","wmf","wmg","wmh","wmi","wmj","wmk","wml"])===-1){theme="wma"}font=resultOptionsMap.default_font;if($.inArray(font,["a","b","c","d","e","f","g","h","i","j","k","l"])===-1){font="a"}var refreshTimer=setInterval(function(){checkrefreshPage()},1000);function loadRecognization(){$.ajax({type:"GET",url:"cgi/recognizer.cgi",dataType:"json",async:false,cache:false}).done(function(a){if(a.REMOTE_ADDR.match("^192.168.")||a.REMOTE_ADDR.match("^10.")||a.REMOTE_ADDR.match("^172.(1[6-9]|2[0-9]|3[0-1]).")){recognizeMap=a;client=a.REMOTE_ADDR;localStorage.setItem(isPreRelease+"webmaticrecognizeMap",JSON.stringify(recognizeMap))}else{recognizeMap={};client=""}}).fail(function(){recognizeMap={};client=""})};